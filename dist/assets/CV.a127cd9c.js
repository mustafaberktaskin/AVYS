var ln=Object.defineProperty;var cn=(e,t,n)=>t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>(cn(e,typeof t!="symbol"?t+"":t,n),n),ft=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var N=(e,t,n)=>(ft(e,t,"read from private field"),n?n.call(e):t.get(e)),ie=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_e=(e,t,n,i)=>(ft(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),at=(e,t,n,i)=>({set _(s){_e(e,t,s,n)},get _(){return N(e,t,i)}}),de=(e,t,n)=>(ft(e,t,"access private method"),n);import{r as react,l as jsxs,j as jsx,p as propTypes,n as getAugmentedNamespace,Z as browser$1,a1 as Buffer,a2 as bufferEs6,q as getDefaultExportFromCjs,a3 as _t}from"./index.25304028.js";import{a as __awaiter$1,b as __generator,c as __spreadArray$1,d as __read}from"./tslib.es6.b15f5115.js";import{R as Row,C as Col}from"./Col.626124e4.js";import{C as Card,a as CardBody}from"./CardBody.da7ce105.js";import{C as CardHeader}from"./CardHeader.96848eb5.js";import{C as CardTitle}from"./CardTitle.5bd093b7.js";function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function _objectWithoutProperties$1(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$1(e,t),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,i)||(n[i]=e[i]))}return n}function _objectWithoutPropertiesLoose$1(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,a;for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var DownloadCloud=react.exports.forwardRef(function(e,t){var n=e.color,i=n===void 0?"currentColor":n,s=e.size,a=s===void 0?24:s,f=_objectWithoutProperties$1(e,["color","size"]);return jsxs("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...f,children:[jsx("polyline",{points:"8 17 12 21 16 17"}),jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),jsx("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})]})});DownloadCloud.propTypes={color:propTypes.exports.string,size:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number])};DownloadCloud.displayName="DownloadCloud";const DownloadCloud$1=DownloadCloud;function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3$1=getAugmentedNamespace(__viteBrowserExternal$1),maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\x7F]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map(e,t){const n=[];let i=e.length;for(;i--;)n[i]=t(e[i]);return n}function mapDomain(e,t){const n=e.split("@");let i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(regexSeparators,".");const s=e.split("."),a=map(s,t).join(".");return i+a}function ucs2decode(e){const t=[];let n=0;const i=e.length;for(;n<i;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<i){const a=e.charCodeAt(n++);(a&64512)==56320?t.push(((s&1023)<<10)+(a&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const digitToBasic=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},adapt=function(e,t,n){let i=0;for(e=n?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;i+=base)e=floor(e/baseMinusTMin);return floor(i+(baseMinusTMin+1)*e/(e+skew))},encode=function(e){const t=[];e=ucs2decode(e);const n=e.length;let i=initialN,s=0,a=initialBias;for(const _ of e)_<128&&t.push(stringFromCharCode(_));const f=t.length;let m=f;for(f&&t.push(delimiter);m<n;){let _=maxInt;for(const c of e)c>=i&&c<_&&(_=c);const l=m+1;_-i>floor((maxInt-s)/l)&&error("overflow"),s+=(_-i)*l,i=_;for(const c of e)if(c<i&&++s>maxInt&&error("overflow"),c===i){let I=s;for(let D=base;;D+=base){const P=D<=a?tMin:D>=a+tMax?tMax:D-a;if(I<P)break;const E=I-P,T=base-P;t.push(stringFromCharCode(digitToBasic(P+E%T,0))),I=floor(E/T)}t.push(stringFromCharCode(digitToBasic(I,0))),a=adapt(s,l,m===f),s=0,++m}++s,++i}return t.join("")},toASCII=function(e){return mapDomain(e,function(t){return regexNonASCII.test(t)?"xn--"+encode(t):t})};var inherits$1;typeof Object.create=="function"?inherits$1=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:inherits$1=function(t,n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t};const inherits$2=inherits$1;var formatRegExp=/%[sdj%]/g;function format$1(e){if(!isString$1(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,s=i.length,a=String(e).replace(formatRegExp,function(m){if(m==="%%")return"%";if(n>=s)return m;switch(m){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch{return"[Circular]"}default:return m}}),f=i[n];n<s;f=i[++n])isNull(f)||!isObject$1(f)?a+=" "+f:a+=" "+inspect(f);return a}function deprecate(e,t){if(isUndefined(globalThis.process))return function(){return deprecate(e,t).apply(this,arguments)};if(browser$1.noDeprecation===!0)return e;var n=!1;function i(){if(!n){if(browser$1.throwDeprecation)throw new Error(t);browser$1.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}return i}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron={}.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var t=0;debugs[e]=function(){var n=format$1.apply(null,arguments);console.error("%s %d: %s",e,t,n)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(t)?n.showHidden=t:t&&_extend(n,t),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"\x1B["+inspect.colors[n][0]+"m"+e+"\x1B["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(n,i){t[n]=!0}),t}function formatValue(e,t,n){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);return isString$1(i)||(i=formatValue(e,i,n)),i}var s=formatPrimitive(e,t);if(s)return s;var a=Object.keys(t),f=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),isError(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(t);if(a.length===0){if(isFunction(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var _="",l=!1,c=["{","}"];if(isArray(t)&&(l=!0,c=["[","]"]),isFunction(t)){var I=t.name?": "+t.name:"";_=" [Function"+I+"]"}if(isRegExp(t)&&(_=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(_=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(_=" "+formatError(t)),a.length===0&&(!l||t.length==0))return c[0]+_+c[1];if(n<0)return isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var D;return l?D=formatArray(e,t,n,f,a):D=a.map(function(P){return formatProperty(e,t,n,f,P,l)}),e.seen.pop(),reduceToSingleString(D,_,c)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString$1(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(isNumber(t))return e.stylize(""+t,"number");if(isBoolean(t))return e.stylize(""+t,"boolean");if(isNull(t))return e.stylize("null","null")}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,i,s){for(var a=[],f=0,m=t.length;f<m;++f)hasOwnProperty(t,String(f))?a.push(formatProperty(e,t,n,i,String(f),!0)):a.push("");return s.forEach(function(_){_.match(/^\d+$/)||a.push(formatProperty(e,t,n,i,_,!0))}),a}function formatProperty(e,t,n,i,s,a){var f,m,_;if(_=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},_.get?_.set?m=e.stylize("[Getter/Setter]","special"):m=e.stylize("[Getter]","special"):_.set&&(m=e.stylize("[Setter]","special")),hasOwnProperty(i,s)||(f="["+s+"]"),m||(e.seen.indexOf(_.value)<0?(isNull(n)?m=formatValue(e,_.value,null):m=formatValue(e,_.value,n-1),m.indexOf(`
`)>-1&&(a?m=m.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):m=`
`+m.split(`
`).map(function(l){return"   "+l}).join(`
`))):m=e.stylize("[Circular]","special")),isUndefined(f)){if(a&&s.match(/^\d+$/))return m;f=JSON.stringify(""+s),f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=e.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=e.stylize(f,"string"))}return f+": "+m}function reduceToSingleString(e,t,n){var i=e.reduce(function(s,a){return a.indexOf(`
`)>=0,s+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return typeof e=="boolean"}function isNull(e){return e===null}function isNullOrUndefined(e){return e==null}function isNumber(e){return typeof e=="number"}function isString$1(e){return typeof e=="string"}function isSymbol(e){return typeof e=="symbol"}function isUndefined(e){return e===void 0}function isRegExp(e){return isObject$1(e)&&objectToString(e)==="[object RegExp]"}function isObject$1(e){return typeof e=="object"&&e!==null}function isDate(e){return isObject$1(e)&&objectToString(e)==="[object Date]"}function isError(e){return isObject$1(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction(e){return typeof e=="function"}function isPrimitive(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],t].join(" ")}function log(){console.log("%s - %s",timestamp(),format$1.apply(null,arguments))}function _extend(e,t){if(!t||!isObject$1(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const util={inherits:inherits$2,_extend,log,isBuffer,isPrimitive,isFunction,isError,isDate,isObject:isObject$1,isRegExp,isUndefined,isSymbol,isString:isString$1,isNumber,isNullOrUndefined,isNull,isBoolean,isArray,inspect,deprecate,format:format$1,debuglog},util$1=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,deprecate,debuglog,inspect,isArray,isBoolean,isNull,isNullOrUndefined,isNumber,isString:isString$1,isSymbol,isUndefined,isRegExp,isObject:isObject$1,isDate,isError,isFunction,isPrimitive,isBuffer,log,inherits:inherits$2,_extend,default:util},Symbol.toStringTag,{value:"Module"})),url={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,format:urlFormat,Url};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t,n){if(e&&isObject$1(e)&&e instanceof Url)return e;var i=new Url;return i.parse(e,t,n),i}Url.prototype.parse=function(e,t,n){return parse(this,e,t,n)};function parse(e,t,n,i){if(!isString$1(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=s!==-1&&s<t.indexOf("#")?"?":"#",f=t.split(a),m=/\\/g;f[0]=f[0].replace(m,"/"),t=f.join(a);var _=t;if(_=_.trim(),!i&&t.split("#").length===1){var l=simplePathPattern.exec(_);if(l)return e.path=_,e.href=_,e.pathname=l[1],l[2]?(e.search=l[2],n?e.query=qsParse(e.search.substr(1)):e.query=e.search.substr(1)):n&&(e.search="",e.query={}),e}var c=protocolPattern.exec(_);if(c){c=c[0];var I=c.toLowerCase();e.protocol=I,_=_.substr(c.length)}if(i||c||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var D=_.substr(0,2)==="//";D&&!(c&&hostlessProtocol[c])&&(_=_.substr(2),e.slashes=!0)}var P,E,T,d;if(!hostlessProtocol[c]&&(D||c&&!slashedProtocol[c])){var u=-1;for(P=0;P<hostEndingChars.length;P++)E=_.indexOf(hostEndingChars[P]),E!==-1&&(u===-1||E<u)&&(u=E);var O,k;for(u===-1?k=_.lastIndexOf("@"):k=_.lastIndexOf("@",u),k!==-1&&(O=_.slice(0,k),_=_.slice(k+1),e.auth=decodeURIComponent(O)),u=-1,P=0;P<nonHostChars.length;P++)E=_.indexOf(nonHostChars[P]),E!==-1&&(u===-1||E<u)&&(u=E);u===-1&&(u=_.length),e.host=_.slice(0,u),_=_.slice(u),parseHost(e),e.hostname=e.hostname||"";var g=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!g){var o=e.hostname.split(/\./);for(P=0,T=o.length;P<T;P++){var v=o[P];if(!!v&&!v.match(hostnamePartPattern)){for(var y="",p=0,C=v.length;p<C;p++)v.charCodeAt(p)>127?y+="x":y+=v[p];if(!y.match(hostnamePartPattern)){var B=o.slice(0,P),S=o.slice(P+1),W=v.match(hostnamePartStart);W&&(B.push(W[1]),S.unshift(W[2])),S.length&&(_="/"+S.join(".")+_),e.hostname=B.join(".");break}}}}e.hostname.length>hostnameMaxLen?e.hostname="":e.hostname=e.hostname.toLowerCase(),g||(e.hostname=toASCII(e.hostname)),d=e.port?":"+e.port:"";var V=e.hostname||"";e.host=V+d,e.href+=e.host,g&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),_[0]!=="/"&&(_="/"+_))}if(!unsafeProtocol[I])for(P=0,T=autoEscape.length;P<T;P++){var Y=autoEscape[P];if(_.indexOf(Y)!==-1){var ee=encodeURIComponent(Y);ee===Y&&(ee=escape(Y)),_=_.split(Y).join(ee)}}var re=_.indexOf("#");re!==-1&&(e.hash=_.substr(re),_=_.slice(0,re));var le=_.indexOf("?");if(le!==-1?(e.search=_.substr(le),e.query=_.substr(le+1),n&&(e.query=qsParse(e.query)),_=_.slice(0,le)):n&&(e.search="",e.query={}),_&&(e.pathname=_),slashedProtocol[I]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var oe=e.search||"";e.path=d+oe}return e.href=format(e),e}function urlFormat(e){return isString$1(e)&&(e=parse({},e)),format(e)}function format(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",s=e.hash||"",a=!1,f="";e.host?a=t+e.host:e.hostname&&(a=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(a+=":"+e.port)),e.query&&isObject$1(e.query)&&Object.keys(e.query).length&&(f=qsStringify(e.query));var m=e.search||f&&"?"+f||"";return n&&n.substr(-1)!==":"&&(n+=":"),e.slashes||(!n||slashedProtocol[n])&&a!==!1?(a="//"+(a||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):a||(a=""),s&&s.charAt(0)!=="#"&&(s="#"+s),m&&m.charAt(0)!=="?"&&(m="?"+m),i=i.replace(/[?#]/g,function(_){return encodeURIComponent(_)}),m=m.replace("#","%23"),n+a+i+m+s}Url.prototype.format=function(){return format(this)};function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}Url.prototype.resolveObject=function(e){if(isString$1(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var n=new Url,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];n[a]=this[a]}if(n.hash=e.hash,e.href==="")return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var f=Object.keys(e),m=0;m<f.length;m++){var _=f[m];_!=="protocol"&&(n[_]=e[_])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}var l;if(e.protocol&&e.protocol!==n.protocol){if(!slashedProtocol[e.protocol]){for(var c=Object.keys(e),I=0;I<c.length;I++){var D=c[I];n[D]=e[D]}return n.href=n.format(),n}if(n.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),n.pathname=l.join("/")}else n.pathname=e.pathname;if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var P=n.pathname||"",E=n.search||"";n.path=P+E}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var T=n.pathname&&n.pathname.charAt(0)==="/",d=e.host||e.pathname&&e.pathname.charAt(0)==="/",u=d||T||n.host&&e.pathname,O=u,k=n.pathname&&n.pathname.split("/")||[],g=n.protocol&&!slashedProtocol[n.protocol];l=e.pathname&&e.pathname.split("/")||[],g&&(n.hostname="",n.port=null,n.host&&(k[0]===""?k[0]=n.host:k.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(l[0]===""?l[0]=e.host:l.unshift(e.host)),e.host=null),u=u&&(l[0]===""||k[0]===""));var o;if(d)n.host=e.host||e.host===""?e.host:n.host,n.hostname=e.hostname||e.hostname===""?e.hostname:n.hostname,n.search=e.search,n.query=e.query,k=l;else if(l.length)k||(k=[]),k.pop(),k=k.concat(l),n.search=e.search,n.query=e.query;else if(!isNullOrUndefined(e.search))return g&&(n.hostname=n.host=k.shift(),o=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,o&&(n.auth=o.shift(),n.host=n.hostname=o.shift())),n.search=e.search,n.query=e.query,(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=k.slice(-1)[0],y=(n.host||e.host||k.length>1)&&(v==="."||v==="..")||v==="",p=0,C=k.length;C>=0;C--)v=k[C],v==="."?k.splice(C,1):v===".."?(k.splice(C,1),p++):p&&(k.splice(C,1),p--);if(!u&&!O)for(;p--;p)k.unshift("..");u&&k[0]!==""&&(!k[0]||k[0].charAt(0)!=="/")&&k.unshift(""),y&&k.join("/").substr(-1)!=="/"&&k.push("");var B=k[0]===""||k[0]&&k[0].charAt(0)==="/";return g&&(n.hostname=n.host=B?"":k.length?k.shift():"",o=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,o&&(n.auth=o.shift(),n.host=n.hostname=o.shift())),u=u||n.host&&k.length,u&&!B&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n};Url.prototype.parseHost=function(){return parseHost(this)};function parseHost(e){var t=e.host,n=portPattern.exec(t);n&&(n=n[0],n!==":"&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}const url$1=Object.freeze(Object.defineProperty({__proto__:null,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,format:urlFormat,default:url,Url},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(url$1);var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(t,n,i){return Function.prototype.apply.call(t,n,i)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var NumberIsNaN=Number.isNaN||function(t){return t!==t};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function _getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var s=t==="error",a=this._events;if(a!==void 0)s=s&&a.error===void 0;else if(!s)return!1;if(s){var f;if(n.length>0&&(f=n[0]),f instanceof Error)throw f;var m=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw m.context=f,m}var _=a[t];if(_===void 0)return!1;if(typeof _=="function")ReflectApply(_,this,n);else for(var l=_.length,c=arrayClone(_,l),i=0;i<l;++i)ReflectApply(c[i],this,n);return!0};function _addListener(e,t,n,i){var s,a,f;if(checkListener(n),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),f=a[t]),f===void 0)f=a[t]=n,++e._eventsCount;else if(typeof f=="function"?f=a[t]=i?[n,f]:[f,n]:i?f.unshift(n):f.push(n),s=_getMaxListeners(e),s>0&&f.length>s&&!f.warned){f.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=e,m.type=t,m.count=f.length,ProcessEmitWarning(m)}return e}EventEmitter.prototype.addListener=function(t,n){return _addListener(this,t,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(t,n){return _addListener(this,t,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=onceWrapper.bind(i);return s.listener=n,i.wrapFn=s,s}EventEmitter.prototype.once=function(t,n){return checkListener(n),this.on(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.prependOnceListener=function(t,n){return checkListener(n),this.prependListener(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.removeListener=function(t,n){var i,s,a,f,m;if(checkListener(n),s=this._events,s===void 0)return this;if(i=s[t],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(a=-1,f=i.length-1;f>=0;f--)if(i[f]===n||i[f].listener===n){m=i[f].listener,a=f;break}if(a<0)return this;a===0?i.shift():spliceOne(i,a),i.length===1&&(s[t]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",t,m||n)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(t){var n,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),f;for(s=0;s<a.length;++s)f=a[s],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(t,n[s]);return this};function _listeners(e,t,n){var i=e._events;if(i===void 0)return[];var s=i[t];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?unwrapListeners(s):arrayClone(s,s.length)}EventEmitter.prototype.listeners=function(t){return _listeners(this,t,!0)};EventEmitter.prototype.rawListeners=function(t){return _listeners(this,t,!1)};EventEmitter.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):listenerCount.call(e,t)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function once(e,t){return new Promise(function(n,i){function s(f){e.removeListener(t,a),i(f)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}eventTargetAgnosticAddListener(e,t,a,{once:!0}),t!=="error"&&addErrorHandlerIfEventEmitter(e,s,{once:!0})})}function addErrorHandlerIfEventEmitter(e,t,n){typeof e.on=="function"&&eventTargetAgnosticAddListener(e,"error",t,n)}function eventTargetAgnosticAddListener(e,t,n,i){if(typeof e.on=="function")i.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(a){i.once&&e.removeEventListener(t,s),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}};var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=events.exports.EventEmitter),streamBrowser}const require$$2=getAugmentedNamespace(bufferEs6),require$$3=getAugmentedNamespace(util$1);var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function e(E,T){var d=Object.keys(E);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(E);T&&(u=u.filter(function(O){return Object.getOwnPropertyDescriptor(E,O).enumerable})),d.push.apply(d,u)}return d}function t(E){for(var T=1;T<arguments.length;T++){var d=arguments[T]!=null?arguments[T]:{};T%2?e(Object(d),!0).forEach(function(u){n(E,u,d[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(d)):e(Object(d)).forEach(function(u){Object.defineProperty(E,u,Object.getOwnPropertyDescriptor(d,u))})}return E}function n(E,T,d){return T=f(T),T in E?Object.defineProperty(E,T,{value:d,enumerable:!0,configurable:!0,writable:!0}):E[T]=d,E}function i(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")}function s(E,T){for(var d=0;d<T.length;d++){var u=T[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(E,f(u.key),u)}}function a(E,T,d){return T&&s(E.prototype,T),d&&s(E,d),Object.defineProperty(E,"prototype",{writable:!1}),E}function f(E){var T=m(E,"string");return typeof T=="symbol"?T:String(T)}function m(E,T){if(typeof E!="object"||E===null)return E;var d=E[Symbol.toPrimitive];if(d!==void 0){var u=d.call(E,T||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(E)}var _=require$$2,l=_.Buffer,c=require$$3,I=c.inspect,D=I&&I.custom||"inspect";function P(E,T,d){l.prototype.copy.call(E,T,d)}return buffer_list=function(){function E(){i(this,E),this.head=null,this.tail=null,this.length=0}return a(E,[{key:"push",value:function(d){var u={data:d,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(d){var u={data:d,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var u=this.head,O=""+u.data;u=u.next;)O+=d+u.data;return O}},{key:"concat",value:function(d){if(this.length===0)return l.alloc(0);for(var u=l.allocUnsafe(d>>>0),O=this.head,k=0;O;)P(O.data,u,k),k+=O.data.length,O=O.next;return u}},{key:"consume",value:function(d,u){var O;return d<this.head.data.length?(O=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?O=this.shift():O=u?this._getString(d):this._getBuffer(d),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var u=this.head,O=1,k=u.data;for(d-=k.length;u=u.next;){var g=u.data,o=d>g.length?g.length:d;if(o===g.length?k+=g:k+=g.slice(0,d),d-=o,d===0){o===g.length?(++O,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=g.slice(o));break}++O}return this.length-=O,k}},{key:"_getBuffer",value:function(d){var u=l.allocUnsafe(d),O=this.head,k=1;for(O.data.copy(u),d-=O.data.length;O=O.next;){var g=O.data,o=d>g.length?g.length:d;if(g.copy(u,u.length-d,0,o),d-=o,d===0){o===g.length?(++k,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=g.slice(o));break}++k}return this.length-=k,u}},{key:D,value:function(d,u){return I(this,t(t({},u),{},{depth:0,customInspect:!1}))}}]),E}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function e(f,m){var _=this,l=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return l||c?(m?m(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,browser$1.nextTick(s,this,f)):browser$1.nextTick(s,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(I){!m&&I?_._writableState?_._writableState.errorEmitted?browser$1.nextTick(n,_):(_._writableState.errorEmitted=!0,browser$1.nextTick(t,_,I)):browser$1.nextTick(t,_,I):m?(browser$1.nextTick(n,_),m(I)):browser$1.nextTick(n,_)}),this)}function t(f,m){s(f,m),n(f)}function n(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(f,m){f.emit("error",m)}function a(f,m){var _=f._readableState,l=f._writableState;_&&_.autoDestroy||l&&l.autoDestroy?f.destroy(m):f.emit("error",m)}return destroy_1={destroy:e,undestroy:i,errorOrDestroy:a},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function e(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.__proto__=_}var t={};function n(m,_,l){l||(l=Error);function c(D,P,E){return typeof _=="string"?_:_(D,P,E)}var I=function(D){e(P,D);function P(E,T,d){return D.call(this,c(E,T,d))||this}return P}(l);I.prototype.name=l.name,I.prototype.code=m,t[m]=I}function i(m,_){if(Array.isArray(m)){var l=m.length;return m=m.map(function(c){return String(c)}),l>2?"one of ".concat(_," ").concat(m.slice(0,l-1).join(", "),", or ")+m[l-1]:l===2?"one of ".concat(_," ").concat(m[0]," or ").concat(m[1]):"of ".concat(_," ").concat(m[0])}else return"of ".concat(_," ").concat(String(m))}function s(m,_,l){return m.substr(!l||l<0?0:+l,_.length)===_}function a(m,_,l){return(l===void 0||l>m.length)&&(l=m.length),m.substring(l-_.length,l)===_}function f(m,_,l){return typeof l!="number"&&(l=0),l+_.length>m.length?!1:m.indexOf(_,l)!==-1}return n("ERR_INVALID_OPT_VALUE",function(m,_){return'The value "'+_+'" is invalid for option "'+m+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(m,_,l){var c;typeof _=="string"&&s(_,"not ")?(c="must not be",_=_.replace(/^not /,"")):c="must be";var I;if(a(m," argument"))I="The ".concat(m," ").concat(c," ").concat(i(_,"type"));else{var D=f(m,".")?"property":"argument";I='The "'.concat(m,'" ').concat(D," ").concat(c," ").concat(i(_,"type"))}return I+=". Received type ".concat(typeof l),I},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(m){return"The "+m+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(m){return"Cannot call "+m+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(m){return"Unknown encoding: "+m},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=t,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var e=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function t(i,s,a){return i.highWaterMark!=null?i.highWaterMark:s?i[a]:null}function n(i,s,a,f){var m=t(s,f,a);if(m!=null){if(!(isFinite(m)&&Math.floor(m)===m)||m<0){var _=f?a:"highWaterMark";throw new e(_,m)}return Math.floor(m)}return i.objectMode?16:16*1024}return state={getHighWaterMark:n},state}var browser,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1,browser=e;function e(n,i){if(t("noDeprecation"))return n;var s=!1;function a(){if(!s){if(t("throwDeprecation"))throw new Error(i);t("traceDeprecation")?console.trace(i):console.warn(i),s=!0}return n.apply(this,arguments)}return a}function t(n){try{if(!globalThis.localStorage)return!1}catch{return!1}var i=globalThis.localStorage[n];return i==null?!1:String(i).toLowerCase()==="true"}return browser}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=p;function e(b){var M=this;this.next=null,this.entry=null,this.finish=function(){F(M,b)}}var t;p.WritableState=v;var n={deprecate:requireBrowser()},i=requireStreamBrowser(),s=require$$2.Buffer,a=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(b){return s.from(b)}function m(b){return s.isBuffer(b)||b instanceof a}var _=requireDestroy(),l=requireState(),c=l.getHighWaterMark,I=requireErrorsBrowser().codes,D=I.ERR_INVALID_ARG_TYPE,P=I.ERR_METHOD_NOT_IMPLEMENTED,E=I.ERR_MULTIPLE_CALLBACK,T=I.ERR_STREAM_CANNOT_PIPE,d=I.ERR_STREAM_DESTROYED,u=I.ERR_STREAM_NULL_VALUES,O=I.ERR_STREAM_WRITE_AFTER_END,k=I.ERR_UNKNOWN_ENCODING,g=_.errorOrDestroy;inherits_browser.exports(p,i);function o(){}function v(b,M,U){t=t||require_stream_duplex(),b=b||{},typeof U!="boolean"&&(U=M instanceof t),this.objectMode=!!b.objectMode,U&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=c(this,b,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=b.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){re(M,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}v.prototype.getBuffer=function(){for(var M=this.bufferedRequest,U=[];M;)U.push(M),M=M.next;return U},function(){try{Object.defineProperty(v.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var y;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(M){return y.call(this,M)?!0:this!==p?!1:M&&M._writableState instanceof v}})):y=function(M){return M instanceof this};function p(b){t=t||require_stream_duplex();var M=this instanceof t;if(!M&&!y.call(p,this))return new p(b);this._writableState=new v(b,this,M),this.writable=!0,b&&(typeof b.write=="function"&&(this._write=b.write),typeof b.writev=="function"&&(this._writev=b.writev),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.final=="function"&&(this._final=b.final)),i.call(this)}p.prototype.pipe=function(){g(this,new T)};function C(b,M){var U=new O;g(b,U),browser$1.nextTick(M,U)}function B(b,M,U,z){var Z;return U===null?Z=new u:typeof U!="string"&&!M.objectMode&&(Z=new D("chunk",["string","Buffer"],U)),Z?(g(b,Z),browser$1.nextTick(z,Z),!1):!0}p.prototype.write=function(b,M,U){var z=this._writableState,Z=!1,A=!z.objectMode&&m(b);return A&&!s.isBuffer(b)&&(b=f(b)),typeof M=="function"&&(U=M,M=null),A?M="buffer":M||(M=z.defaultEncoding),typeof U!="function"&&(U=o),z.ending?C(this,U):(A||B(this,z,b,U))&&(z.pendingcb++,Z=W(this,z,A,b,M,U)),Z},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,!b.writing&&!b.corked&&!b.bufferProcessing&&b.bufferedRequest&&se(this,b))},p.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new k(M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function S(b,M,U){return!b.objectMode&&b.decodeStrings!==!1&&typeof M=="string"&&(M=s.from(M,U)),M}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function W(b,M,U,z,Z,A){if(!U){var w=S(M,z,Z);z!==w&&(U=!0,Z="buffer",z=w)}var $=M.objectMode?1:z.length;M.length+=$;var h=M.length<M.highWaterMark;if(h||(M.needDrain=!0),M.writing||M.corked){var x=M.lastBufferedRequest;M.lastBufferedRequest={chunk:z,encoding:Z,isBuf:U,callback:A,next:null},x?x.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else V(b,M,!1,$,z,Z,A);return h}function V(b,M,U,z,Z,A,w){M.writelen=z,M.writecb=w,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new d("write")):U?b._writev(Z,M.onwrite):b._write(Z,A,M.onwrite),M.sync=!1}function Y(b,M,U,z,Z){--M.pendingcb,U?(browser$1.nextTick(Z,z),browser$1.nextTick(ve,b,M),b._writableState.errorEmitted=!0,g(b,z)):(Z(z),b._writableState.errorEmitted=!0,g(b,z),ve(b,M))}function ee(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function re(b,M){var U=b._writableState,z=U.sync,Z=U.writecb;if(typeof Z!="function")throw new E;if(ee(U),M)Y(b,U,z,M,Z);else{var A=me(U)||b.destroyed;!A&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&se(b,U),z?browser$1.nextTick(le,b,U,A,Z):le(b,U,A,Z)}}function le(b,M,U,z){U||oe(b,M),M.pendingcb--,z(),ve(b,M)}function oe(b,M){M.length===0&&M.needDrain&&(M.needDrain=!1,b.emit("drain"))}function se(b,M){M.bufferProcessing=!0;var U=M.bufferedRequest;if(b._writev&&U&&U.next){var z=M.bufferedRequestCount,Z=new Array(z),A=M.corkedRequestsFree;A.entry=U;for(var w=0,$=!0;U;)Z[w]=U,U.isBuf||($=!1),U=U.next,w+=1;Z.allBuffers=$,V(b,M,!0,M.length,Z,"",A.finish),M.pendingcb++,M.lastBufferedRequest=null,A.next?(M.corkedRequestsFree=A.next,A.next=null):M.corkedRequestsFree=new e(M),M.bufferedRequestCount=0}else{for(;U;){var h=U.chunk,x=U.encoding,L=U.callback,j=M.objectMode?1:h.length;if(V(b,M,!1,j,h,x,L),U=U.next,M.bufferedRequestCount--,M.writing)break}U===null&&(M.lastBufferedRequest=null)}M.bufferedRequest=U,M.bufferProcessing=!1}p.prototype._write=function(b,M,U){U(new P("_write()"))},p.prototype._writev=null,p.prototype.end=function(b,M,U){var z=this._writableState;return typeof b=="function"?(U=b,b=null,M=null):typeof M=="function"&&(U=M,M=null),b!=null&&this.write(b,M),z.corked&&(z.corked=1,this.uncork()),z.ending||K(this,z,U),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function me(b){return b.ending&&b.length===0&&b.bufferedRequest===null&&!b.finished&&!b.writing}function Ee(b,M){b._final(function(U){M.pendingcb--,U&&g(b,U),M.prefinished=!0,b.emit("prefinish"),ve(b,M)})}function we(b,M){!M.prefinished&&!M.finalCalled&&(typeof b._final=="function"&&!M.destroyed?(M.pendingcb++,M.finalCalled=!0,browser$1.nextTick(Ee,b,M)):(M.prefinished=!0,b.emit("prefinish")))}function ve(b,M){var U=me(M);if(U&&(we(b,M),M.pendingcb===0&&(M.finished=!0,b.emit("finish"),M.autoDestroy))){var z=b._readableState;(!z||z.autoDestroy&&z.endEmitted)&&b.destroy()}return U}function K(b,M,U){M.ending=!0,ve(b,M),U&&(M.finished?browser$1.nextTick(U):b.once("finish",U)),M.ended=!0,b.writable=!1}function F(b,M,U){var z=b.entry;for(b.entry=null;z;){var Z=z.callback;M.pendingcb--,Z(U),z=z.next}M.corkedRequestsFree.next=b}return Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){!this._writableState||(this._writableState.destroyed=M)}}),p.prototype.destroy=_.destroy,p.prototype._undestroy=_.undestroy,p.prototype._destroy=function(b,M){M(b)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var e=Object.keys||function(l){var c=[];for(var I in l)c.push(I);return c};_stream_duplex=f;var t=require_stream_readable(),n=require_stream_writable();inherits_browser.exports(f,t);for(var i=e(n.prototype),s=0;s<i.length;s++){var a=i[s];f.prototype[a]||(f.prototype[a]=n.prototype[a])}function f(l){if(!(this instanceof f))return new f(l);t.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function m(){this._writableState.ended||browser$1.nextTick(_,this)}function _(l){l.end()}return Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(e,t){var n=require$$2,i=n.Buffer;function s(f,m){for(var _ in f)m[_]=f[_]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=a);function a(f,m,_){return i(f,m,_)}a.prototype=Object.create(i.prototype),s(i,a),a.from=function(f,m,_){if(typeof f=="number")throw new TypeError("Argument must not be a number");return i(f,m,_)},a.alloc=function(f,m,_){if(typeof f!="number")throw new TypeError("Argument must be a number");var l=i(f);return m!==void 0?typeof _=="string"?l.fill(m,_):l.fill(m):l.fill(0),l},a.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return i(f)},a.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(f)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,t=e.isEncoding||function(u){switch(u=""+u,u&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(u){if(!u)return"utf8";for(var O;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(O)return;u=(""+u).toLowerCase(),O=!0}}function i(u){var O=n(u);if(typeof O!="string"&&(e.isEncoding===t||!t(u)))throw new Error("Unknown encoding: "+u);return O||u}string_decoder.StringDecoder=s;function s(u){this.encoding=i(u);var O;switch(this.encoding){case"utf16le":this.text=I,this.end=D,O=4;break;case"utf8":this.fillLast=_,O=4;break;case"base64":this.text=P,this.end=E,O=3;break;default:this.write=T,this.end=d;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(O)}s.prototype.write=function(u){if(u.length===0)return"";var O,k;if(this.lastNeed){if(O=this.fillLast(u),O===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<u.length?O?O+this.text(u,k):this.text(u,k):O||""},s.prototype.end=c,s.prototype.text=l,s.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length};function a(u){return u<=127?0:u>>5===6?2:u>>4===14?3:u>>3===30?4:u>>6===2?-1:-2}function f(u,O,k){var g=O.length-1;if(g<k)return 0;var o=a(O[g]);return o>=0?(o>0&&(u.lastNeed=o-1),o):--g<k||o===-2?0:(o=a(O[g]),o>=0?(o>0&&(u.lastNeed=o-2),o):--g<k||o===-2?0:(o=a(O[g]),o>=0?(o>0&&(o===2?o=0:u.lastNeed=o-3),o):0))}function m(u,O,k){if((O[0]&192)!==128)return u.lastNeed=0,"\uFFFD";if(u.lastNeed>1&&O.length>1){if((O[1]&192)!==128)return u.lastNeed=1,"\uFFFD";if(u.lastNeed>2&&O.length>2&&(O[2]&192)!==128)return u.lastNeed=2,"\uFFFD"}}function _(u){var O=this.lastTotal-this.lastNeed,k=m(this,u);if(k!==void 0)return k;if(this.lastNeed<=u.length)return u.copy(this.lastChar,O,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,O,0,u.length),this.lastNeed-=u.length}function l(u,O){var k=f(this,u,O);if(!this.lastNeed)return u.toString("utf8",O);this.lastTotal=k;var g=u.length-(k-this.lastNeed);return u.copy(this.lastChar,0,g),u.toString("utf8",O,g)}function c(u){var O=u&&u.length?this.write(u):"";return this.lastNeed?O+"\uFFFD":O}function I(u,O){if((u.length-O)%2===0){var k=u.toString("utf16le",O);if(k){var g=k.charCodeAt(k.length-1);if(g>=55296&&g<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",O,u.length-1)}function D(u){var O=u&&u.length?this.write(u):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return O+this.lastChar.toString("utf16le",0,k)}return O}function P(u,O){var k=(u.length-O)%3;return k===0?u.toString("base64",O):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",O,u.length-k))}function E(u){var O=u&&u.length?this.write(u):"";return this.lastNeed?O+this.lastChar.toString("base64",0,3-this.lastNeed):O}function T(u){return u.toString(this.encoding)}function d(u){return u&&u.length?this.write(u):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var e=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function t(a){var f=!1;return function(){if(!f){f=!0;for(var m=arguments.length,_=new Array(m),l=0;l<m;l++)_[l]=arguments[l];a.apply(this,_)}}}function n(){}function i(a){return a.setHeader&&typeof a.abort=="function"}function s(a,f,m){if(typeof f=="function")return s(a,null,f);f||(f={}),m=t(m||n);var _=f.readable||f.readable!==!1&&a.readable,l=f.writable||f.writable!==!1&&a.writable,c=function(){a.writable||D()},I=a._writableState&&a._writableState.finished,D=function(){l=!1,I=!0,_||m.call(a)},P=a._readableState&&a._readableState.endEmitted,E=function(){_=!1,P=!0,l||m.call(a)},T=function(k){m.call(a,k)},d=function(){var k;if(_&&!P)return(!a._readableState||!a._readableState.ended)&&(k=new e),m.call(a,k);if(l&&!I)return(!a._writableState||!a._writableState.ended)&&(k=new e),m.call(a,k)},u=function(){a.req.on("finish",D)};return i(a)?(a.on("complete",D),a.on("abort",d),a.req?u():a.on("request",u)):l&&!a._writableState&&(a.on("end",c),a.on("close",c)),a.on("end",E),a.on("finish",D),f.error!==!1&&a.on("error",T),a.on("close",d),function(){a.removeListener("complete",D),a.removeListener("abort",d),a.removeListener("request",u),a.req&&a.req.removeListener("finish",D),a.removeListener("end",c),a.removeListener("close",c),a.removeListener("finish",D),a.removeListener("end",E),a.removeListener("error",T),a.removeListener("close",d)}}return endOfStream=s,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var e;function t(k,g,o){return g=n(g),g in k?Object.defineProperty(k,g,{value:o,enumerable:!0,configurable:!0,writable:!0}):k[g]=o,k}function n(k){var g=i(k,"string");return typeof g=="symbol"?g:String(g)}function i(k,g){if(typeof k!="object"||k===null)return k;var o=k[Symbol.toPrimitive];if(o!==void 0){var v=o.call(k,g||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(k)}var s=requireEndOfStream(),a=Symbol("lastResolve"),f=Symbol("lastReject"),m=Symbol("error"),_=Symbol("ended"),l=Symbol("lastPromise"),c=Symbol("handlePromise"),I=Symbol("stream");function D(k,g){return{value:k,done:g}}function P(k){var g=k[a];if(g!==null){var o=k[I].read();o!==null&&(k[l]=null,k[a]=null,k[f]=null,g(D(o,!1)))}}function E(k){browser$1.nextTick(P,k)}function T(k,g){return function(o,v){k.then(function(){if(g[_]){o(D(void 0,!0));return}g[c](o,v)},v)}}var d=Object.getPrototypeOf(function(){}),u=Object.setPrototypeOf((e={get stream(){return this[I]},next:function(){var g=this,o=this[m];if(o!==null)return Promise.reject(o);if(this[_])return Promise.resolve(D(void 0,!0));if(this[I].destroyed)return new Promise(function(C,B){browser$1.nextTick(function(){g[m]?B(g[m]):C(D(void 0,!0))})});var v=this[l],y;if(v)y=new Promise(T(v,this));else{var p=this[I].read();if(p!==null)return Promise.resolve(D(p,!1));y=new Promise(this[c])}return this[l]=y,y}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var g=this;return new Promise(function(o,v){g[I].destroy(null,function(y){if(y){v(y);return}o(D(void 0,!0))})})}),e),d),O=function(g){var o,v=Object.create(u,(o={},t(o,I,{value:g,writable:!0}),t(o,a,{value:null,writable:!0}),t(o,f,{value:null,writable:!0}),t(o,m,{value:null,writable:!0}),t(o,_,{value:g._readableState.endEmitted,writable:!0}),t(o,c,{value:function(p,C){var B=v[I].read();B?(v[l]=null,v[a]=null,v[f]=null,p(D(B,!1))):(v[a]=p,v[f]=C)},writable:!0}),o));return v[l]=null,s(g,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var p=v[f];p!==null&&(v[l]=null,v[a]=null,v[f]=null,p(y)),v[m]=y;return}var C=v[a];C!==null&&(v[l]=null,v[a]=null,v[f]=null,C(D(void 0,!0))),v[_]=!0}),g.on("readable",E.bind(null,v)),v};return async_iterator=O,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=C;var e;C.ReadableState=p,events.exports.EventEmitter;var t=function(w,$){return w.listeners($).length},n=requireStreamBrowser(),i=require$$2.Buffer,s=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(A){return i.from(A)}function f(A){return i.isBuffer(A)||A instanceof s}var m=require$$3,_;m&&m.debuglog?_=m.debuglog("stream"):_=function(){};var l=requireBuffer_list(),c=requireDestroy(),I=requireState(),D=I.getHighWaterMark,P=requireErrorsBrowser().codes,E=P.ERR_INVALID_ARG_TYPE,T=P.ERR_STREAM_PUSH_AFTER_EOF,d=P.ERR_METHOD_NOT_IMPLEMENTED,u=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O,k,g;inherits_browser.exports(C,n);var o=c.errorOrDestroy,v=["error","close","destroy","pause","resume"];function y(A,w,$){if(typeof A.prependListener=="function")return A.prependListener(w,$);!A._events||!A._events[w]?A.on(w,$):Array.isArray(A._events[w])?A._events[w].unshift($):A._events[w]=[$,A._events[w]]}function p(A,w,$){e=e||require_stream_duplex(),A=A||{},typeof $!="boolean"&&($=w instanceof e),this.objectMode=!!A.objectMode,$&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=D(this,A,"readableHighWaterMark",$),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(O||(O=requireString_decoder().StringDecoder),this.decoder=new O(A.encoding),this.encoding=A.encoding)}function C(A){if(e=e||require_stream_duplex(),!(this instanceof C))return new C(A);var w=this instanceof e;this._readableState=new p(A,this,w),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),n.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(w){!this._readableState||(this._readableState.destroyed=w)}}),C.prototype.destroy=c.destroy,C.prototype._undestroy=c.undestroy,C.prototype._destroy=function(A,w){w(A)},C.prototype.push=function(A,w){var $=this._readableState,h;return $.objectMode?h=!0:typeof A=="string"&&(w=w||$.defaultEncoding,w!==$.encoding&&(A=i.from(A,w),w=""),h=!0),B(this,A,w,!1,h)},C.prototype.unshift=function(A){return B(this,A,null,!0,!1)};function B(A,w,$,h,x){_("readableAddChunk",w);var L=A._readableState;if(w===null)L.reading=!1,re(A,L);else{var j;if(x||(j=W(L,w)),j)o(A,j);else if(L.objectMode||w&&w.length>0)if(typeof w!="string"&&!L.objectMode&&Object.getPrototypeOf(w)!==i.prototype&&(w=a(w)),h)L.endEmitted?o(A,new u):S(A,L,w,!0);else if(L.ended)o(A,new T);else{if(L.destroyed)return!1;L.reading=!1,L.decoder&&!$?(w=L.decoder.write(w),L.objectMode||w.length!==0?S(A,L,w,!1):se(A,L)):S(A,L,w,!1)}else h||(L.reading=!1,se(A,L))}return!L.ended&&(L.length<L.highWaterMark||L.length===0)}function S(A,w,$,h){w.flowing&&w.length===0&&!w.sync?(w.awaitDrain=0,A.emit("data",$)):(w.length+=w.objectMode?1:$.length,h?w.buffer.unshift($):w.buffer.push($),w.needReadable&&le(A)),se(A,w)}function W(A,w){var $;return!f(w)&&typeof w!="string"&&w!==void 0&&!A.objectMode&&($=new E("chunk",["string","Buffer","Uint8Array"],w)),$}C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(A){O||(O=requireString_decoder().StringDecoder);var w=new O(A);this._readableState.decoder=w,this._readableState.encoding=this._readableState.decoder.encoding;for(var $=this._readableState.buffer.head,h="";$!==null;)h+=w.write($.data),$=$.next;return this._readableState.buffer.clear(),h!==""&&this._readableState.buffer.push(h),this._readableState.length=h.length,this};var V=1073741824;function Y(A){return A>=V?A=V:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}function ee(A,w){return A<=0||w.length===0&&w.ended?0:w.objectMode?1:A!==A?w.flowing&&w.length?w.buffer.head.data.length:w.length:(A>w.highWaterMark&&(w.highWaterMark=Y(A)),A<=w.length?A:w.ended?w.length:(w.needReadable=!0,0))}C.prototype.read=function(A){_("read",A),A=parseInt(A,10);var w=this._readableState,$=A;if(A!==0&&(w.emittedReadable=!1),A===0&&w.needReadable&&((w.highWaterMark!==0?w.length>=w.highWaterMark:w.length>0)||w.ended))return _("read: emitReadable",w.length,w.ended),w.length===0&&w.ended?U(this):le(this),null;if(A=ee(A,w),A===0&&w.ended)return w.length===0&&U(this),null;var h=w.needReadable;_("need readable",h),(w.length===0||w.length-A<w.highWaterMark)&&(h=!0,_("length less than watermark",h)),w.ended||w.reading?(h=!1,_("reading or ended",h)):h&&(_("do read"),w.reading=!0,w.sync=!0,w.length===0&&(w.needReadable=!0),this._read(w.highWaterMark),w.sync=!1,w.reading||(A=ee($,w)));var x;return A>0?x=M(A,w):x=null,x===null?(w.needReadable=w.length<=w.highWaterMark,A=0):(w.length-=A,w.awaitDrain=0),w.length===0&&(w.ended||(w.needReadable=!0),$!==A&&w.ended&&U(this)),x!==null&&this.emit("data",x),x};function re(A,w){if(_("onEofChunk"),!w.ended){if(w.decoder){var $=w.decoder.end();$&&$.length&&(w.buffer.push($),w.length+=w.objectMode?1:$.length)}w.ended=!0,w.sync?le(A):(w.needReadable=!1,w.emittedReadable||(w.emittedReadable=!0,oe(A)))}}function le(A){var w=A._readableState;_("emitReadable",w.needReadable,w.emittedReadable),w.needReadable=!1,w.emittedReadable||(_("emitReadable",w.flowing),w.emittedReadable=!0,browser$1.nextTick(oe,A))}function oe(A){var w=A._readableState;_("emitReadable_",w.destroyed,w.length,w.ended),!w.destroyed&&(w.length||w.ended)&&(A.emit("readable"),w.emittedReadable=!1),w.needReadable=!w.flowing&&!w.ended&&w.length<=w.highWaterMark,b(A)}function se(A,w){w.readingMore||(w.readingMore=!0,browser$1.nextTick(me,A,w))}function me(A,w){for(;!w.reading&&!w.ended&&(w.length<w.highWaterMark||w.flowing&&w.length===0);){var $=w.length;if(_("maybeReadMore read 0"),A.read(0),$===w.length)break}w.readingMore=!1}C.prototype._read=function(A){o(this,new d("_read()"))},C.prototype.pipe=function(A,w){var $=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=A;break;case 1:h.pipes=[h.pipes,A];break;default:h.pipes.push(A);break}h.pipesCount+=1,_("pipe count=%d opts=%j",h.pipesCount,w);var x=(!w||w.end!==!1)&&A!==browser$1.stdout&&A!==browser$1.stderr,L=x?H:ue;h.endEmitted?browser$1.nextTick(L):$.once("end",L),A.on("unpipe",j);function j(pe,ye){_("onunpipe"),pe===$&&ye&&ye.hasUnpiped===!1&&(ye.hasUnpiped=!0,ne())}function H(){_("onend"),A.end()}var X=Ee($);A.on("drain",X);var ae=!1;function ne(){_("cleanup"),A.removeListener("close",J),A.removeListener("finish",Q),A.removeListener("drain",X),A.removeListener("error",he),A.removeListener("unpipe",j),$.removeListener("end",H),$.removeListener("end",ue),$.removeListener("data",ce),ae=!0,h.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&X()}$.on("data",ce);function ce(pe){_("ondata");var ye=A.write(pe);_("dest.write",ye),ye===!1&&((h.pipesCount===1&&h.pipes===A||h.pipesCount>1&&Z(h.pipes,A)!==-1)&&!ae&&(_("false write response, pause",h.awaitDrain),h.awaitDrain++),$.pause())}function he(pe){_("onerror",pe),ue(),A.removeListener("error",he),t(A,"error")===0&&o(A,pe)}y(A,"error",he);function J(){A.removeListener("finish",Q),ue()}A.once("close",J);function Q(){_("onfinish"),A.removeListener("close",J),ue()}A.once("finish",Q);function ue(){_("unpipe"),$.unpipe(A)}return A.emit("pipe",$),h.flowing||(_("pipe resume"),$.resume()),A};function Ee(A){return function(){var $=A._readableState;_("pipeOnDrain",$.awaitDrain),$.awaitDrain&&$.awaitDrain--,$.awaitDrain===0&&t(A,"data")&&($.flowing=!0,b(A))}}C.prototype.unpipe=function(A){var w=this._readableState,$={hasUnpiped:!1};if(w.pipesCount===0)return this;if(w.pipesCount===1)return A&&A!==w.pipes?this:(A||(A=w.pipes),w.pipes=null,w.pipesCount=0,w.flowing=!1,A&&A.emit("unpipe",this,$),this);if(!A){var h=w.pipes,x=w.pipesCount;w.pipes=null,w.pipesCount=0,w.flowing=!1;for(var L=0;L<x;L++)h[L].emit("unpipe",this,{hasUnpiped:!1});return this}var j=Z(w.pipes,A);return j===-1?this:(w.pipes.splice(j,1),w.pipesCount-=1,w.pipesCount===1&&(w.pipes=w.pipes[0]),A.emit("unpipe",this,$),this)},C.prototype.on=function(A,w){var $=n.prototype.on.call(this,A,w),h=this._readableState;return A==="data"?(h.readableListening=this.listenerCount("readable")>0,h.flowing!==!1&&this.resume()):A==="readable"&&!h.endEmitted&&!h.readableListening&&(h.readableListening=h.needReadable=!0,h.flowing=!1,h.emittedReadable=!1,_("on readable",h.length,h.reading),h.length?le(this):h.reading||browser$1.nextTick(ve,this)),$},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(A,w){var $=n.prototype.removeListener.call(this,A,w);return A==="readable"&&browser$1.nextTick(we,this),$},C.prototype.removeAllListeners=function(A){var w=n.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&browser$1.nextTick(we,this),w};function we(A){var w=A._readableState;w.readableListening=A.listenerCount("readable")>0,w.resumeScheduled&&!w.paused?w.flowing=!0:A.listenerCount("data")>0&&A.resume()}function ve(A){_("readable nexttick read 0"),A.read(0)}C.prototype.resume=function(){var A=this._readableState;return A.flowing||(_("resume"),A.flowing=!A.readableListening,K(this,A)),A.paused=!1,this};function K(A,w){w.resumeScheduled||(w.resumeScheduled=!0,browser$1.nextTick(F,A,w))}function F(A,w){_("resume",w.reading),w.reading||A.read(0),w.resumeScheduled=!1,A.emit("resume"),b(A),w.flowing&&!w.reading&&A.read(0)}C.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function b(A){var w=A._readableState;for(_("flow",w.flowing);w.flowing&&A.read()!==null;);}C.prototype.wrap=function(A){var w=this,$=this._readableState,h=!1;A.on("end",function(){if(_("wrapped end"),$.decoder&&!$.ended){var j=$.decoder.end();j&&j.length&&w.push(j)}w.push(null)}),A.on("data",function(j){if(_("wrapped data"),$.decoder&&(j=$.decoder.write(j)),!($.objectMode&&j==null)&&!(!$.objectMode&&(!j||!j.length))){var H=w.push(j);H||(h=!0,A.pause())}});for(var x in A)this[x]===void 0&&typeof A[x]=="function"&&(this[x]=function(H){return function(){return A[H].apply(A,arguments)}}(x));for(var L=0;L<v.length;L++)A.on(v[L],this.emit.bind(this,v[L]));return this._read=function(j){_("wrapped _read",j),h&&(h=!1,A.resume())},this},typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return k===void 0&&(k=requireAsync_iterator()),k(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(w){this._readableState&&(this._readableState.flowing=w)}}),C._fromList=M,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function M(A,w){if(w.length===0)return null;var $;return w.objectMode?$=w.buffer.shift():!A||A>=w.length?(w.decoder?$=w.buffer.join(""):w.buffer.length===1?$=w.buffer.first():$=w.buffer.concat(w.length),w.buffer.clear()):$=w.buffer.consume(A,w.decoder),$}function U(A){var w=A._readableState;_("endReadable",w.endEmitted),w.endEmitted||(w.ended=!0,browser$1.nextTick(z,w,A))}function z(A,w){if(_("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,w.readable=!1,w.emit("end"),A.autoDestroy)){var $=w._writableState;(!$||$.autoDestroy&&$.finished)&&w.destroy()}}typeof Symbol=="function"&&(C.from=function(A,w){return g===void 0&&(g=requireFromBrowser()),g(C,A,w)});function Z(A,w){for(var $=0,h=A.length;$<h;$++)if(A[$]===w)return $;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=m;var e=requireErrorsBrowser().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,n=e.ERR_MULTIPLE_CALLBACK,i=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=e.ERR_TRANSFORM_WITH_LENGTH_0,a=require_stream_duplex();inherits_browser.exports(m,a);function f(c,I){var D=this._transformState;D.transforming=!1;var P=D.writecb;if(P===null)return this.emit("error",new n);D.writechunk=null,D.writecb=null,I!=null&&this.push(I),P(c);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function m(c){if(!(this instanceof m))return new m(c);a.call(this,c),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",_)}function _(){var c=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(I,D){l(c,I,D)}):l(this,null,null)}m.prototype.push=function(c,I){return this._transformState.needTransform=!1,a.prototype.push.call(this,c,I)},m.prototype._transform=function(c,I,D){D(new t("_transform()"))},m.prototype._write=function(c,I,D){var P=this._transformState;if(P.writecb=D,P.writechunk=c,P.writeencoding=I,!P.transforming){var E=this._readableState;(P.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},m.prototype._read=function(c){var I=this._transformState;I.writechunk!==null&&!I.transforming?(I.transforming=!0,this._transform(I.writechunk,I.writeencoding,I.afterTransform)):I.needTransform=!0},m.prototype._destroy=function(c,I){a.prototype._destroy.call(this,c,function(D){I(D)})};function l(c,I,D){if(I)return c.emit("error",I);if(D!=null&&c.push(D),c._writableState.length)throw new s;if(c._transformState.transforming)throw new i;return c.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=t;var e=require_stream_transform();inherits_browser.exports(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,i,s){s(null,n)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var e;function t(D){var P=!1;return function(){P||(P=!0,D.apply(void 0,arguments))}}var n=requireErrorsBrowser().codes,i=n.ERR_MISSING_ARGS,s=n.ERR_STREAM_DESTROYED;function a(D){if(D)throw D}function f(D){return D.setHeader&&typeof D.abort=="function"}function m(D,P,E,T){T=t(T);var d=!1;D.on("close",function(){d=!0}),e===void 0&&(e=requireEndOfStream()),e(D,{readable:P,writable:E},function(O){if(O)return T(O);d=!0,T()});var u=!1;return function(O){if(!d&&!u){if(u=!0,f(D))return D.abort();if(typeof D.destroy=="function")return D.destroy();T(O||new s("pipe"))}}}function _(D){D()}function l(D,P){return D.pipe(P)}function c(D){return!D.length||typeof D[D.length-1]!="function"?a:D.pop()}function I(){for(var D=arguments.length,P=new Array(D),E=0;E<D;E++)P[E]=arguments[E];var T=c(P);if(Array.isArray(P[0])&&(P=P[0]),P.length<2)throw new i("streams");var d,u=P.map(function(O,k){var g=k<P.length-1,o=k>0;return m(O,g,o,function(v){d||(d=v),v&&u.forEach(_),!g&&(u.forEach(_),T(d))})});return P.reduce(l)}return pipeline_1=I,pipeline_1}var streamBrowserify=Stream,EE=events.exports.EventEmitter,inherits=inherits_browser.exports;inherits(Stream,EE);Stream.Readable=require_stream_readable();Stream.Writable=require_stream_writable();Stream.Duplex=require_stream_duplex();Stream.Transform=require_stream_transform();Stream.PassThrough=require_stream_passthrough();Stream.finished=requireEndOfStream();Stream.pipeline=requirePipeline();Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(e,t){var n=this;function i(c){e.writable&&e.write(c)===!1&&n.pause&&n.pause()}n.on("data",i);function s(){n.readable&&n.resume&&n.resume()}e.on("drain",s),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",f),n.on("close",m));var a=!1;function f(){a||(a=!0,e.end())}function m(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function _(c){if(l(),EE.listenerCount(this,"error")===0)throw c}n.on("error",_),e.on("error",_);function l(){n.removeListener("data",i),e.removeListener("drain",s),n.removeListener("end",f),n.removeListener("close",m),n.removeListener("error",_),e.removeListener("error",_),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e};const msg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function arraySet(e,t,n,i,s){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+i),s);return}for(var a=0;a<i;a++)e[s+a]=t[n+a]}var Buf8=Uint8Array,Buf16=Uint16Array,Buf32=Int32Array,Z_FIXED$2=4,Z_BINARY$1=0,Z_TEXT$1=1,Z_UNKNOWN$2=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,n,i,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=s,this.has_stree=e&&e.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,n){e.bi_valid>Buf_size-n?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=n-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function send_code(e,t,n){send_bits(e,n[t*2],n[t*2+1])}function bi_reverse(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function bi_flush(e){e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var n=t.dyn_tree,i=t.max_code,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,_=t.stat_desc.max_length,l,c,I,D,P,E,T=0;for(D=0;D<=MAX_BITS$1;D++)e.bl_count[D]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<HEAP_SIZE$1;l++)c=e.heap[l],D=n[n[c*2+1]*2+1]+1,D>_&&(D=_,T++),n[c*2+1]=D,!(c>i)&&(e.bl_count[D]++,P=0,c>=m&&(P=f[c-m]),E=n[c*2],e.opt_len+=E*(D+P),a&&(e.static_len+=E*(s[c*2+1]+P)));if(T!==0){do{for(D=_-1;e.bl_count[D]===0;)D--;e.bl_count[D]--,e.bl_count[D+1]+=2,e.bl_count[_]--,T-=2}while(T>0);for(D=_;D!==0;D--)for(c=e.bl_count[D];c!==0;)I=e.heap[--l],!(I>i)&&(n[I*2+1]!==D&&(e.opt_len+=(D-n[I*2+1])*n[I*2],n[I*2+1]=D),c--)}}function gen_codes(e,t,n){var i=new Array(MAX_BITS$1+1),s=0,a,f;for(a=1;a<=MAX_BITS$1;a++)i[a]=s=s+n[a-1]<<1;for(f=0;f<=t;f++){var m=e[f*2+1];m!==0&&(e[f*2]=bi_reverse(i[m]++,m))}}function tr_static_init(){var e,t,n,i,s,a=new Array(MAX_BITS$1+1);for(n=0,i=0;i<LENGTH_CODES$1-1;i++)for(base_length[i]=n,e=0;e<1<<extra_lbits[i];e++)_length_code[n++]=i;for(_length_code[n-1]=i,s=0,i=0;i<16;i++)for(base_dist[i]=s,e=0;e<1<<extra_dbits[i];e++)_dist_code[s++]=i;for(s>>=7;i<D_CODES$1;i++)for(base_dist[i]=s<<7,e=0;e<1<<extra_dbits[i]-7;e++)_dist_code[256+s++]=i;for(t=0;t<=MAX_BITS$1;t++)a[t]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,a[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,a[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,a[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,a[8]++;for(gen_codes(static_ltree,L_CODES$1+1,a),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[t*2]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[t*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,n,i){bi_windup(e),i&&(put_short(e,n),put_short(e,~n)),arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function smaller(e,t,n,i){var s=t*2,a=n*2;return e[s]<e[a]||e[s]===e[a]&&i[t]<=i[n]}function pqdownheap(e,t,n){for(var i=e.heap[n],s=n<<1;s<=e.heap_len&&(s<e.heap_len&&smaller(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!smaller(t,i,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=i}function compress_block(e,t,n){var i,s,a=0,f,m;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],s=e.pending_buf[e.l_buf+a],a++,i===0?send_code(e,s,t):(f=_length_code[s],send_code(e,f+LITERALS$1+1,t),m=extra_lbits[f],m!==0&&(s-=base_length[f],send_bits(e,s,m)),i--,f=d_code(i),send_code(e,f,n),m=extra_dbits[f],m!==0&&(i-=base_dist[f],send_bits(e,i,m)));while(a<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var n=t.dyn_tree,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.elems,f,m,_=-1,l;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,f=0;f<a;f++)n[f*2]!==0?(e.heap[++e.heap_len]=_=f,e.depth[f]=0):n[f*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=_<2?++_:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=i[l*2+1]);for(t.max_code=_,f=e.heap_len>>1;f>=1;f--)pqdownheap(e,n,f);l=a;do f=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),m=e.heap[1],e.heap[--e.heap_max]=f,e.heap[--e.heap_max]=m,n[l*2]=n[f*2]+n[m*2],e.depth[l]=(e.depth[f]>=e.depth[m]?e.depth[f]:e.depth[m])+1,n[f*2+1]=n[m*2+1]=l,e.heap[1]=l++,pqdownheap(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(n,_,e.bl_count)}function scan_tree(e,t,n){var i,s=-1,a,f=t[0*2+1],m=0,_=7,l=4;for(f===0&&(_=138,l=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)a=f,f=t[(i+1)*2+1],!(++m<_&&a===f)&&(m<l?e.bl_tree[a*2]+=m:a!==0?(a!==s&&e.bl_tree[a*2]++,e.bl_tree[REP_3_6*2]++):m<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,m=0,s=a,f===0?(_=138,l=3):a===f?(_=6,l=3):(_=7,l=4))}function send_tree(e,t,n){var i,s=-1,a,f=t[0*2+1],m=0,_=7,l=4;for(f===0&&(_=138,l=3),i=0;i<=n;i++)if(a=f,f=t[(i+1)*2+1],!(++m<_&&a===f)){if(m<l)do send_code(e,a,e.bl_tree);while(--m!==0);else a!==0?(a!==s&&(send_code(e,a,e.bl_tree),m--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,m-3,2)):m<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,m-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,m-11,7));m=0,s=a,f===0?(_=138,l=3):a===f?(_=6,l=3):(_=7,l=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&e.bl_tree[bl_order[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,n,i){var s;for(send_bits(e,t-257,5),send_bits(e,n-1,5),send_bits(e,i-4,4),s=0;s<i;s++)send_bits(e,e.bl_tree[bl_order[s]*2+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,n-1)}function detect_data_type(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Z_BINARY$1;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT$1;for(n=32;n<LITERALS$1;n++)if(e.dyn_ltree[n*2]!==0)return Z_TEXT$1;return Z_BINARY$1}var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,n,i){send_bits(e,(STORED_BLOCK<<1)+(i?1:0),3),copy_block(e,t,n,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,n,i){var s,a,f=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$2&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),f=build_bl_tree(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=n+5,n+4<=s&&t!==-1?_tr_stored_block(e,t,n,i):e.strategy===Z_FIXED$2||a===s?(send_bits(e,(STATIC_TREES<<1)+(i?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(i?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,f+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),i&&bi_windup(e)}function _tr_tally(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(_length_code[n]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(t)*2]++),e.last_lit===e.lit_bufsize-1}function adler32(e,t,n,i){for(var s=e&65535|0,a=e>>>16&65535|0,f=0;n!==0;){f=n>2e3?2e3:n,n-=f;do s=s+t[i++]|0,a=a+s|0;while(--f);s%=65521,a%=65521}return s|a<<16|0}function makeTable(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var crcTable=makeTable();function crc32(e,t,n,i){var s=crcTable,a=i+n;e^=-1;for(var f=i;f<a;f++)e=e>>>8^s[(e^t[f])&255];return e^-1}var Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH$1=1,Z_FULL_FLUSH$1=3,Z_FINISH$2=4,Z_BLOCK$2=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$2=-2,Z_DATA_ERROR$2=-3,Z_BUF_ERROR$2=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED$1=1,Z_HUFFMAN_ONLY$1=2,Z_RLE$1=3,Z_FIXED$1=4,Z_UNKNOWN$1=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(e,t){return e.msg=msg[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function flush_block_only(e,t){_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function read_buf(e,t,n,i){var s=e.avail_in;return s>i&&(s=i),s===0?0:(e.avail_in-=s,arraySet(t,e.input,e.next_in,s,n),e.state.wrap===1?e.adler=adler32(e.adler,t,s,n):e.state.wrap===2&&(e.adler=crc32(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)}function longest_match(e,t){var n=e.max_chain_length,i=e.strstart,s,a,f=e.prev_length,m=e.nice_match,_=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,l=e.window,c=e.w_mask,I=e.prev,D=e.strstart+MAX_MATCH,P=l[i+f-1],E=l[i+f];e.prev_length>=e.good_match&&(n>>=2),m>e.lookahead&&(m=e.lookahead);do if(s=t,!(l[s+f]!==E||l[s+f-1]!==P||l[s]!==l[i]||l[++s]!==l[i+1])){i+=2,s++;do;while(l[++i]===l[++s]&&l[++i]===l[++s]&&l[++i]===l[++s]&&l[++i]===l[++s]&&l[++i]===l[++s]&&l[++i]===l[++s]&&l[++i]===l[++s]&&l[++i]===l[++s]&&i<D);if(a=MAX_MATCH-(D-i),i=D-MAX_MATCH,a>f){if(e.match_start=t,f=a,a>=m)break;P=l[i+f-1],E=l[i+f]}}while((t=I[t&c])>_&&--n!==0);return f<=e.lookahead?f:e.lookahead}function fill_window(e){var t=e.w_size,n,i,s,a,f;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)){arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do s=e.head[--n],e.head[n]=s>=t?s-t:0;while(--i);i=t,n=i;do s=e.prev[--n],e.prev[n]=s>=t?s-t:0;while(--i);a+=t}if(e.strm.avail_in===0)break;if(i=read_buf(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=MIN_MATCH)for(f=e.strstart-e.insert,e.ins_h=e.window[f],e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[f+MIN_MATCH-1])&e.hash_mask,e.prev[f&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=f,f++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)}function deflate_stored(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),e.lookahead===0&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,flush_block_only(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(e,t){for(var n,i;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n)),e.match_length>=MIN_MATCH)if(i=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var n,i,s;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n),e.match_length<=5&&(e.strategy===Z_FILTERED$1||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-MIN_MATCH,i=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(i=_tr_tally(e,0,e.window[e.strstart-1]),i&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var n,i,s,a,f=e.window;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(s=e.strstart-1,i=f[s],i===f[++s]&&i===f[++s]&&i===f[++s])){a=e.strstart+MAX_MATCH;do;while(i===f[++s]&&i===f[++s]&&i===f[++s]&&i===f[++s]&&i===f[++s]&&i===f[++s]&&i===f[++s]&&i===f[++s]&&s<a);e.match_length=MAX_MATCH-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(n=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var n;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(t===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(e.match_length=0,n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,n,i,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=s}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(e){e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Buf16(HEAP_SIZE*2),this.dyn_dtree=new Buf16((2*D_CODES+1)*2),this.bl_tree=new Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Buf16(MAX_BITS+1),this.heap=new Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return!e||!e.state?err(e,Z_STREAM_ERROR$2):(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=t.wrap===2?0:1,t.last_flush=Z_NO_FLUSH$1,_tr_init(t),Z_OK$2)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK$2&&lm_init(e.state),t}function deflateInit2(e,t,n,i,s,a){if(!e)return Z_STREAM_ERROR$2;var f=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),i<0?(f=0,i=-i):i>15&&(f=2,i-=16),s<1||s>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||i<8||i>15||t<0||t>9||a<0||a>Z_FIXED$1)return err(e,Z_STREAM_ERROR$2);i===8&&(i=9);var m=new DeflateState;return e.state=m,m.strm=e,m.wrap=f,m.gzhead=null,m.w_bits=i,m.w_size=1<<m.w_bits,m.w_mask=m.w_size-1,m.hash_bits=s+7,m.hash_size=1<<m.hash_bits,m.hash_mask=m.hash_size-1,m.hash_shift=~~((m.hash_bits+MIN_MATCH-1)/MIN_MATCH),m.window=new Buf8(m.w_size*2),m.head=new Buf16(m.hash_size),m.prev=new Buf16(m.w_size),m.lit_bufsize=1<<s+6,m.pending_buf_size=m.lit_bufsize*4,m.pending_buf=new Buf8(m.pending_buf_size),m.d_buf=1*m.lit_bufsize,m.l_buf=(1+2)*m.lit_bufsize,m.level=t,m.strategy=a,m.method=n,deflateReset(e)}function deflate$1(e,t){var n,i,s,a;if(!e||!e.state||t>Z_BLOCK$2||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===FINISH_STATE&&t!==Z_FINISH$2)return err(e,e.avail_out===0?Z_BUF_ERROR$2:Z_STREAM_ERROR$2);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===INIT_STATE)if(i.wrap===2)e.adler=0,put_byte(i,31),put_byte(i,139),put_byte(i,8),i.gzhead?(put_byte(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),put_byte(i,i.gzhead.time&255),put_byte(i,i.gzhead.time>>8&255),put_byte(i,i.gzhead.time>>16&255),put_byte(i,i.gzhead.time>>24&255),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(put_byte(i,i.gzhead.extra.length&255),put_byte(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=crc32(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=EXTRA_STATE):(put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,OS_CODE),i.status=BUSY_STATE);else{var f=Z_DEFLATED$2+(i.w_bits-8<<4)<<8,m=-1;i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?m=0:i.level<6?m=1:i.level===6?m=2:m=3,f|=m<<6,i.strstart!==0&&(f|=PRESET_DICT),f+=31-f%31,i.status=BUSY_STATE,putShortMSB(i,f),i.strstart!==0&&(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),e.adler=1}if(i.status===EXTRA_STATE)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),flush_pending(e),s=i.pending,i.pending===i.pending_buf_size));)put_byte(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=NAME_STATE)}else i.status=NAME_STATE;if(i.status===NAME_STATE)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),flush_pending(e),s=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.name.length?a=i.gzhead.name.charCodeAt(i.gzindex++)&255:a=0,put_byte(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),a===0&&(i.gzindex=0,i.status=COMMENT_STATE)}else i.status=COMMENT_STATE;if(i.status===COMMENT_STATE)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),flush_pending(e),s=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.comment.length?a=i.gzhead.comment.charCodeAt(i.gzindex++)&255:a=0,put_byte(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>s&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-s,s)),a===0&&(i.status=HCRC_STATE)}else i.status=HCRC_STATE;if(i.status===HCRC_STATE&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&flush_pending(e),i.pending+2<=i.pending_buf_size&&(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),e.adler=0,i.status=BUSY_STATE)):i.status=BUSY_STATE),i.pending!==0){if(flush_pending(e),e.avail_out===0)return i.last_flush=-1,Z_OK$2}else if(e.avail_in===0&&rank(t)<=rank(n)&&t!==Z_FINISH$2)return err(e,Z_BUF_ERROR$2);if(i.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$2);if(e.avail_in!==0||i.lookahead!==0||t!==Z_NO_FLUSH$1&&i.status!==FINISH_STATE){var _=i.strategy===Z_HUFFMAN_ONLY$1?deflate_huff(i,t):i.strategy===Z_RLE$1?deflate_rle(i,t):configuration_table[i.level].func(i,t);if((_===BS_FINISH_STARTED||_===BS_FINISH_DONE)&&(i.status=FINISH_STATE),_===BS_NEED_MORE||_===BS_FINISH_STARTED)return e.avail_out===0&&(i.last_flush=-1),Z_OK$2;if(_===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH$1?_tr_align(i):t!==Z_BLOCK$2&&(_tr_stored_block(i,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),flush_pending(e),e.avail_out===0))return i.last_flush=-1,Z_OK$2}return t!==Z_FINISH$2?Z_OK$2:i.wrap<=0?Z_STREAM_END$2:(i.wrap===2?(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),put_byte(i,e.adler>>16&255),put_byte(i,e.adler>>24&255),put_byte(i,e.total_in&255),put_byte(i,e.total_in>>8&255),put_byte(i,e.total_in>>16&255),put_byte(i,e.total_in>>24&255)):(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),flush_pending(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(e){var t;return!e||!e.state?Z_STREAM_ERROR$2:(t=e.state.status,t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR$2):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$2))}var BAD$1=30,TYPE$1=12;function inflate_fast(e,t){var n,i,s,a,f,m,_,l,c,I,D,P,E,T,d,u,O,k,g,o,v,y,p,C,B;n=e.state,i=e.next_in,C=e.input,s=i+(e.avail_in-5),a=e.next_out,B=e.output,f=a-(t-e.avail_out),m=a+(e.avail_out-257),_=n.dmax,l=n.wsize,c=n.whave,I=n.wnext,D=n.window,P=n.hold,E=n.bits,T=n.lencode,d=n.distcode,u=(1<<n.lenbits)-1,O=(1<<n.distbits)-1;e:do{E<15&&(P+=C[i++]<<E,E+=8,P+=C[i++]<<E,E+=8),k=T[P&u];t:for(;;){if(g=k>>>24,P>>>=g,E-=g,g=k>>>16&255,g===0)B[a++]=k&65535;else if(g&16){o=k&65535,g&=15,g&&(E<g&&(P+=C[i++]<<E,E+=8),o+=P&(1<<g)-1,P>>>=g,E-=g),E<15&&(P+=C[i++]<<E,E+=8,P+=C[i++]<<E,E+=8),k=d[P&O];n:for(;;){if(g=k>>>24,P>>>=g,E-=g,g=k>>>16&255,g&16){if(v=k&65535,g&=15,E<g&&(P+=C[i++]<<E,E+=8,E<g&&(P+=C[i++]<<E,E+=8)),v+=P&(1<<g)-1,v>_){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(P>>>=g,E-=g,g=a-f,v>g){if(g=v-g,g>c&&n.sane){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(y=0,p=D,I===0){if(y+=l-g,g<o){o-=g;do B[a++]=D[y++];while(--g);y=a-v,p=B}}else if(I<g){if(y+=l+I-g,g-=I,g<o){o-=g;do B[a++]=D[y++];while(--g);if(y=0,I<o){g=I,o-=g;do B[a++]=D[y++];while(--g);y=a-v,p=B}}}else if(y+=I-g,g<o){o-=g;do B[a++]=D[y++];while(--g);y=a-v,p=B}for(;o>2;)B[a++]=p[y++],B[a++]=p[y++],B[a++]=p[y++],o-=3;o&&(B[a++]=p[y++],o>1&&(B[a++]=p[y++]))}else{y=a-v;do B[a++]=B[y++],B[a++]=B[y++],B[a++]=B[y++],o-=3;while(o>2);o&&(B[a++]=B[y++],o>1&&(B[a++]=B[y++]))}}else if((g&64)===0){k=d[(k&65535)+(P&(1<<g)-1)];continue n}else{e.msg="invalid distance code",n.mode=BAD$1;break e}break}}else if((g&64)===0){k=T[(k&65535)+(P&(1<<g)-1)];continue t}else if(g&32){n.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",n.mode=BAD$1;break e}break}}while(i<s&&a<m);o=E>>3,i-=o,E-=o<<3,P&=(1<<E)-1,e.next_in=i,e.next_out=a,e.avail_in=i<s?5+(s-i):5-(i-s),e.avail_out=a<m?257+(m-a):257-(a-m),n.hold=P,n.bits=E}var MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function inflate_table(e,t,n,i,s,a,f,m){var _=m.bits,l=0,c=0,I=0,D=0,P=0,E=0,T=0,d=0,u=0,O=0,k,g,o,v,y,p=null,C=0,B,S=new Buf16(MAXBITS+1),W=new Buf16(MAXBITS+1),V=null,Y=0,ee,re,le;for(l=0;l<=MAXBITS;l++)S[l]=0;for(c=0;c<i;c++)S[t[n+c]]++;for(P=_,D=MAXBITS;D>=1&&S[D]===0;D--);if(P>D&&(P=D),D===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,m.bits=1,0;for(I=1;I<D&&S[I]===0;I++);for(P<I&&(P=I),d=1,l=1;l<=MAXBITS;l++)if(d<<=1,d-=S[l],d<0)return-1;if(d>0&&(e===CODES$1||D!==1))return-1;for(W[1]=0,l=1;l<MAXBITS;l++)W[l+1]=W[l]+S[l];for(c=0;c<i;c++)t[n+c]!==0&&(f[W[t[n+c]]++]=c);if(e===CODES$1?(p=V=f,B=19):e===LENS$1?(p=lbase,C-=257,V=lext,Y-=257,B=256):(p=dbase,V=dext,B=-1),O=0,c=0,l=I,y=a,E=P,T=0,o=-1,u=1<<P,v=u-1,e===LENS$1&&u>ENOUGH_LENS$1||e===DISTS$1&&u>ENOUGH_DISTS$1)return 1;for(;;){ee=l-T,f[c]<B?(re=0,le=f[c]):f[c]>B?(re=V[Y+f[c]],le=p[C+f[c]]):(re=32+64,le=0),k=1<<l-T,g=1<<E,I=g;do g-=k,s[y+(O>>T)+g]=ee<<24|re<<16|le|0;while(g!==0);for(k=1<<l-1;O&k;)k>>=1;if(k!==0?(O&=k-1,O+=k):O=0,c++,--S[l]===0){if(l===D)break;l=t[n+f[c]]}if(l>P&&(O&v)!==o){for(T===0&&(T=P),y+=I,E=l-T,d=1<<E;E+T<D&&(d-=S[E+T],!(d<=0));)E++,d<<=1;if(u+=1<<E,e===LENS$1&&u>ENOUGH_LENS$1||e===DISTS$1&&u>ENOUGH_DISTS$1)return 1;o=O&v,s[o]=P<<24|E<<16|y-a|0}}return O!==0&&(s[y+O]=l-T<<24|64<<16|0),m.bits=P,0}var CODES=0,LENS=1,DISTS=2,Z_FINISH$1=4,Z_BLOCK$1=5,Z_TREES$1=6,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$1=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Buf16(320),this.work=new Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1)}function inflateReset(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e))}function inflateReset2(e,t){var n,i;return!e||!e.state||(i=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Z_STREAM_ERROR$1:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,inflateReset(e))}function inflateInit2(e,t){var n,i;return e?(i=new InflateState,e.state=i,i.window=null,n=inflateReset2(e,t),n!==Z_OK$1&&(e.state=null),n):Z_STREAM_ERROR$1}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new Buf32(512),distfix=new Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,n,i){var s,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Buf8(a.wsize)),i>=a.wsize?(arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>i&&(s=i),arraySet(a.window,t,n-i,s,a.wnext),i-=s,i?(arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}function inflate$1(e,t){var n,i,s,a,f,m,_,l,c,I,D,P,E,T,d=0,u,O,k,g,o,v,y,p,C=new Buf8(4),B,S,W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;n=e.state,n.mode===TYPE&&(n.mode=TYPEDO),f=e.next_out,s=e.output,_=e.avail_out,a=e.next_in,i=e.input,m=e.avail_in,l=n.hold,c=n.bits,I=m,D=_,p=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;c<16;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(n.wrap&2&&l===35615){n.check=0,C[0]=l&255,C[1]=l>>>8&255,n.check=crc32(n.check,C,2,0),l=0,c=0,n.mode=FLAGS;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=BAD;break}if((l&15)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(l>>>=4,c-=4,y=(l&15)+8,n.wbits===0)n.wbits=y;else if(y>n.wbits){e.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<y,e.adler=n.check=1,n.mode=l&512?DICTID:TYPE,l=0,c=0;break;case FLAGS:for(;c<16;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(n.flags=l,(n.flags&255)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&(C[0]=l&255,C[1]=l>>>8&255,n.check=crc32(n.check,C,2,0)),l=0,c=0,n.mode=TIME;case TIME:for(;c<32;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}n.head&&(n.head.time=l),n.flags&512&&(C[0]=l&255,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,n.check=crc32(n.check,C,4,0)),l=0,c=0,n.mode=OS;case OS:for(;c<16;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&(C[0]=l&255,C[1]=l>>>8&255,n.check=crc32(n.check,C,2,0)),l=0,c=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;c<16;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&(C[0]=l&255,C[1]=l>>>8&255,n.check=crc32(n.check,C,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(P=n.length,P>m&&(P=m),P&&(n.head&&(y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),arraySet(n.head.extra,i,a,P,y)),n.flags&512&&(n.check=crc32(n.check,i,P,a)),m-=P,a+=P,n.length-=P),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(m===0)break e;P=0;do y=i[a+P++],n.head&&y&&n.length<65536&&(n.head.name+=String.fromCharCode(y));while(y&&P<m);if(n.flags&512&&(n.check=crc32(n.check,i,P,a)),m-=P,a+=P,y)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(m===0)break e;P=0;do y=i[a+P++],n.head&&y&&n.length<65536&&(n.head.comment+=String.fromCharCode(y));while(y&&P<m);if(n.flags&512&&(n.check=crc32(n.check,i,P,a)),m-=P,a+=P,y)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;c<16;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=BAD;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;c<32;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}e.adler=n.check=zswap32(l),l=0,c=0,n.mode=DICT;case DICT:if(n.havedict===0)return e.next_out=f,e.avail_out=_,e.next_in=a,e.avail_in=m,n.hold=l,n.bits=c,Z_NEED_DICT$1;e.adler=n.check=1,n.mode=TYPE;case TYPE:if(t===Z_BLOCK$1||t===Z_TREES$1)break e;case TYPEDO:if(n.last){l>>>=c&7,c-=c&7,n.mode=CHECK;break}for(;c<3;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}switch(n.last=l&1,l>>>=1,c-=1,l&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,t===Z_TREES$1){l>>>=2,c-=2;break e}break;case 2:n.mode=TABLE;break;case 3:e.msg="invalid block type",n.mode=BAD}l>>>=2,c-=2;break;case STORED:for(l>>>=c&7,c-=c&7;c<32;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=l&65535,l=0,c=0,n.mode=COPY_,t===Z_TREES$1)break e;case COPY_:n.mode=COPY;case COPY:if(P=n.length,P){if(P>m&&(P=m),P>_&&(P=_),P===0)break e;arraySet(s,i,a,P,f),m-=P,a+=P,_-=P,f+=P,n.length-=P;break}n.mode=TYPE;break;case TABLE:for(;c<14;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(n.nlen=(l&31)+257,l>>>=5,c-=5,n.ndist=(l&31)+1,l>>>=5,c-=5,n.ncode=(l&15)+4,l>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;c<3;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}n.lens[W[n.have++]]=l&7,l>>>=3,c-=3}for(;n.have<19;)n.lens[W[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},p=inflate_table(CODES,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,p){e.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;d=n.lencode[l&(1<<n.lenbits)-1],u=d>>>24,O=d>>>16&255,k=d&65535,!(u<=c);){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(k<16)l>>>=u,c-=u,n.lens[n.have++]=k;else{if(k===16){for(S=u+2;c<S;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(l>>>=u,c-=u,n.have===0){e.msg="invalid bit length repeat",n.mode=BAD;break}y=n.lens[n.have-1],P=3+(l&3),l>>>=2,c-=2}else if(k===17){for(S=u+3;c<S;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}l>>>=u,c-=u,y=0,P=3+(l&7),l>>>=3,c-=3}else{for(S=u+7;c<S;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}l>>>=u,c-=u,y=0,P=11+(l&127),l>>>=7,c-=7}if(n.have+P>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=BAD;break}for(;P--;)n.lens[n.have++]=y}}if(n.mode===BAD)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,B={bits:n.lenbits},p=inflate_table(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,p){e.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},p=inflate_table(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,p){e.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,t===Z_TREES$1)break e;case LEN_:n.mode=LEN;case LEN:if(m>=6&&_>=258){e.next_out=f,e.avail_out=_,e.next_in=a,e.avail_in=m,n.hold=l,n.bits=c,inflate_fast(e,D),f=e.next_out,s=e.output,_=e.avail_out,a=e.next_in,i=e.input,m=e.avail_in,l=n.hold,c=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;d=n.lencode[l&(1<<n.lenbits)-1],u=d>>>24,O=d>>>16&255,k=d&65535,!(u<=c);){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(O&&(O&240)===0){for(g=u,o=O,v=k;d=n.lencode[v+((l&(1<<g+o)-1)>>g)],u=d>>>24,O=d>>>16&255,k=d&65535,!(g+u<=c);){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}l>>>=g,c-=g,n.back+=g}if(l>>>=u,c-=u,n.back+=u,n.length=k,O===0){n.mode=LIT;break}if(O&32){n.back=-1,n.mode=TYPE;break}if(O&64){e.msg="invalid literal/length code",n.mode=BAD;break}n.extra=O&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(S=n.extra;c<S;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;d=n.distcode[l&(1<<n.distbits)-1],u=d>>>24,O=d>>>16&255,k=d&65535,!(u<=c);){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if((O&240)===0){for(g=u,o=O,v=k;d=n.distcode[v+((l&(1<<g+o)-1)>>g)],u=d>>>24,O=d>>>16&255,k=d&65535,!(g+u<=c);){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}l>>>=g,c-=g,n.back+=g}if(l>>>=u,c-=u,n.back+=u,O&64){e.msg="invalid distance code",n.mode=BAD;break}n.offset=k,n.extra=O&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(S=n.extra;c<S;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(_===0)break e;if(P=D-_,n.offset>P){if(P=n.offset-P,P>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=BAD;break}P>n.wnext?(P-=n.wnext,E=n.wsize-P):E=n.wnext-P,P>n.length&&(P=n.length),T=n.window}else T=s,E=f-n.offset,P=n.length;P>_&&(P=_),_-=P,n.length-=P;do s[f++]=T[E++];while(--P);n.length===0&&(n.mode=LEN);break;case LIT:if(_===0)break e;s[f++]=n.length,_--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;c<32;){if(m===0)break e;m--,l|=i[a++]<<c,c+=8}if(D-=_,e.total_out+=D,n.total+=D,D&&(e.adler=n.check=n.flags?crc32(n.check,s,D,f-D):adler32(n.check,s,D,f-D)),D=_,(n.flags?l:zswap32(l))!==n.check){e.msg="incorrect data check",n.mode=BAD;break}l=0,c=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;c<32;){if(m===0)break e;m--,l+=i[a++]<<c,c+=8}if(l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=BAD;break}l=0,c=0}n.mode=DONE;case DONE:p=Z_STREAM_END$1;break e;case BAD:p=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=f,e.avail_out=_,e.next_in=a,e.avail_in=m,n.hold=l,n.bits=c,(n.wsize||D!==e.avail_out&&n.mode<BAD&&(n.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,D-e.avail_out),I-=e.avail_in,D-=e.avail_out,e.total_in+=I,e.total_out+=D,n.total+=D,n.wrap&&D&&(e.adler=n.check=n.flags?crc32(n.check,s,D,e.next_out-D):adler32(n.check,s,D,e.next_out-D)),e.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(I===0&&D===0||t===Z_FINISH$1)&&p===Z_OK$1&&(p=Z_BUF_ERROR$1),p}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1}var NONE=0,DEFLATE=1,INFLATE=2,GZIP=3,GUNZIP=4,DEFLATERAW=5,INFLATERAW=6,UNZIP=7,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_SYNC_FLUSH=2,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_ERRNO=-1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_NO_COMPRESSION=0,Z_BEST_SPEED=1,Z_BEST_COMPRESSION=9,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,Z_DEFLATED=8;function Zlib$1(e){if(e<DEFLATE||e>UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Zlib$1.prototype.init=function(e,t,n,i,s){this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=i,(this.mode===GZIP||this.mode===GUNZIP)&&(this.windowBits+=16),this.mode===UNZIP&&(this.windowBits+=32),(this.mode===DEFLATERAW||this.mode===INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new ZStream;var a;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:a=deflateInit2(this.strm,this.level,Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case INFLATE:case GUNZIP:case INFLATERAW:case UNZIP:a=inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(a!==Z_OK){this._error(a);return}this.write_in_progress=!1,this.init_done=!0};Zlib$1.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib$1.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib$1.prototype.write=function(e,t,n,i,s,a,f){this._writeCheck(),this.write_in_progress=!0;var m=this;return browser$1.nextTick(function(){m.write_in_progress=!1;var _=m._write(e,t,n,i,s,a,f);m.callback(_[0],_[1]),m.pending_close&&m.close()}),this};function bufferSet(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}Zlib$1.prototype.writeSync=function(e,t,n,i,s,a,f){return this._writeCheck(),this._write(e,t,n,i,s,a,f)};Zlib$1.prototype._write=function(e,t,n,i,s,a,f){if(this.write_in_progress=!0,e!==Z_NO_FLUSH&&e!==Z_PARTIAL_FLUSH&&e!==Z_SYNC_FLUSH&&e!==Z_FULL_FLUSH&&e!==Z_FINISH&&e!==Z_BLOCK)throw new Error("Invalid flush value");t==null&&(t=new Buffer(0),i=0,n=0),s._set?s.set=s._set:s.set=bufferSet;var m=this.strm;m.avail_in=i,m.input=t,m.next_in=n,m.avail_out=f,m.output=s,m.next_out=a;var _;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:_=deflate$1(m,e);break;case UNZIP:case INFLATE:case GUNZIP:case INFLATERAW:_=inflate$1(m,e);break;default:throw new Error("Unknown mode "+this.mode)}return _!==Z_STREAM_END&&_!==Z_OK&&this._error(_),this.write_in_progress=!1,[m.avail_in,m.avail_out]};Zlib$1.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===DEFLATE||this.mode===GZIP||this.mode===DEFLATERAW?deflateEnd(this.strm):inflateEnd(this.strm),this.mode=NONE};var status;Zlib$1.prototype.reset=function(){switch(this.mode){case DEFLATE:case DEFLATERAW:status=deflateReset(this.strm);break;case INFLATE:case INFLATERAW:status=inflateReset(this.strm);break}status!==Z_OK&&this._error(status)};Zlib$1.prototype._error=function(e){this.onerror(msg[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};const _binding=Object.freeze(Object.defineProperty({__proto__:null,NONE,DEFLATE,INFLATE,GZIP,GUNZIP,DEFLATERAW,INFLATERAW,UNZIP,Z_NO_FLUSH,Z_PARTIAL_FLUSH,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH,Z_BLOCK,Z_TREES,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_ERRNO,Z_STREAM_ERROR,Z_DATA_ERROR,Z_BUF_ERROR,Z_NO_COMPRESSION,Z_BEST_SPEED,Z_BEST_COMPRESSION,Z_DEFAULT_COMPRESSION,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY,Z_BINARY,Z_TEXT,Z_UNKNOWN,Z_DEFLATED,Zlib:Zlib$1},Symbol.toStringTag,{value:"Module"}));function assert(e,t){if(!e)throw new Error(t)}var binding={};Object.keys(_binding).forEach(function(e){binding[e]=_binding[e]});binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=1/0;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(codes).forEach(function(e){codes[codes[e]]=e});function createDeflate(e){return new Deflate(e)}function createInflate(e){return new Inflate(e)}function createDeflateRaw(e){return new DeflateRaw(e)}function createInflateRaw(e){return new InflateRaw(e)}function createGzip(e){return new Gzip(e)}function createGunzip(e){return new Gunzip(e)}function createUnzip(e){return new Unzip(e)}function deflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Deflate(t),e,n)}function deflateSync(e,t){return zlibBufferSync(new Deflate(t),e)}function gzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gzip(t),e,n)}function gzipSync(e,t){return zlibBufferSync(new Gzip(t),e)}function deflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new DeflateRaw(t),e,n)}function deflateRawSync(e,t){return zlibBufferSync(new DeflateRaw(t),e)}function unzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Unzip(t),e,n)}function unzipSync(e,t){return zlibBufferSync(new Unzip(t),e)}function inflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Inflate(t),e,n)}function inflateSync(e,t){return zlibBufferSync(new Inflate(t),e)}function gunzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gunzip(t),e,n)}function gunzipSync(e,t){return zlibBufferSync(new Gunzip(t),e)}function inflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new InflateRaw(t),e,n)}function inflateRawSync(e,t){return zlibBufferSync(new InflateRaw(t),e)}function zlibBuffer(e,t,n){var i=[],s=0;e.on("error",f),e.on("end",m),e.end(t),a();function a(){for(var _;(_=e.read())!==null;)i.push(_),s+=_.length;e.once("readable",a)}function f(_){e.removeListener("end",m),e.removeListener("readable",a),n(_)}function m(){var _=Buffer.concat(i,s);i=[],n(null,_),e.close()}}function zlibBufferSync(e,t){if(typeof t=="string"&&(t=new Buffer(t)),!Buffer.isBuffer(t))throw new TypeError("Not a string or buffer");var n=binding.Z_FINISH;return e._processChunk(t,n)}function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);Zlib.call(this,e,binding.DEFLATE)}function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);Zlib.call(this,e,binding.INFLATE)}function Gzip(e){if(!(this instanceof Gzip))return new Gzip(e);Zlib.call(this,e,binding.GZIP)}function Gunzip(e){if(!(this instanceof Gunzip))return new Gunzip(e);Zlib.call(this,e,binding.GUNZIP)}function DeflateRaw(e){if(!(this instanceof DeflateRaw))return new DeflateRaw(e);Zlib.call(this,e,binding.DEFLATERAW)}function InflateRaw(e){if(!(this instanceof InflateRaw))return new InflateRaw(e);Zlib.call(this,e,binding.INFLATERAW)}function Unzip(e){if(!(this instanceof Unzip))return new Unzip(e);Zlib.call(this,e,binding.UNZIP)}function Zlib(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||binding.Z_DEFAULT_CHUNK,streamBrowserify.Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<binding.Z_MIN_CHUNK||e.chunkSize>binding.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<binding.Z_MIN_WINDOWBITS||e.windowBits>binding.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<binding.Z_MIN_LEVEL||e.level>binding.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<binding.Z_MIN_MEMLEVEL||e.memLevel>binding.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=binding.Z_FILTERED&&e.strategy!=binding.Z_HUFFMAN_ONLY&&e.strategy!=binding.Z_RLE&&e.strategy!=binding.Z_FIXED&&e.strategy!=binding.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(a,f){n._binding=null,n._hadError=!0;var m=new Error(a);m.errno=f,m.code=binding.codes[f],n.emit("error",m)};var i=binding.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(i=e.level);var s=binding.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(s=e.strategy),this._binding.init(e.windowBits||binding.Z_DEFAULT_WINDOWBITS,i,e.memLevel||binding.Z_DEFAULT_MEMLEVEL,s,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=s,this.once("end",this.close)}inherits$2(Zlib,streamBrowserify.Transform);Zlib.prototype.params=function(e,t,n){if(e<binding.Z_MIN_LEVEL||e>binding.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=binding.Z_FILTERED&&t!=binding.Z_HUFFMAN_ONLY&&t!=binding.Z_RLE&&t!=binding.Z_FIXED&&t!=binding.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var i=this;this.flush(binding.Z_SYNC_FLUSH,function(){i._binding.params(e,t),i._hadError||(i._level=e,i._strategy=t,n&&n())})}else browser$1.nextTick(n)};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)};Zlib.prototype.flush=function(e,t){var n=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=binding.Z_FULL_FLUSH),n.ended)t&&browser$1.nextTick(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var i=this;this.once("drain",function(){i.flush(t)})}else this._flushFlag=e,this.write(new Buffer(0),"",t)};Zlib.prototype.close=function(e){if(e&&browser$1.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;browser$1.nextTick(function(){t.emit("close")})}};Zlib.prototype._transform=function(e,t,n){var i,s=this._writableState,a=s.ending||s.ended,f=a&&(!e||s.length===e.length);if(!e===null&&!Buffer.isBuffer(e))return n(new Error("invalid input"));f?i=binding.Z_FINISH:(i=this._flushFlag,e.length>=s.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),this._processChunk(e,i,n)};Zlib.prototype._processChunk=function(e,t,n){var i=e&&e.length,s=this._chunkSize-this._offset,a=0,f=this,m=typeof n=="function";if(!m){var _=[],l=0,c;this.on("error",function(T){c=T});do var I=this._binding.writeSync(t,e,a,i,this._buffer,this._offset,s);while(!this._hadError&&E(I[0],I[1]));if(this._hadError)throw c;var D=Buffer.concat(_,l);return this.close(),D}var P=this._binding.write(t,e,a,i,this._buffer,this._offset,s);P.buffer=e,P.callback=E;function E(T,d){if(!f._hadError){var u=s-d;if(assert(u>=0,"have should not go down"),u>0){var O=f._buffer.slice(f._offset,f._offset+u);f._offset+=u,m?f.push(O):(_.push(O),l+=O.length)}if((d===0||f._offset>=f._chunkSize)&&(s=f._chunkSize,f._offset=0,f._buffer=new Buffer(f._chunkSize)),d===0){if(a+=i-T,i=T,!m)return!0;var k=f._binding.write(t,e,a,i,f._buffer,f._offset,f._chunkSize);k.callback=E,k.buffer=e;return}if(!m)return!1;n()}}};inherits$2(Deflate,Zlib);inherits$2(Inflate,Zlib);inherits$2(Gzip,Zlib);inherits$2(Gunzip,Zlib);inherits$2(DeflateRaw,Zlib);inherits$2(InflateRaw,Zlib);inherits$2(Unzip,Zlib);const zlib={codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib},zlib$1=Object.freeze(Object.defineProperty({__proto__:null,codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib,default:zlib},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(zlib$1);(function(module,exports){(function(t,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var ke;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Ee,t.bytesToString=$,t.createValidAbsoluteUrl=ve,t.getModificationDate=Se,t.getVerbosityLevel=le,t.info=oe,t.isArrayBuffer=pe,t.isArrayEqual=ye,t.normalizeUnicode=Te,t.objectFromMap=j,t.objectSize=L,t.setVerbosityLevel=re,t.shadow=K,t.string32=x,t.stringToBytes=h,t.stringToPDFString=J,t.stringToUTF8String=Q,t.unreachable=me,t.utf8StringToString=ue,t.warn=se;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const s=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=s;const a=1.35;t.LINE_FACTOR=a;const f=.35;t.LINE_DESCENT_FACTOR=f;const m=f/a;t.BASELINE_FACTOR=m;const _={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=_;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=l;const c="pdfjs_internal_editor_";t.AnnotationEditorPrefix=c;const I={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=I;const D={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=D;const P={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=P;const E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=E;const T={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=T;const d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=d;const u={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=u;const O={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=O;const k={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=k;const g={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=g;const o={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=o;const v={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=v;const y={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=y;const p={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=p;const C={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=C;const B={O:"PageOpen",C:"PageClose"};t.PageActionEventType=B;const S={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=S;const W={NONE:0,BINARY:1};t.CMapCompressionType=W;const V={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=V;const Y={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=Y;let ee=S.WARNINGS;function re(ge){Number.isInteger(ge)&&(ee=ge)}function le(){return ee}function oe(ge){ee>=S.INFOS&&console.log(`Info: ${ge}`)}function se(ge){ee>=S.WARNINGS&&console.log(`Warning: ${ge}`)}function me(ge){throw new Error(ge)}function Ee(ge,q){ge||me(q)}function we(ge){switch(ge==null?void 0:ge.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ve(ge,q=null,G=null){if(!ge)return null;try{if(G&&typeof ge=="string"){if(G.addDefaultProtocol&&ge.startsWith("www.")){const be=ge.match(/\./g);(be==null?void 0:be.length)>=2&&(ge=`http://${ge}`)}if(G.tryConvertEncoding)try{ge=Q(ge)}catch{}}const fe=q?new URL(ge,q):new URL(ge);if(we(fe))return fe}catch{}return null}function K(ge,q,G,fe=!1){return Object.defineProperty(ge,q,{value:G,enumerable:!fe,configurable:!0,writable:!1}),G}const F=function(){function q(G,fe){this.constructor===q&&me("Cannot initialize BaseException."),this.message=G,this.name=fe}return q.prototype=new Error,q.constructor=q,q}();t.BaseException=F;class b extends F{constructor(q,G){super(q,"PasswordException"),this.code=G}}t.PasswordException=b;class M extends F{constructor(q,G){super(q,"UnknownErrorException"),this.details=G}}t.UnknownErrorException=M;class U extends F{constructor(q){super(q,"InvalidPDFException")}}t.InvalidPDFException=U;class z extends F{constructor(q){super(q,"MissingPDFException")}}t.MissingPDFException=z;class Z extends F{constructor(q,G){super(q,"UnexpectedResponseException"),this.status=G}}t.UnexpectedResponseException=Z;class A extends F{constructor(q){super(q,"FormatError")}}t.FormatError=A;class w extends F{constructor(q){super(q,"AbortException")}}t.AbortException=w;function $(ge){(typeof ge!="object"||(ge==null?void 0:ge.length)===void 0)&&me("Invalid argument for bytesToString");const q=ge.length,G=8192;if(q<G)return String.fromCharCode.apply(null,ge);const fe=[];for(let be=0;be<q;be+=G){const Re=Math.min(be+G,q),Pe=ge.subarray(be,Re);fe.push(String.fromCharCode.apply(null,Pe))}return fe.join("")}function h(ge){typeof ge!="string"&&me("Invalid argument for stringToBytes");const q=ge.length,G=new Uint8Array(q);for(let fe=0;fe<q;++fe)G[fe]=ge.charCodeAt(fe)&255;return G}function x(ge){return String.fromCharCode(ge>>24&255,ge>>16&255,ge>>8&255,ge&255)}function L(ge){return Object.keys(ge).length}function j(ge){const q=Object.create(null);for(const[G,fe]of ge)q[G]=fe;return q}function H(){const ge=new Uint8Array(4);return ge[0]=1,new Uint32Array(ge.buffer,0,1)[0]===1}function X(){try{return new Function(""),!0}catch{return!1}}class ae{static get isLittleEndian(){return K(this,"isLittleEndian",H())}static get isEvalSupported(){return K(this,"isEvalSupported",X())}static get isOffscreenCanvasSupported(){return K(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?K(this,"platform",{isWin:!1,isMac:!1}):K(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=ae;const ne=[...Array(256).keys()].map(ge=>ge.toString(16).padStart(2,"0"));class ce{static makeHexColor(q,G,fe){return`#${ne[q]}${ne[G]}${ne[fe]}`}static scaleMinMax(q,G){let fe;q[0]?(q[0]<0&&(fe=G[0],G[0]=G[1],G[1]=fe),G[0]*=q[0],G[1]*=q[0],q[3]<0&&(fe=G[2],G[2]=G[3],G[3]=fe),G[2]*=q[3],G[3]*=q[3]):(fe=G[0],G[0]=G[2],G[2]=fe,fe=G[1],G[1]=G[3],G[3]=fe,q[1]<0&&(fe=G[2],G[2]=G[3],G[3]=fe),G[2]*=q[1],G[3]*=q[1],q[2]<0&&(fe=G[0],G[0]=G[1],G[1]=fe),G[0]*=q[2],G[1]*=q[2]),G[0]+=q[4],G[1]+=q[4],G[2]+=q[5],G[3]+=q[5]}static transform(q,G){return[q[0]*G[0]+q[2]*G[1],q[1]*G[0]+q[3]*G[1],q[0]*G[2]+q[2]*G[3],q[1]*G[2]+q[3]*G[3],q[0]*G[4]+q[2]*G[5]+q[4],q[1]*G[4]+q[3]*G[5]+q[5]]}static applyTransform(q,G){const fe=q[0]*G[0]+q[1]*G[2]+G[4],be=q[0]*G[1]+q[1]*G[3]+G[5];return[fe,be]}static applyInverseTransform(q,G){const fe=G[0]*G[3]-G[1]*G[2],be=(q[0]*G[3]-q[1]*G[2]+G[2]*G[5]-G[4]*G[3])/fe,Re=(-q[0]*G[1]+q[1]*G[0]+G[4]*G[1]-G[5]*G[0])/fe;return[be,Re]}static getAxialAlignedBoundingBox(q,G){const fe=ce.applyTransform(q,G),be=ce.applyTransform(q.slice(2,4),G),Re=ce.applyTransform([q[0],q[3]],G),Pe=ce.applyTransform([q[2],q[1]],G);return[Math.min(fe[0],be[0],Re[0],Pe[0]),Math.min(fe[1],be[1],Re[1],Pe[1]),Math.max(fe[0],be[0],Re[0],Pe[0]),Math.max(fe[1],be[1],Re[1],Pe[1])]}static inverseTransform(q){const G=q[0]*q[3]-q[1]*q[2];return[q[3]/G,-q[1]/G,-q[2]/G,q[0]/G,(q[2]*q[5]-q[4]*q[3])/G,(q[4]*q[1]-q[5]*q[0])/G]}static singularValueDecompose2dScale(q){const G=[q[0],q[2],q[1],q[3]],fe=q[0]*G[0]+q[1]*G[2],be=q[0]*G[1]+q[1]*G[3],Re=q[2]*G[0]+q[3]*G[2],Pe=q[2]*G[1]+q[3]*G[3],De=(fe+Pe)/2,Oe=Math.sqrt((fe+Pe)**2-4*(fe*Pe-Re*be))/2,Fe=De+Oe||1,Ce=De-Oe||1;return[Math.sqrt(Fe),Math.sqrt(Ce)]}static normalizeRect(q){const G=q.slice(0);return q[0]>q[2]&&(G[0]=q[2],G[2]=q[0]),q[1]>q[3]&&(G[1]=q[3],G[3]=q[1]),G}static intersect(q,G){const fe=Math.max(Math.min(q[0],q[2]),Math.min(G[0],G[2])),be=Math.min(Math.max(q[0],q[2]),Math.max(G[0],G[2]));if(fe>be)return null;const Re=Math.max(Math.min(q[1],q[3]),Math.min(G[1],G[3])),Pe=Math.min(Math.max(q[1],q[3]),Math.max(G[1],G[3]));return Re>Pe?null:[fe,Re,be,Pe]}static bezierBoundingBox(q,G,fe,be,Re,Pe,De,Oe){const Fe=[],Ce=[[],[]];let Be,Le,Ne,Me,Ue,He,ze,We;for(let Xe=0;Xe<2;++Xe){if(Xe===0?(Le=6*q-12*fe+6*Re,Be=-3*q+9*fe-9*Re+3*De,Ne=3*fe-3*q):(Le=6*G-12*be+6*Pe,Be=-3*G+9*be-9*Pe+3*Oe,Ne=3*be-3*G),Math.abs(Be)<1e-12){if(Math.abs(Le)<1e-12)continue;Me=-Ne/Le,0<Me&&Me<1&&Fe.push(Me);continue}ze=Le*Le-4*Ne*Be,We=Math.sqrt(ze),!(ze<0)&&(Ue=(-Le+We)/(2*Be),0<Ue&&Ue<1&&Fe.push(Ue),He=(-Le-We)/(2*Be),0<He&&He<1&&Fe.push(He))}let je=Fe.length,$e;const Ge=je;for(;je--;)Me=Fe[je],$e=1-Me,Ce[0][je]=$e*$e*$e*q+3*$e*$e*Me*fe+3*$e*Me*Me*Re+Me*Me*Me*De,Ce[1][je]=$e*$e*$e*G+3*$e*$e*Me*be+3*$e*Me*Me*Pe+Me*Me*Me*Oe;return Ce[0][Ge]=q,Ce[1][Ge]=G,Ce[0][Ge+1]=De,Ce[1][Ge+1]=Oe,Ce[0].length=Ce[1].length=Ge+2,[Math.min(...Ce[0]),Math.min(...Ce[1]),Math.max(...Ce[0]),Math.max(...Ce[1])]}}t.Util=ce;const he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function J(ge){if(ge[0]>="\xEF"){let G;if(ge[0]==="\xFE"&&ge[1]==="\xFF"?G="utf-16be":ge[0]==="\xFF"&&ge[1]==="\xFE"?G="utf-16le":ge[0]==="\xEF"&&ge[1]==="\xBB"&&ge[2]==="\xBF"&&(G="utf-8"),G)try{const fe=new TextDecoder(G,{fatal:!0}),be=h(ge);return fe.decode(be)}catch(fe){se(`stringToPDFString: "${fe}".`)}}const q=[];for(let G=0,fe=ge.length;G<fe;G++){const be=he[ge.charCodeAt(G)];q.push(be?String.fromCharCode(be):ge.charAt(G))}return q.join("")}function Q(ge){return decodeURIComponent(escape(ge))}function ue(ge){return unescape(encodeURIComponent(ge))}function pe(ge){return typeof ge=="object"&&(ge==null?void 0:ge.byteLength)!==void 0}function ye(ge,q){if(ge.length!==q.length)return!1;for(let G=0,fe=ge.length;G<fe;G++)if(ge[G]!==q[G])return!1;return!0}function Se(ge=new Date){return[ge.getUTCFullYear().toString(),(ge.getUTCMonth()+1).toString().padStart(2,"0"),ge.getUTCDate().toString().padStart(2,"0"),ge.getUTCHours().toString().padStart(2,"0"),ge.getUTCMinutes().toString().padStart(2,"0"),ge.getUTCSeconds().toString().padStart(2,"0")].join("")}class xe{constructor(){ie(this,ke,!1);this.promise=new Promise((q,G)=>{this.resolve=fe=>{_e(this,ke,!0),q(fe)},this.reject=fe=>{_e(this,ke,!0),G(fe)}})}get settled(){return N(this,ke)}}ke=new WeakMap,t.PromiseCapability=xe;let te=null,Ae=null;function Te(ge){return te||(te=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ae=new Map([["\uFB05","\u017Ft"]])),ge.replaceAll(te,(q,G,fe)=>G?G.normalize("NFKC"):Ae.get(fe))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,n,i,s,Je,f,ot,_,l,c,I,D,P,E,T,pt,u,O,gt,g,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:y,NodeCMapReaderFactory:p,NodeFilterFactory:C,NodeStandardFontDataFactory:B}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=y,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=p,exports.DefaultFilterFactory=DefaultFilterFactory=C,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=B}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:y}=__w_pdfjs_require__(21);createPDFNetworkStream=p=>new y(p)}else{const{PDFNetworkStream:y}=__w_pdfjs_require__(24),{PDFFetchStream:p}=__w_pdfjs_require__(25);createPDFNetworkStream=C=>(0,_display_utils.isValidFetchUrl)(C.url)?new p(C):new y(C)}function getDocument(y){var pe,ye;if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const p=new PDFDocumentLoadingTask,{docId:C}=p,B=y.url?getUrlProp(y.url):null,S=y.data?getDataProp(y.data):null,W=y.httpHeaders||null,V=y.withCredentials===!0,Y=(pe=y.password)!=null?pe:null,ee=y.range instanceof PDFDataRangeTransport?y.range:null,re=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let le=y.worker instanceof PDFWorker?y.worker:null;const oe=y.verbosity,se=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,me=typeof y.cMapUrl=="string"?y.cMapUrl:null,Ee=y.cMapPacked!==!1,we=y.CMapReaderFactory||DefaultCMapReaderFactory,ve=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,K=y.StandardFontDataFactory||DefaultStandardFontDataFactory,F=y.stopAtErrors!==!0,b=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,M=y.isEvalSupported!==!1,U=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_is_node.isNodeJS,z=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,Z=typeof y.disableFontFace=="boolean"?y.disableFontFace:_is_node.isNodeJS,A=y.fontExtraProperties===!0,w=y.enableXfa===!0,$=y.ownerDocument||globalThis.document,h=y.disableRange===!0,x=y.disableStream===!0,L=y.disableAutoFetch===!0,j=y.pdfBug===!0,H=ee?ee.length:(ye=y.length)!=null?ye:NaN,X=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_is_node.isNodeJS&&!Z,ae=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:we===_display_utils.DOMCMapReaderFactory&&K===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(me,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(ve,document.baseURI),ne=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:$}),ce=y.filterFactory||new DefaultFilterFactory({docId:C,ownerDocument:$}),he=null;(0,_util.setVerbosityLevel)(oe);const J={canvasFactory:ne,filterFactory:ce};if(ae||(J.cMapReaderFactory=new we({baseUrl:me,isCompressed:Ee}),J.standardFontDataFactory=new K({baseUrl:ve})),!le){const Se={verbosity:oe,port:_worker_options.GlobalWorkerOptions.workerPort};le=Se.port?PDFWorker.fromPort(Se):new PDFWorker(Se),p._worker=le}const Q={docId:C,apiVersion:"3.6.172",data:S,password:Y,disableAutoFetch:L,rangeChunkSize:re,length:H,docBaseUrl:se,enableXfa:w,evaluatorOptions:{maxImageSize:b,disableFontFace:Z,ignoreErrors:F,isEvalSupported:M,isOffscreenCanvasSupported:U,canvasMaxAreaInBytes:z,fontExtraProperties:A,useSystemFonts:X,cMapUrl:ae?me:null,standardFontDataUrl:ae?ve:null}},ue={ignoreErrors:F,isEvalSupported:M,disableFontFace:Z,fontExtraProperties:A,enableXfa:w,ownerDocument:$,disableAutoFetch:L,pdfBug:j,styleElement:he};return le.promise.then(function(){if(p.destroyed)throw new Error("Loading aborted");const Se=_fetchDocument(le,Q),xe=new Promise(function(te){let Ae;ee?Ae=new _transport_stream.PDFDataTransportStream({length:H,initialData:ee.initialData,progressiveDone:ee.progressiveDone,contentDispositionFilename:ee.contentDispositionFilename,disableRange:h,disableStream:x},ee):S||(Ae=createPDFNetworkStream({url:B,length:H,httpHeaders:W,withCredentials:V,rangeChunkSize:re,disableRange:h,disableStream:x})),te(Ae)});return Promise.all([Se,xe]).then(function([te,Ae]){if(p.destroyed)throw new Error("Loading aborted");const Te=new _message_handler.MessageHandler(C,te,le.port),ke=new WorkerTransport(Te,p,Ae,ue,J);p._transport=ke,Te.send("Ready",null)})}).catch(p._capability.reject),p}async function _fetchDocument(y,p){if(y.destroyed)throw new Error("Worker was destroyed");const C=await y.messageHandler.sendWithPromise("GetDocRequest",p,p.data?[p.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return C}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_is_node.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_is_node.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(y);if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${at(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var p;this.destroyed=!0,await((p=this._transport)==null?void 0:p.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;e=new WeakMap,ie(PDFDocumentLoadingTask,e,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(p,C,B=!1,S=null){this.length=p,this.initialData=C,this.progressiveDone=B,this.contentDispositionFilename=S,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(p){this._rangeListeners.push(p)}addProgressListener(p){this._progressListeners.push(p)}addProgressiveReadListener(p){this._progressiveReadListeners.push(p)}addProgressiveDoneListener(p){this._progressiveDoneListeners.push(p)}onDataRange(p,C){for(const B of this._rangeListeners)B(p,C)}onDataProgress(p,C){this._readyCapability.promise.then(()=>{for(const B of this._progressListeners)B(p,C)})}onDataProgressiveRead(p){this._readyCapability.promise.then(()=>{for(const C of this._progressiveReadListeners)C(p)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const p of this._progressiveDoneListeners)p()})}transportReady(){this._readyCapability.resolve()}requestDataRange(p,C){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(p,C){this._pdfInfo=p,this._transport=C}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(p){return this._transport.getPage(p)}getPageIndex(p){return this._transport.getPageIndex(p)}getDestinations(){return this._transport.getDestinations()}getDestination(p){return this._transport.getDestination(p)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(p=!1){return this._transport.startCleanup(p||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(p,C,B,S=!1){ie(this,s);ie(this,f);ie(this,n,null);ie(this,i,!1);this._pageIndex=p,this._pageInfo=C,this._transport=B,this._stats=S?new _display_utils.StatTimer:null,this._pdfBug=S,this.commonObjs=B.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:p,rotation:C=this.rotate,offsetX:B=0,offsetY:S=0,dontFlip:W=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:p,rotation:C,offsetX:B,offsetY:S,dontFlip:W})}getAnnotations({intent:p="display"}={}){const C=this._transport.getRenderingIntent(p);return this._transport.getAnnotations(this._pageIndex,C.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var p;return((p=this._transport._htmlForXfa)==null?void 0:p.children[this._pageIndex])||null}render({canvasContext:p,viewport:C,intent:B="display",annotationMode:S=_util.AnnotationMode.ENABLE,transform:W=null,background:V=null,optionalContentConfigPromise:Y=null,annotationCanvasMap:ee=null,pageColors:re=null,printAnnotationStorage:le=null}){var K,F,b;if((K=arguments[0])!=null&&K.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(F=this._stats)==null||F.time("Overall");const oe=this._transport.getRenderingIntent(B,S,le);_e(this,i,!1),de(this,f,ot).call(this),Y||(Y=this._transport.getOptionalContentConfig());let se=this._intentStates.get(oe.cacheKey);se||(se=Object.create(null),this._intentStates.set(oe.cacheKey,se)),se.streamReaderCancelTimeout&&(clearTimeout(se.streamReaderCancelTimeout),se.streamReaderCancelTimeout=null);const me=!!(oe.renderingIntent&_util.RenderingIntentFlag.PRINT);se.displayReadyCapability||(se.displayReadyCapability=new _util.PromiseCapability,se.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(b=this._stats)==null||b.time("Page Request"),this._pumpOperatorList(oe));const Ee=M=>{var U,z;se.renderTasks.delete(we),(this._maybeCleanupAfterRender||me)&&_e(this,i,!0),de(this,s,Je).call(this,!me),M?(we.capability.reject(M),this._abortOperatorList({intentState:se,reason:M instanceof Error?M:new Error(M)})):we.capability.resolve(),(U=this._stats)==null||U.timeEnd("Rendering"),(z=this._stats)==null||z.timeEnd("Overall")},we=new InternalRenderTask({callback:Ee,params:{canvasContext:p,viewport:C,transform:W,background:V},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ee,operatorList:se.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!me,pdfBug:this._pdfBug,pageColors:re});(se.renderTasks||(se.renderTasks=new Set)).add(we);const ve=we.task;return Promise.all([se.displayReadyCapability.promise,Y]).then(([M,U])=>{var z;if(N(this,i)){Ee();return}(z=this._stats)==null||z.time("Rendering"),we.initializeGraphics({transparency:M,optionalContentConfig:U}),we.operatorListChanged()}).catch(Ee),ve}getOperatorList({intent:p="display",annotationMode:C=_util.AnnotationMode.ENABLE,printAnnotationStorage:B=null}={}){var ee;function S(){V.operatorList.lastChunk&&(V.opListReadCapability.resolve(V.operatorList),V.renderTasks.delete(Y))}const W=this._transport.getRenderingIntent(p,C,B,!0);let V=this._intentStates.get(W.cacheKey);V||(V=Object.create(null),this._intentStates.set(W.cacheKey,V));let Y;return V.opListReadCapability||(Y=Object.create(null),Y.operatorListChanged=S,V.opListReadCapability=new _util.PromiseCapability,(V.renderTasks||(V.renderTasks=new Set)).add(Y),V.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ee=this._stats)==null||ee.time("Page Request"),this._pumpOperatorList(W)),V.opListReadCapability.promise}streamTextContent({includeMarkedContent:p=!1,disableNormalization:C=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:p===!0,disableNormalization:C===!0},{highWaterMark:100,size(S){return S.items.length}})}getTextContent(p={}){if(this._transport._htmlForXfa)return this.getXfa().then(B=>_xfa_text.XfaText.textContent(B));const C=this.streamTextContent(p);return new Promise(function(B,S){function W(){V.read().then(function({value:ee,done:re}){if(re){B(Y);return}Object.assign(Y.styles,ee.styles),Y.items.push(...ee.items),W()},S)}const V=C.getReader(),Y={items:[],styles:Object.create(null)};W()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const p=[];for(const C of this._intentStates.values())if(this._abortOperatorList({intentState:C,reason:new Error("Page was destroyed."),force:!0}),!C.opListReadCapability)for(const B of C.renderTasks)p.push(B.completed),B.cancel();return this.objs.clear(),_e(this,i,!1),de(this,f,ot).call(this),Promise.all(p)}cleanup(p=!1){_e(this,i,!0);const C=de(this,s,Je).call(this,!1);return p&&C&&this._stats&&(this._stats=new _display_utils.StatTimer),C}_startRenderPage(p,C){var S,W;const B=this._intentStates.get(C);!B||((S=this._stats)==null||S.timeEnd("Page Request"),(W=B.displayReadyCapability)==null||W.resolve(p))}_renderPageChunk(p,C){for(let B=0,S=p.length;B<S;B++)C.operatorList.fnArray.push(p.fnArray[B]),C.operatorList.argsArray.push(p.argsArray[B]);C.operatorList.lastChunk=p.lastChunk,C.operatorList.separateAnnots=p.separateAnnots;for(const B of C.renderTasks)B.operatorListChanged();p.lastChunk&&de(this,s,Je).call(this,!0)}_pumpOperatorList({renderingIntent:p,cacheKey:C,annotationStorageMap:B}){const W=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:p,cacheKey:C,annotationStorage:B}).getReader(),V=this._intentStates.get(C);V.streamReader=W;const Y=()=>{W.read().then(({value:ee,done:re})=>{if(re){V.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ee,V),Y())},ee=>{if(V.streamReader=null,!this._transport.destroyed){if(V.operatorList){V.operatorList.lastChunk=!0;for(const re of V.renderTasks)re.operatorListChanged();de(this,s,Je).call(this,!0)}if(V.displayReadyCapability)V.displayReadyCapability.reject(ee);else if(V.opListReadCapability)V.opListReadCapability.reject(ee);else throw ee}})};Y()}_abortOperatorList({intentState:p,reason:C,force:B=!1}){if(!!p.streamReader){if(p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null),!B){if(p.renderTasks.size>0)return;if(C instanceof _display_utils.RenderingCancelledException){let S=RENDERING_CANCELLED_TIMEOUT;C.extraDelay>0&&C.extraDelay<1e3&&(S+=C.extraDelay),p.streamReaderCancelTimeout=setTimeout(()=>{p.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:p,reason:C,force:!0})},S);return}}if(p.streamReader.cancel(new _util.AbortException(C.message)).catch(()=>{}),p.streamReader=null,!this._transport.destroyed){for(const[S,W]of this._intentStates)if(W===p){this._intentStates.delete(S);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,i=new WeakMap,s=new WeakSet,Je=function(p=!1){if(de(this,f,ot).call(this),!N(this,i))return!1;if(p)return _e(this,n,setTimeout(()=>{_e(this,n,null),de(this,s,Je).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:C,operatorList:B}of this._intentStates.values())if(C.size>0||!B.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_e(this,i,!1),!0},f=new WeakSet,ot=function(){N(this,n)&&(clearTimeout(N(this,n)),_e(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ie(this,_,new Set);ie(this,l,Promise.resolve())}postMessage(p,C){const B={data:structuredClone(p,C?{transfer:C}:null)};N(this,l).then(()=>{for(const S of N(this,_))S.call(this,B)})}addEventListener(p,C){N(this,_).add(C)}removeEventListener(p,C){N(this,_).delete(C)}terminate(){N(this,_).clear()}}_=new WeakMap,l=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(c=document==null?void 0:document.currentScript)==null?void 0:c.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,p){let C;try{if(C=new URL(y),!C.origin||C.origin==="null")return!1}catch{return!1}const B=new URL(p,C);return C.origin===B.origin},PDFWorkerUtil.createCDNWrapper=function(y){const p=`importScripts("${y}");`;return URL.createObjectURL(new Blob([p]))}}const _PDFWorker=class{constructor({name:y=null,port:p=null,verbosity:C=(0,_util.getVerbosityLevel)()}={}){if(p&&N(_PDFWorker,I).has(p))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=y,this.destroyed=!1,this.verbosity=C,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,p){N(_PDFWorker,I).set(p,this),this._initializeFromPort(p);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const p=new Worker(y),C=new _message_handler.MessageHandler("main","worker",p),B=()=>{p.removeEventListener("error",S),C.destroy(),p.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},S=()=>{this._webWorker||B()};p.addEventListener("error",S),C.on("test",V=>{if(p.removeEventListener("error",S),this.destroyed){B();return}V?(this._messageHandler=C,this._port=p,this._webWorker=p,this._readyCapability.resolve(),C.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),C.destroy(),p.terminate())}),C.on("ready",V=>{if(p.removeEventListener("error",S),this.destroyed){B();return}try{W()}catch{this._setupFakeWorker()}});const W=()=>{const V=new Uint8Array;C.send("test",V,[V.buffer])};W();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const p=new LoopbackPort;this._port=p;const C=`fake${PDFWorkerUtil.fakeWorkerId++}`,B=new _message_handler.MessageHandler(C+"_worker",C,p);y.setup(B,p);const S=new _message_handler.MessageHandler(C,C+"_worker",p);this._messageHandler=S,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),N(_PDFWorker,I).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return N(this,I).has(y.port)?N(this,I).get(y.port):new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;I=new WeakMap,ie(PDFWorker,I,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(p,C,B,S,W){ie(this,T);ie(this,D,new Map);ie(this,P,new Map);ie(this,E,new Map);this.messageHandler=p,this.loadingTask=C,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:S.ownerDocument,styleElement:S.styleElement}),this._params=S,this.canvasFactory=W.canvasFactory,this.filterFactory=W.filterFactory,this.cMapReaderFactory=W.cMapReaderFactory,this.standardFontDataFactory=W.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=B,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(p,C=_util.AnnotationMode.ENABLE,B=null,S=!1){let W=_util.RenderingIntentFlag.DISPLAY,V=null;switch(p){case"any":W=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":W=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${p}`)}switch(C){case _util.AnnotationMode.DISABLE:W+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:W+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:W+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,V=(W&_util.RenderingIntentFlag.PRINT&&B instanceof _annotation_storage.PrintAnnotationStorage?B:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${C}`)}return S&&(W+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:W,cacheKey:`${W}_${_annotation_storage.AnnotationStorage.getHash(V)}`,annotationStorageMap:V}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const p=[];for(const B of N(this,P).values())p.push(B._destroy());N(this,P).clear(),N(this,E).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const C=this.messageHandler.sendWithPromise("Terminate",null);return p.push(C),Promise.all(p).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),N(this,D).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:p,loadingTask:C}=this;p.on("GetReader",(B,S)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=W=>{this._lastProgress={loaded:W.loaded,total:W.total}},S.onPull=()=>{this._fullReader.read().then(function({value:W,done:V}){if(V){S.close();return}(0,_util.assert)(W instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),S.enqueue(new Uint8Array(W),1,[W])}).catch(W=>{S.error(W)})},S.onCancel=W=>{this._fullReader.cancel(W),S.ready.catch(V=>{if(!this.destroyed)throw V})}}),p.on("ReaderHeadersReady",B=>{const S=new _util.PromiseCapability,W=this._fullReader;return W.headersReady.then(()=>{var V;(!W.isStreamingSupported||!W.isRangeSupported)&&(this._lastProgress&&((V=C.onProgress)==null||V.call(C,this._lastProgress)),W.onProgress=Y=>{var ee;(ee=C.onProgress)==null||ee.call(C,{loaded:Y.loaded,total:Y.total})}),S.resolve({isStreamingSupported:W.isStreamingSupported,isRangeSupported:W.isRangeSupported,contentLength:W.contentLength})},S.reject),S.promise}),p.on("GetRangeReader",(B,S)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const W=this._networkStream.getRangeReader(B.begin,B.end);if(!W){S.close();return}S.onPull=()=>{W.read().then(function({value:V,done:Y}){if(Y){S.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),S.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{S.error(V)})},S.onCancel=V=>{W.cancel(V),S.ready.catch(Y=>{if(!this.destroyed)throw Y})}}),p.on("GetDoc",({pdfInfo:B})=>{this._numPages=B.numPages,this._htmlForXfa=B.htmlForXfa,delete B.htmlForXfa,C._capability.resolve(new PDFDocumentProxy(B,this))}),p.on("DocException",function(B){let S;switch(B.name){case"PasswordException":S=new _util.PasswordException(B.message,B.code);break;case"InvalidPDFException":S=new _util.InvalidPDFException(B.message);break;case"MissingPDFException":S=new _util.MissingPDFException(B.message);break;case"UnexpectedResponseException":S=new _util.UnexpectedResponseException(B.message,B.status);break;case"UnknownErrorException":S=new _util.UnknownErrorException(B.message,B.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}C._capability.reject(S)}),p.on("PasswordRequest",B=>{if(this._passwordCapability=new _util.PromiseCapability,C.onPassword){const S=W=>{W instanceof Error?this._passwordCapability.reject(W):this._passwordCapability.resolve({password:W})};try{C.onPassword(S,B.code)}catch(W){this._passwordCapability.reject(W)}}else this._passwordCapability.reject(new _util.PasswordException(B.message,B.code));return this._passwordCapability.promise}),p.on("DataLoaded",B=>{var S;(S=C.onProgress)==null||S.call(C,{loaded:B.length,total:B.length}),this.downloadInfoCapability.resolve(B)}),p.on("StartRenderPage",B=>{if(this.destroyed)return;N(this,P).get(B.pageIndex)._startRenderPage(B.transparency,B.cacheKey)}),p.on("commonobj",([B,S,W])=>{var V;if(!this.destroyed&&!this.commonObjs.has(B))switch(S){case"Font":const Y=this._params;if("error"in W){const le=W.error;(0,_util.warn)(`Error during font loading: ${le}`),this.commonObjs.resolve(B,le);break}const ee=Y.pdfBug&&((V=globalThis.FontInspector)==null?void 0:V.enabled)?(le,oe)=>globalThis.FontInspector.fontAdded(le,oe):null,re=new _font_loader.FontFaceObject(W,{isEvalSupported:Y.isEvalSupported,disableFontFace:Y.disableFontFace,ignoreErrors:Y.ignoreErrors,inspectFont:ee});this.fontLoader.bind(re).catch(le=>p.sendWithPromise("FontFallback",{id:B})).finally(()=>{!Y.fontExtraProperties&&re.data&&(re.data=null),this.commonObjs.resolve(B,re)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(B,W);break;default:throw new Error(`Got unknown common object type ${S}`)}}),p.on("obj",([B,S,W,V])=>{var ee;if(this.destroyed)return;const Y=N(this,P).get(S);if(!Y.objs.has(B))switch(W){case"Image":if(Y.objs.resolve(B,V),V){let re;if(V.bitmap){const{width:le,height:oe}=V;re=le*oe*4}else re=((ee=V.data)==null?void 0:ee.length)||0;re>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Y._maybeCleanupAfterRender=!0)}break;case"Pattern":Y.objs.resolve(B,V);break;default:throw new Error(`Got unknown object type ${W}`)}}),p.on("DocProgress",B=>{var S;this.destroyed||(S=C.onProgress)==null||S.call(C,{loaded:B.loaded,total:B.total})}),p.on("FetchBuiltInCMap",B=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(B):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),p.on("FetchStandardFontData",B=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(B):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var p,C;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(C=(p=this._fullReader)==null?void 0:p.filename)!=null?C:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(p){if(!Number.isInteger(p)||p<=0||p>this._numPages)return Promise.reject(new Error("Invalid page request."));const C=p-1,B=N(this,E).get(C);if(B)return B;const S=this.messageHandler.sendWithPromise("GetPage",{pageIndex:C}).then(W=>{if(this.destroyed)throw new Error("Transport destroyed");const V=new PDFPageProxy(C,W,this,this._params.pdfBug);return N(this,P).set(C,V),V});return N(this,E).set(C,S),S}getPageIndex(p){return typeof p!="object"||p===null||!Number.isInteger(p.num)||p.num<0||!Number.isInteger(p.gen)||p.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:p.num,gen:p.gen})}getAnnotations(p,C){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:p,intent:C})}getFieldObjects(){return de(this,T,pt).call(this,"GetFieldObjects")}hasJSActions(){return de(this,T,pt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(p){return typeof p!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:p})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(p){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:p})}getStructTree(p){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:p})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(p=>new _optional_content_config.OptionalContentConfig(p))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const p="GetMetadata",C=N(this,D).get(p);if(C)return C;const B=this.messageHandler.sendWithPromise(p,null).then(S=>{var W,V,Y,ee;return{info:S[0],metadata:S[1]?new _metadata.Metadata(S[1]):null,contentDispositionFilename:(V=(W=this._fullReader)==null?void 0:W.filename)!=null?V:null,contentLength:(ee=(Y=this._fullReader)==null?void 0:Y.contentLength)!=null?ee:null}});return N(this,D).set(p,B),B}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(p=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const C of N(this,P).values())if(!C.cleanup())throw new Error(`startCleanup: Page ${C.pageNumber} is currently rendering.`);this.commonObjs.clear(),p||this.fontLoader.clear(),N(this,D).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:p,enableXfa:C}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:p,enableXfa:C})}}D=new WeakMap,P=new WeakMap,E=new WeakMap,T=new WeakSet,pt=function(p,C=null){const B=N(this,D).get(p);if(B)return B;const S=this.messageHandler.sendWithPromise(p,C);return N(this,D).set(p,S),S};class PDFObjects{constructor(){ie(this,O);ie(this,u,Object.create(null))}get(p,C=null){if(C){const S=de(this,O,gt).call(this,p);return S.capability.promise.then(()=>C(S.data)),null}const B=N(this,u)[p];if(!(B!=null&&B.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${p}.`);return B.data}has(p){const C=N(this,u)[p];return(C==null?void 0:C.capability.settled)||!1}resolve(p,C=null){const B=de(this,O,gt).call(this,p);B.data=C,B.capability.resolve()}clear(){var p;for(const C in N(this,u)){const{data:B}=N(this,u)[C];(p=B==null?void 0:B.bitmap)==null||p.close()}_e(this,u,Object.create(null))}}u=new WeakMap,O=new WeakSet,gt=function(p){const C=N(this,u)[p];return C||(N(this,u)[p]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(p){ie(this,g,null);_e(this,g,p),this.onContinue=null}get promise(){return N(this,g).capability.promise}cancel(p=0){N(this,g).cancel(null,p)}get separateAnnots(){const{separateAnnots:p}=N(this,g).operatorList;if(!p)return!1;const{annotationCanvasMap:C}=N(this,g);return p.form||p.canvas&&(C==null?void 0:C.size)>0}}g=new WeakMap,exports.RenderTask=RenderTask;const v=class{constructor({callback:p,params:C,objs:B,commonObjs:S,annotationCanvasMap:W,operatorList:V,pageIndex:Y,canvasFactory:ee,filterFactory:re,useRequestAnimationFrame:le=!1,pdfBug:oe=!1,pageColors:se=null}){this.callback=p,this.params=C,this.objs=B,this.commonObjs=S,this.annotationCanvasMap=W,this.operatorListIdx=null,this.operatorList=V,this._pageIndex=Y,this.canvasFactory=ee,this.filterFactory=re,this._pdfBug=oe,this.pageColors=se,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=le===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=C.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:p=!1,optionalContentConfig:C}){var Y,ee;if(this.cancelled)return;if(this._canvas){if(N(v,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");N(v,o).add(this._canvas)}this._pdfBug&&((Y=globalThis.StepperManager)==null?void 0:Y.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:B,viewport:S,transform:W,background:V}=this.params;this.gfx=new _canvas.CanvasGraphics(B,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:C},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:W,viewport:S,transparency:p,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,(ee=this.graphicsReadyCallback)==null||ee.call(this)}cancel(p=null,C=0){var B;this.running=!1,this.cancelled=!0,(B=this.gfx)==null||B.endDrawing(),this._canvas&&N(v,o).delete(this._canvas),this.callback(p||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",C))}operatorListChanged(){var p;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(p=this.stepper)==null||p.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&N(v,o).delete(this._canvas),this.callback())))}};let InternalRenderTask=v;o=new WeakMap,ie(InternalRenderTask,o,new WeakSet);const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,n)=>{var _,l,c,Nt,D;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=n(1),s=n(4),a=n(8);class f{constructor(){ie(this,c);ie(this,_,!1);ie(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(E,T){const d=N(this,l).get(E);return d===void 0?T:Object.assign(T,d)}getRawValue(E){return N(this,l).get(E)}remove(E){if(N(this,l).delete(E),N(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const T of N(this,l).values())if(T instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(E,T){const d=N(this,l).get(E);let u=!1;if(d!==void 0)for(const[O,k]of Object.entries(T))d[O]!==k&&(u=!0,d[O]=k);else u=!0,N(this,l).set(E,T);u&&de(this,c,Nt).call(this),T instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(T.constructor._type)}has(E){return N(this,l).has(E)}getAll(){return N(this,l).size>0?(0,i.objectFromMap)(N(this,l)):null}setAll(E){for(const[T,d]of Object.entries(E))this.setValue(T,d)}get size(){return N(this,l).size}resetModified(){N(this,_)&&(_e(this,_,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m(this)}get serializable(){if(N(this,l).size===0)return null;const E=new Map;for(const[T,d]of N(this,l)){const u=d instanceof s.AnnotationEditor?d.serialize():d;u&&E.set(T,u)}return E}static getHash(E){if(!E)return"";const T=new a.MurmurHash3_64;for(const[d,u]of E)T.update(`${d}:${JSON.stringify(u)}`);return T.hexdigest()}}_=new WeakMap,l=new WeakMap,c=new WeakSet,Nt=function(){N(this,_)||(_e(this,_,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=f;class m extends f{constructor(T){super();ie(this,D,null);_e(this,D,structuredClone(T.serializable))}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return N(this,D)}}D=new WeakMap,t.PrintAnnotationStorage=m},(e,t,n)=>{var f,m,_,l,c,I;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=n(5),s=n(1);const D=class{constructor(E){ie(this,f,this.focusin.bind(this));ie(this,m,this.focusout.bind(this));ie(this,_,!1);ie(this,l,!1);ie(this,c,!1);Ie(this,"_uiManager",null);ie(this,I,D._zIndex++);this.constructor===D&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=E.parent,this.id=E.id,this.width=this.height=null,this.pageIndex=E.parent.pageIndex,this.name=E.name,this.div=null,this._uiManager=E.uiManager;const{rotation:T,rawDims:{pageWidth:d,pageHeight:u,pageX:O,pageY:k}}=this.parent.viewport;this.rotation=T,this.pageRotation=(360+T-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,u],this.pageTranslation=[O,k];const[g,o]=this.parentDimensions;this.x=E.x/g,this.y=E.y/o,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(E){this._uiManager.addCommands(E)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=N(this,I)}setParent(E){E!==null&&(this.pageIndex=E.pageIndex,this.pageDimensions=E.pageDimensions),this.parent=E}focusin(E){N(this,_)?_e(this,_,!1):this.parent.setSelected(this)}focusout(E){var d;if(!this.isAttachedToDOM)return;const T=E.relatedTarget;T!=null&&T.closest(`#${this.id}`)||(E.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(E){const T=this.parent.div.getBoundingClientRect();this.startX=E.clientX-T.x,this.startY=E.clientY-T.y,E.dataTransfer.setData("text/plain",this.id),E.dataTransfer.effectAllowed="move"}setAt(E,T,d,u){const[O,k]=this.parentDimensions;[d,u]=this.screenToPageTranslation(d,u),this.x=(E+d)/O,this.y=(T+u)/k,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(E,T){const[d,u]=this.parentDimensions;[E,T]=this.screenToPageTranslation(E,T),this.x+=E/d,this.y+=T/u,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(E,T){switch(this.parentRotation){case 90:return[T,-E];case 180:return[-E,-T];case 270:return[-T,E];default:return[E,T]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:E}=this._uiManager.viewParameters,[T,d]=this.pageDimensions;return[T*E,d*E]}setDims(E,T){const[d,u]=this.parentDimensions;this.div.style.width=`${100*E/d}%`,this.div.style.height=`${100*T/u}%`}fixDims(){const{style:E}=this.div,{height:T,width:d}=E,u=d.endsWith("%"),O=T.endsWith("%");if(u&&O)return;const[k,g]=this.parentDimensions;u||(E.width=`${100*parseFloat(d)/k}%`),O||(E.height=`${100*parseFloat(T)/g}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",N(this,f)),this.div.addEventListener("focusout",N(this,m));const[E,T]=this.getInitialTranslation();return this.translate(E,T),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(E){const{isMac:T}=s.FeatureTest.platform;if(E.button!==0||E.ctrlKey&&T){E.preventDefault();return}E.ctrlKey&&!T||E.shiftKey||E.metaKey&&T?this.parent.toggleSelected(this):this.parent.setSelected(this),_e(this,_,!0)}getRect(E,T){const d=this.parentScale,[u,O]=this.pageDimensions,[k,g]=this.pageTranslation,o=E/d,v=T/d,y=this.x*u,p=this.y*O,C=this.width*u,B=this.height*O;switch(this.rotation){case 0:return[y+o+k,O-p-v-B+g,y+o+C+k,O-p-v+g];case 90:return[y+v+k,O-p+o+g,y+v+B+k,O-p+o+C+g];case 180:return[y-o-C+k,O-p+v+g,y-o+k,O-p+v+B+g];case 270:return[y-v-B+k,O-p-o-C+g,y-v+k,O-p-o+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(E,T){const[d,u,O,k]=E,g=O-d,o=k-u;switch(this.rotation){case 0:return[d,T-k,g,o];case 90:return[d,T-u,o,g];case 180:return[O,T-u,g,o];case 270:return[O,T-k,o,g];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_e(this,c,!0)}disableEditMode(){_e(this,c,!1)}isInEditMode(){return N(this,c)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var E;(E=this.div)==null||E.addEventListener("focusin",N(this,f))}serialize(){(0,s.unreachable)("An editor must be serializable")}static deserialize(E,T,d){const u=new this.prototype.constructor({parent:T,id:T.getNextId(),uiManager:d});u.rotation=E.rotation;const[O,k]=u.pageDimensions,[g,o,v,y]=u.getRectInCurrentCoords(E.rect,k);return u.x=g/O,u.y=o/k,u.width=v/O,u.height=y/k,u}remove(){this.div.removeEventListener("focusin",N(this,f)),this.div.removeEventListener("focusout",N(this,m)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var E;(E=this.div)==null||E.classList.add("selectedEditor")}unselect(){var E;(E=this.div)==null||E.classList.remove("selectedEditor")}updateParams(E,T){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return N(this,l)}set isEditing(E){_e(this,l,E),E?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let a=D;f=new WeakMap,m=new WeakMap,_=new WeakMap,l=new WeakMap,c=new WeakMap,I=new WeakMap,Ie(a,"_colorManager",new i.ColorManager),Ie(a,"_zIndex",1),t.AnnotationEditor=a},(e,t,n)=>{var D,P,E,T,d,u,Bt,g,o,v,y,p,C,B,S,W,V,Y,ee,re,le,oe,se,me,Ee,we,ve,K,F,b,M,jt,z,mt,A,$t,$,Ut,x,qe,j,nt,X,Ht,ne,zt,he,bt,Q,rt,pe,vt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=a,t.opacityToHex=f;var i=n(1),s=n(6);function a(xe,te,Ae){for(const Te of Ae)te.addEventListener(Te,xe[Te].bind(xe))}function f(xe){return Math.round(Math.min(255,Math.max(1,255*xe))).toString(16).padStart(2,"0")}class m{constructor(){ie(this,D,0)}getId(){return`${i.AnnotationEditorPrefix}${at(this,D)._++}`}}D=new WeakMap;class _{constructor(te=128){ie(this,P,[]);ie(this,E,!1);ie(this,T,void 0);ie(this,d,-1);_e(this,T,te)}add({cmd:te,undo:Ae,mustExec:Te,type:ke=NaN,overwriteIfSameType:ge=!1,keepUndo:q=!1}){if(Te&&te(),N(this,E))return;const G={cmd:te,undo:Ae,type:ke};if(N(this,d)===-1){N(this,P).length>0&&(N(this,P).length=0),_e(this,d,0),N(this,P).push(G);return}if(ge&&N(this,P)[N(this,d)].type===ke){q&&(G.undo=N(this,P)[N(this,d)].undo),N(this,P)[N(this,d)]=G;return}const fe=N(this,d)+1;fe===N(this,T)?N(this,P).splice(0,1):(_e(this,d,fe),fe<N(this,P).length&&N(this,P).splice(fe)),N(this,P).push(G)}undo(){N(this,d)!==-1&&(_e(this,E,!0),N(this,P)[N(this,d)].undo(),_e(this,E,!1),_e(this,d,N(this,d)-1))}redo(){N(this,d)<N(this,P).length-1&&(_e(this,d,N(this,d)+1),_e(this,E,!0),N(this,P)[N(this,d)].cmd(),_e(this,E,!1))}hasSomethingToUndo(){return N(this,d)!==-1}hasSomethingToRedo(){return N(this,d)<N(this,P).length-1}destroy(){_e(this,P,null)}}P=new WeakMap,E=new WeakMap,T=new WeakMap,d=new WeakMap,t.CommandManager=_;class l{constructor(te){ie(this,u);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Ae}=i.FeatureTest.platform;for(const[Te,ke]of te)for(const ge of Te){const q=ge.startsWith("mac+");Ae&&q?(this.callbacks.set(ge.slice(4),ke),this.allKeys.add(ge.split("+").at(-1))):!Ae&&!q&&(this.callbacks.set(ge,ke),this.allKeys.add(ge.split("+").at(-1)))}}exec(te,Ae){if(!this.allKeys.has(Ae.key))return;const Te=this.callbacks.get(de(this,u,Bt).call(this,Ae));!Te||(Te.bind(te)(),Ae.stopPropagation(),Ae.preventDefault())}}u=new WeakSet,Bt=function(te){te.altKey&&this.buffer.push("alt"),te.ctrlKey&&this.buffer.push("ctrl"),te.metaKey&&this.buffer.push("meta"),te.shiftKey&&this.buffer.push("shift"),this.buffer.push(te.key);const Ae=this.buffer.join("+");return this.buffer.length=0,Ae},t.KeyboardManager=l;const k=class{get _colors(){const te=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(te),(0,i.shadow)(this,"_colors",te)}convert(te){const Ae=(0,s.getRGB)(te);if(!window.matchMedia("(forced-colors: active)").matches)return Ae;for(const[Te,ke]of this._colors)if(ke.every((ge,q)=>ge===Ae[q]))return k._colorsMapping.get(Te);return Ae}getHexCode(te){const Ae=this._colors.get(te);return Ae?i.Util.makeHexColor(...Ae):te}};let c=k;Ie(c,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=c;const Se=class{constructor(te,Ae,Te){ie(this,M);ie(this,z);ie(this,A);ie(this,$);ie(this,x);ie(this,j);ie(this,X);ie(this,ne);ie(this,he);ie(this,Q);ie(this,pe);ie(this,g,null);ie(this,o,new Map);ie(this,v,new Map);ie(this,y,null);ie(this,p,new _);ie(this,C,0);ie(this,B,null);ie(this,S,new Set);ie(this,W,null);ie(this,V,new m);ie(this,Y,!1);ie(this,ee,i.AnnotationEditorType.NONE);ie(this,re,new Set);ie(this,le,this.copy.bind(this));ie(this,oe,this.cut.bind(this));ie(this,se,this.paste.bind(this));ie(this,me,this.keydown.bind(this));ie(this,Ee,this.onEditingAction.bind(this));ie(this,we,this.onPageChanging.bind(this));ie(this,ve,this.onScaleChanging.bind(this));ie(this,K,this.onRotationChanging.bind(this));ie(this,F,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ie(this,b,null);_e(this,b,te),_e(this,W,Ae),N(this,W)._on("editingaction",N(this,Ee)),N(this,W)._on("pagechanging",N(this,we)),N(this,W)._on("scalechanging",N(this,ve)),N(this,W)._on("rotationchanging",N(this,K)),_e(this,y,Te),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){de(this,z,mt).call(this),N(this,W)._off("editingaction",N(this,Ee)),N(this,W)._off("pagechanging",N(this,we)),N(this,W)._off("scalechanging",N(this,ve)),N(this,W)._off("rotationchanging",N(this,K));for(const te of N(this,v).values())te.destroy();N(this,v).clear(),N(this,o).clear(),N(this,S).clear(),_e(this,g,null),N(this,re).clear(),N(this,p).destroy()}onPageChanging({pageNumber:te}){_e(this,C,te-1)}focusMainContainer(){N(this,b).focus()}addShouldRescale(te){N(this,S).add(te)}removeShouldRescale(te){N(this,S).delete(te)}onScaleChanging({scale:te}){this.commitOrRemove(),this.viewParameters.realScale=te*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Ae of N(this,S))Ae.onScaleChanging()}onRotationChanging({pagesRotation:te}){this.commitOrRemove(),this.viewParameters.rotation=te}addToAnnotationStorage(te){!te.isEmpty()&&N(this,y)&&!N(this,y).has(te.id)&&N(this,y).setValue(te.id,te)}copy(te){if(te.preventDefault(),N(this,g)&&N(this,g).commitOrRemove(),!this.hasSelection)return;const Ae=[];for(const Te of N(this,re))Te.isEmpty()||Ae.push(Te.serialize());Ae.length!==0&&te.clipboardData.setData("application/pdfjs",JSON.stringify(Ae))}cut(te){this.copy(te),this.delete()}paste(te){te.preventDefault();let Ae=te.clipboardData.getData("application/pdfjs");if(!Ae)return;try{Ae=JSON.parse(Ae)}catch(ke){(0,i.warn)(`paste: "${ke.message}".`);return}if(!Array.isArray(Ae))return;this.unselectAll();const Te=N(this,v).get(N(this,C));try{const ke=[];for(const G of Ae){const fe=Te.deserialize(G);if(!fe)return;ke.push(fe)}const ge=()=>{for(const G of ke)de(this,he,bt).call(this,G);de(this,pe,vt).call(this,ke)},q=()=>{for(const G of ke)G.remove()};this.addCommands({cmd:ge,undo:q,mustExec:!0})}catch(ke){(0,i.warn)(`paste: "${ke.message}".`)}}keydown(te){var Ae;(Ae=this.getActive())!=null&&Ae.shouldGetKeyboardEvents()||Se._keyboardManager.exec(this,te)}onEditingAction(te){["undo","redo","delete","selectAll"].includes(te.name)&&this[te.name]()}setEditingState(te){te?(de(this,M,jt).call(this),de(this,A,$t).call(this),de(this,x,qe).call(this,{isEditing:N(this,ee)!==i.AnnotationEditorType.NONE,isEmpty:de(this,Q,rt).call(this),hasSomethingToUndo:N(this,p).hasSomethingToUndo(),hasSomethingToRedo:N(this,p).hasSomethingToRedo(),hasSelectedEditor:!1})):(de(this,z,mt).call(this),de(this,$,Ut).call(this),de(this,x,qe).call(this,{isEditing:!1}))}registerEditorTypes(te){if(!N(this,B)){_e(this,B,te);for(const Ae of N(this,B))de(this,j,nt).call(this,Ae.defaultPropertiesToUpdate)}}getId(){return N(this,V).getId()}get currentLayer(){return N(this,v).get(N(this,C))}get currentPageIndex(){return N(this,C)}addLayer(te){N(this,v).set(te.pageIndex,te),N(this,Y)?te.enable():te.disable()}removeLayer(te){N(this,v).delete(te.pageIndex)}updateMode(te){if(_e(this,ee,te),te===i.AnnotationEditorType.NONE)this.setEditingState(!1),de(this,ne,zt).call(this);else{this.setEditingState(!0),de(this,X,Ht).call(this);for(const Ae of N(this,v).values())Ae.updateMode(te)}}updateToolbar(te){te!==N(this,ee)&&N(this,W).dispatch("switchannotationeditormode",{source:this,mode:te})}updateParams(te,Ae){if(!!N(this,B)){for(const Te of N(this,re))Te.updateParams(te,Ae);for(const Te of N(this,B))Te.updateDefaultParams(te,Ae)}}getEditors(te){const Ae=[];for(const Te of N(this,o).values())Te.pageIndex===te&&Ae.push(Te);return Ae}getEditor(te){return N(this,o).get(te)}addEditor(te){N(this,o).set(te.id,te)}removeEditor(te){var Ae;N(this,o).delete(te.id),this.unselect(te),(Ae=N(this,y))==null||Ae.remove(te.id)}setActiveEditor(te){N(this,g)!==te&&(_e(this,g,te),te&&de(this,j,nt).call(this,te.propertiesToUpdate))}toggleSelected(te){if(N(this,re).has(te)){N(this,re).delete(te),te.unselect(),de(this,x,qe).call(this,{hasSelectedEditor:this.hasSelection});return}N(this,re).add(te),te.select(),de(this,j,nt).call(this,te.propertiesToUpdate),de(this,x,qe).call(this,{hasSelectedEditor:!0})}setSelected(te){for(const Ae of N(this,re))Ae!==te&&Ae.unselect();N(this,re).clear(),N(this,re).add(te),te.select(),de(this,j,nt).call(this,te.propertiesToUpdate),de(this,x,qe).call(this,{hasSelectedEditor:!0})}isSelected(te){return N(this,re).has(te)}unselect(te){te.unselect(),N(this,re).delete(te),de(this,x,qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return N(this,re).size!==0}undo(){N(this,p).undo(),de(this,x,qe).call(this,{hasSomethingToUndo:N(this,p).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:de(this,Q,rt).call(this)})}redo(){N(this,p).redo(),de(this,x,qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:N(this,p).hasSomethingToRedo(),isEmpty:de(this,Q,rt).call(this)})}addCommands(te){N(this,p).add(te),de(this,x,qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:de(this,Q,rt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const te=[...N(this,re)],Ae=()=>{for(const ke of te)ke.remove()},Te=()=>{for(const ke of te)de(this,he,bt).call(this,ke)};this.addCommands({cmd:Ae,undo:Te,mustExec:!0})}commitOrRemove(){var te;(te=N(this,g))==null||te.commitOrRemove()}selectAll(){for(const te of N(this,re))te.commit();de(this,pe,vt).call(this,N(this,o).values())}unselectAll(){if(N(this,g)){N(this,g).commitOrRemove();return}if(N(this,re).size!==0){for(const te of N(this,re))te.unselect();N(this,re).clear(),de(this,x,qe).call(this,{hasSelectedEditor:!1})}}isActive(te){return N(this,g)===te}getActive(){return N(this,g)}getMode(){return N(this,ee)}};let I=Se;g=new WeakMap,o=new WeakMap,v=new WeakMap,y=new WeakMap,p=new WeakMap,C=new WeakMap,B=new WeakMap,S=new WeakMap,W=new WeakMap,V=new WeakMap,Y=new WeakMap,ee=new WeakMap,re=new WeakMap,le=new WeakMap,oe=new WeakMap,se=new WeakMap,me=new WeakMap,Ee=new WeakMap,we=new WeakMap,ve=new WeakMap,K=new WeakMap,F=new WeakMap,b=new WeakMap,M=new WeakSet,jt=function(){N(this,b).addEventListener("keydown",N(this,me))},z=new WeakSet,mt=function(){N(this,b).removeEventListener("keydown",N(this,me))},A=new WeakSet,$t=function(){document.addEventListener("copy",N(this,le)),document.addEventListener("cut",N(this,oe)),document.addEventListener("paste",N(this,se))},$=new WeakSet,Ut=function(){document.removeEventListener("copy",N(this,le)),document.removeEventListener("cut",N(this,oe)),document.removeEventListener("paste",N(this,se))},x=new WeakSet,qe=function(te){Object.entries(te).some(([Te,ke])=>N(this,F)[Te]!==ke)&&N(this,W).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(N(this,F),te)})},j=new WeakSet,nt=function(te){N(this,W).dispatch("annotationeditorparamschanged",{source:this,details:te})},X=new WeakSet,Ht=function(){if(!N(this,Y)){_e(this,Y,!0);for(const te of N(this,v).values())te.enable()}},ne=new WeakSet,zt=function(){if(this.unselectAll(),N(this,Y)){_e(this,Y,!1);for(const te of N(this,v).values())te.disable()}},he=new WeakSet,bt=function(te){const Ae=N(this,v).get(te.pageIndex);Ae?Ae.addOrRebuild(te):this.addEditor(te)},Q=new WeakSet,rt=function(){if(N(this,o).size===0)return!0;if(N(this,o).size===1)for(const te of N(this,o).values())return te.isEmpty();return!1},pe=new WeakSet,vt=function(te){N(this,re).clear();for(const Ae of te)Ae.isEmpty()||(N(this,re).add(Ae),Ae.select());de(this,x,qe).call(this,{hasSelectedEditor:!0})},Ie(I,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],Se.prototype.selectAll],[["ctrl+z","mac+meta+z"],Se.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Se.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Se.prototype.delete],[["Escape","mac+Escape"],Se.prototype.unselectAll]])),t.AnnotationEditorUIManager=I},(e,t,n)=>{var le,oe,se,me,Ee,we,ve,K,F,Qe,M,Ke,z,Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=y,t.getColorValues=W,t.getCurrentTransform=V,t.getCurrentTransformInverse=Y,t.getFilenameFromUrl=O,t.getPdfFilenameFromUrl=k,t.getRGB=S,t.getXfaPageViewport=B,t.isDataScheme=d,t.isPdfFile=u,t.isValidFetchUrl=o,t.loadScript=v,t.setLayerDimensions=ee;var i=n(7),s=n(1);const a="http://www.w3.org/2000/svg",f="pdfjs_internal_id_";t.AnnotationPrefix=f;const re=class{};let m=re;Ie(m,"CSS",96),Ie(m,"PDF",72),Ie(m,"PDF_TO_CSS_UNITS",re.CSS/re.PDF),t.PixelsPerInch=m;class _ extends i.BaseFilterFactory{constructor({docId:$,ownerDocument:h=globalThis.document}={}){super();ie(this,F);ie(this,M);ie(this,z);ie(this,le,void 0);ie(this,oe,void 0);ie(this,se,void 0);ie(this,me,void 0);ie(this,Ee,void 0);ie(this,we,void 0);ie(this,ve,void 0);ie(this,K,0);_e(this,se,$),_e(this,me,h)}addFilter($){if(!$)return"none";let h=N(this,F,Qe).get($);if(h)return h;let x,L,j,H;if($.length===1){const he=$[0],J=new Array(256);for(let Q=0;Q<256;Q++)J[Q]=he[Q]/255;H=x=L=j=J.join(",")}else{const[he,J,Q]=$,ue=new Array(256),pe=new Array(256),ye=new Array(256);for(let Se=0;Se<256;Se++)ue[Se]=he[Se]/255,pe[Se]=J[Se]/255,ye[Se]=Q[Se]/255;x=ue.join(","),L=pe.join(","),j=ye.join(","),H=`${x}${L}${j}`}if(h=N(this,F,Qe).get(H),h)return N(this,F,Qe).set($,h),h;const X=`g_${N(this,se)}_transfer_map_${at(this,K)._++}`,ae=`url(#${X})`;N(this,F,Qe).set($,ae),N(this,F,Qe).set(H,ae);const ne=N(this,me).createElementNS(a,"filter",a);ne.setAttribute("id",X),ne.setAttribute("color-interpolation-filters","sRGB");const ce=N(this,me).createElementNS(a,"feComponentTransfer");return ne.append(ce),de(this,z,Ze).call(this,ce,"feFuncR",x),de(this,z,Ze).call(this,ce,"feFuncG",L),de(this,z,Ze).call(this,ce,"feFuncB",j),N(this,M,Ke).append(ne),ae}addHCMFilter($,h){var Q;const x=`${$}-${h}`;if(N(this,we)===x)return N(this,ve);if(_e(this,we,x),_e(this,ve,"none"),(Q=N(this,Ee))==null||Q.remove(),!$||!h)return N(this,ve);N(this,M,Ke).style.color=$,$=getComputedStyle(N(this,M,Ke)).getPropertyValue("color");const L=S($);$=s.Util.makeHexColor(...L),N(this,M,Ke).style.color=h,h=getComputedStyle(N(this,M,Ke)).getPropertyValue("color");const j=S(h);if(h=s.Util.makeHexColor(...j),N(this,M,Ke).style.color="",$==="#000000"&&h==="#ffffff"||$===h)return N(this,ve);const H=new Array(256);for(let ue=0;ue<=255;ue++){const pe=ue/255;H[ue]=pe<=.03928?pe/12.92:((pe+.055)/1.055)**2.4}const X=H.join(","),ae=`g_${N(this,se)}_hcm_filter`,ne=_e(this,Ee,N(this,me).createElementNS(a,"filter",a));ne.setAttribute("id",ae),ne.setAttribute("color-interpolation-filters","sRGB");let ce=N(this,me).createElementNS(a,"feComponentTransfer");ne.append(ce),de(this,z,Ze).call(this,ce,"feFuncR",X),de(this,z,Ze).call(this,ce,"feFuncG",X),de(this,z,Ze).call(this,ce,"feFuncB",X);const he=N(this,me).createElementNS(a,"feColorMatrix");he.setAttribute("type","matrix"),he.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ne.append(he),ce=N(this,me).createElementNS(a,"feComponentTransfer"),ne.append(ce);const J=(ue,pe)=>{const ye=L[ue]/255,Se=j[ue]/255,xe=new Array(pe+1);for(let te=0;te<=pe;te++)xe[te]=ye+te/pe*(Se-ye);return xe.join(",")};return de(this,z,Ze).call(this,ce,"feFuncR",J(0,5)),de(this,z,Ze).call(this,ce,"feFuncG",J(1,5)),de(this,z,Ze).call(this,ce,"feFuncB",J(2,5)),N(this,M,Ke).append(ne),_e(this,ve,`url(#${ae})`),N(this,ve)}destroy($=!1){$&&N(this,ve)||(N(this,oe)&&(N(this,oe).parentNode.parentNode.remove(),_e(this,oe,null)),N(this,le)&&(N(this,le).clear(),_e(this,le,null)),_e(this,K,0))}}le=new WeakMap,oe=new WeakMap,se=new WeakMap,me=new WeakMap,Ee=new WeakMap,we=new WeakMap,ve=new WeakMap,K=new WeakMap,F=new WeakSet,Qe=function(){return N(this,le)||_e(this,le,new Map)},M=new WeakSet,Ke=function(){if(!N(this,oe)){const $=N(this,me).createElement("div"),{style:h}=$;h.visibility="hidden",h.contain="strict",h.width=h.height=0,h.position="absolute",h.top=h.left=0,h.zIndex=-1;const x=N(this,me).createElementNS(a,"svg");x.setAttribute("width",0),x.setAttribute("height",0),_e(this,oe,N(this,me).createElementNS(a,"defs")),$.append(x),x.append(N(this,oe)),N(this,me).body.append($)}return N(this,oe)},z=new WeakSet,Ze=function($,h,x){const L=N(this,me).createElementNS(a,h);L.setAttribute("type","discrete"),L.setAttribute("tableValues",x),$.append(L)},t.DOMFilterFactory=_;class l extends i.BaseCanvasFactory{constructor({ownerDocument:w=globalThis.document}={}){super(),this._document=w}_createCanvas(w,$){const h=this._document.createElement("canvas");return h.width=w,h.height=$,h}}t.DOMCanvasFactory=l;async function c(A,w=!1){if(o(A,document.baseURI)){const $=await fetch(A);if(!$.ok)throw new Error($.statusText);return w?new Uint8Array(await $.arrayBuffer()):(0,s.stringToBytes)(await $.text())}return new Promise(($,h)=>{const x=new XMLHttpRequest;x.open("GET",A,!0),w&&(x.responseType="arraybuffer"),x.onreadystatechange=()=>{if(x.readyState===XMLHttpRequest.DONE){if(x.status===200||x.status===0){let L;if(w&&x.response?L=new Uint8Array(x.response):!w&&x.responseText&&(L=(0,s.stringToBytes)(x.responseText)),L){$(L);return}}h(new Error(x.statusText))}},x.send(null)})}class I extends i.BaseCMapReaderFactory{_fetchData(w,$){return c(w,this.isCompressed).then(h=>({cMapData:h,compressionType:$}))}}t.DOMCMapReaderFactory=I;class D extends i.BaseStandardFontDataFactory{_fetchData(w){return c(w,!0)}}t.DOMStandardFontDataFactory=D;class P extends i.BaseSVGFactory{_createSVG(w){return document.createElementNS(a,w)}}t.DOMSVGFactory=P;class E{constructor({viewBox:w,scale:$,rotation:h,offsetX:x=0,offsetY:L=0,dontFlip:j=!1}){this.viewBox=w,this.scale=$,this.rotation=h,this.offsetX=x,this.offsetY=L;const H=(w[2]+w[0])/2,X=(w[3]+w[1])/2;let ae,ne,ce,he;switch(h%=360,h<0&&(h+=360),h){case 180:ae=-1,ne=0,ce=0,he=1;break;case 90:ae=0,ne=1,ce=1,he=0;break;case 270:ae=0,ne=-1,ce=-1,he=0;break;case 0:ae=1,ne=0,ce=0,he=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}j&&(ce=-ce,he=-he);let J,Q,ue,pe;ae===0?(J=Math.abs(X-w[1])*$+x,Q=Math.abs(H-w[0])*$+L,ue=(w[3]-w[1])*$,pe=(w[2]-w[0])*$):(J=Math.abs(H-w[0])*$+x,Q=Math.abs(X-w[1])*$+L,ue=(w[2]-w[0])*$,pe=(w[3]-w[1])*$),this.transform=[ae*$,ne*$,ce*$,he*$,J-ae*$*H-ce*$*X,Q-ne*$*H-he*$*X],this.width=ue,this.height=pe}get rawDims(){const{viewBox:w}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:w[2]-w[0],pageHeight:w[3]-w[1],pageX:w[0],pageY:w[1]})}clone({scale:w=this.scale,rotation:$=this.rotation,offsetX:h=this.offsetX,offsetY:x=this.offsetY,dontFlip:L=!1}={}){return new E({viewBox:this.viewBox.slice(),scale:w,rotation:$,offsetX:h,offsetY:x,dontFlip:L})}convertToViewportPoint(w,$){return s.Util.applyTransform([w,$],this.transform)}convertToViewportRectangle(w){const $=s.Util.applyTransform([w[0],w[1]],this.transform),h=s.Util.applyTransform([w[2],w[3]],this.transform);return[$[0],$[1],h[0],h[1]]}convertToPdfPoint(w,$){return s.Util.applyInverseTransform([w,$],this.transform)}}t.PageViewport=E;class T extends s.BaseException{constructor(w,$,h=0){super(w,"RenderingCancelledException"),this.type=$,this.extraDelay=h}}t.RenderingCancelledException=T;function d(A){const w=A.length;let $=0;for(;$<w&&A[$].trim()==="";)$++;return A.substring($,$+5).toLowerCase()==="data:"}function u(A){return typeof A=="string"&&/\.pdf$/i.test(A)}function O(A,w=!1){return w||([A]=A.split(/[#?]/,1)),A.substring(A.lastIndexOf("/")+1)}function k(A,w="document.pdf"){if(typeof A!="string")return w;if(d(A))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),w;const $=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,x=$.exec(A);let L=h.exec(x[1])||h.exec(x[2])||h.exec(x[3]);if(L&&(L=L[0],L.includes("%")))try{L=h.exec(decodeURIComponent(L))[0]}catch{}return L||w}class g{constructor(){Ie(this,"started",Object.create(null));Ie(this,"times",[])}time(w){w in this.started&&(0,s.warn)(`Timer is already running for ${w}`),this.started[w]=Date.now()}timeEnd(w){w in this.started||(0,s.warn)(`Timer has not been started for ${w}`),this.times.push({name:w,start:this.started[w],end:Date.now()}),delete this.started[w]}toString(){const w=[];let $=0;for(const{name:h}of this.times)$=Math.max(h.length,$);for(const{name:h,start:x,end:L}of this.times)w.push(`${h.padEnd($)} ${L-x}ms
`);return w.join("")}}t.StatTimer=g;function o(A,w){try{const{protocol:$}=w?new URL(A,w):new URL(A);return $==="http:"||$==="https:"}catch{return!1}}function v(A,w=!1){return new Promise(($,h)=>{const x=document.createElement("script");x.src=A,x.onload=function(L){w&&x.remove(),$(L)},x.onerror=function(){h(new Error(`Cannot load script at: ${x.src}`))},(document.head||document.documentElement).append(x)})}function y(A){console.log("Deprecated API usage: "+A)}let p;class C{static toDateObject(w){if(!w||typeof w!="string")return null;p||(p=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const $=p.exec(w);if(!$)return null;const h=parseInt($[1],10);let x=parseInt($[2],10);x=x>=1&&x<=12?x-1:0;let L=parseInt($[3],10);L=L>=1&&L<=31?L:1;let j=parseInt($[4],10);j=j>=0&&j<=23?j:0;let H=parseInt($[5],10);H=H>=0&&H<=59?H:0;let X=parseInt($[6],10);X=X>=0&&X<=59?X:0;const ae=$[7]||"Z";let ne=parseInt($[8],10);ne=ne>=0&&ne<=23?ne:0;let ce=parseInt($[9],10)||0;return ce=ce>=0&&ce<=59?ce:0,ae==="-"?(j+=ne,H+=ce):ae==="+"&&(j-=ne,H-=ce),new Date(Date.UTC(h,x,L,j,H,X))}}t.PDFDateString=C;function B(A,{scale:w=1,rotation:$=0}){const{width:h,height:x}=A.attributes.style,L=[0,0,parseInt(h),parseInt(x)];return new E({viewBox:L,scale:w,rotation:$})}function S(A){if(A.startsWith("#")){const w=parseInt(A.slice(1),16);return[(w&16711680)>>16,(w&65280)>>8,w&255]}return A.startsWith("rgb(")?A.slice(4,-1).split(",").map(w=>parseInt(w)):A.startsWith("rgba(")?A.slice(5,-1).split(",").map(w=>parseInt(w)).slice(0,3):((0,s.warn)(`Not a valid color format: "${A}"`),[0,0,0])}function W(A){const w=document.createElement("span");w.style.visibility="hidden",document.body.append(w);for(const $ of A.keys()){w.style.color=$;const h=window.getComputedStyle(w).color;A.set($,S(h))}w.remove()}function V(A){const{a:w,b:$,c:h,d:x,e:L,f:j}=A.getTransform();return[w,$,h,x,L,j]}function Y(A){const{a:w,b:$,c:h,d:x,e:L,f:j}=A.getTransform().invertSelf();return[w,$,h,x,L,j]}function ee(A,w,$=!1,h=!0){if(w instanceof E){const{pageWidth:x,pageHeight:L}=w.rawDims,{style:j}=A,H=`calc(var(--scale-factor) * ${x}px)`,X=`calc(var(--scale-factor) * ${L}px)`;!$||w.rotation%180===0?(j.width=H,j.height=X):(j.width=X,j.height=H)}h&&A.setAttribute("data-main-rotation",w.rotation)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=n(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,I){return"none"}destroy(c=!1){}}t.BaseFilterFactory=s;class a{constructor(){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,I){if(c<=0||I<=0)throw new Error("Invalid canvas size");const D=this._createCanvas(c,I);return{canvas:D,context:D.getContext("2d")}}reset(c,I,D){if(!c.canvas)throw new Error("Canvas is not specified");if(I<=0||D<=0)throw new Error("Invalid canvas size");c.canvas.width=I,c.canvas.height=D}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,I){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=a;class f{constructor({baseUrl:c=null,isCompressed:I=!0}){this.constructor===f&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=I}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const I=this.baseUrl+c+(this.isCompressed?".bcmap":""),D=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(I,D).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(c,I){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=f;class m{constructor({baseUrl:c=null}){this.constructor===m&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${c}`;return this._fetchData(I).catch(D=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(c){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=m;class _{constructor(){this.constructor===_&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,I,D=!1){if(c<=0||I<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),D||(P.setAttribute("width",`${c}px`),P.setAttribute("height",`${I}px`)),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${c} ${I}`),P}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=_},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=n(1);const s=3285377520,a=4294901760,f=65535;class m{constructor(l){this.h1=l?l&4294967295:s,this.h2=l?l&4294967295:s}update(l){let c,I;if(typeof l=="string"){c=new Uint8Array(l.length*2),I=0;for(let y=0,p=l.length;y<p;y++){const C=l.charCodeAt(y);C<=255?c[I++]=C:(c[I++]=C>>>8,c[I++]=C&255)}}else if((0,i.isArrayBuffer)(l))c=l.slice(),I=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const D=I>>2,P=I-D*4,E=new Uint32Array(c.buffer,0,D);let T=0,d=0,u=this.h1,O=this.h2;const k=3432918353,g=461845907,o=k&f,v=g&f;for(let y=0;y<D;y++)y&1?(T=E[y],T=T*k&a|T*o&f,T=T<<15|T>>>17,T=T*g&a|T*v&f,u^=T,u=u<<13|u>>>19,u=u*5+3864292196):(d=E[y],d=d*k&a|d*o&f,d=d<<15|d>>>17,d=d*g&a|d*v&f,O^=d,O=O<<13|O>>>19,O=O*5+3864292196);switch(T=0,P){case 3:T^=c[D*4+2]<<16;case 2:T^=c[D*4+1]<<8;case 1:T^=c[D*4],T=T*k&a|T*o&f,T=T<<15|T>>>17,T=T*g&a|T*v&f,D&1?u^=T:O^=T}this.h1=u,this.h2=O}hexdigest(){let l=this.h1,c=this.h2;return l^=c>>>1,l=l*3981806797&a|l*36045&f,c=c*4283543511&a|((c<<16|l>>>16)*2950163797&a)>>>16,l^=c>>>1,l=l*444984403&a|l*60499&f,c=c*3301882366&a|((c<<16|l>>>16)*3120437893&a)>>>16,l^=c>>>1,(l>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=m},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=n(1),s=n(10);class a{constructor({ownerDocument:_=globalThis.document,styleElement:l=null}){this._document=_,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(_){this.nativeFontFaces.push(_),this._document.fonts.add(_)}insertRule(_){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const l=this.styleElement.sheet;l.insertRule(_,l.cssRules.length)}clear(){for(const _ of this.nativeFontFaces)this._document.fonts.delete(_);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(_){if(_.attached||_.missingFile)return;if(_.attached=!0,this.isFontLoadingAPISupported){const c=_.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(I){throw(0,i.warn)(`Failed to load font '${c.family}': '${I}'.`),_.disableFontFace=!0,I}}return}const l=_.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const I=this._queueLoadingCallback(c);this._prepareFontLoadEvent(_,I)})}}get isFontLoadingAPISupported(){var l;const _=!!((l=this._document)!=null&&l.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",_)}get isSyncFontLoadingSupported(){let _=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(_=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",_)}_queueLoadingCallback(_){function l(){for((0,i.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;c.length>0&&c[0].done;){const D=c.shift();setTimeout(D.callback,0)}}const{loadingRequests:c}=this,I={done:!1,complete:l,callback:_};return c.push(I),I}get _loadTestFont(){const _=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",_)}_prepareFontLoadEvent(_,l){function c(S,W){return S.charCodeAt(W)<<24|S.charCodeAt(W+1)<<16|S.charCodeAt(W+2)<<8|S.charCodeAt(W+3)&255}function I(S,W,V,Y){const ee=S.substring(0,W),re=S.substring(W+V);return ee+Y+re}let D,P;const E=this._document.createElement("canvas");E.width=1,E.height=1;const T=E.getContext("2d");let d=0;function u(S,W){if(++d>30){(0,i.warn)("Load test font never loaded."),W();return}if(T.font="30px "+S,T.fillText(".",0,20),T.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(u.bind(null,S,W))}const O=`lt${Date.now()}${this.loadTestFontId++}`;let k=this._loadTestFont;k=I(k,976,O.length,O);const o=16,v=1482184792;let y=c(k,o);for(D=0,P=O.length-3;D<P;D+=4)y=y-v+c(O,D)|0;D<O.length&&(y=y-v+c(O+"XXX",D)|0),k=I(k,o,4,(0,i.string32)(y));const p=`url(data:font/opentype;base64,${btoa(k)});`,C=`@font-face {font-family:"${O}";src:${p}}`;this.insertRule(C);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const S of[_.loadedName,O]){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=S,B.append(W)}this._document.body.append(B),u(O,()=>{B.remove(),l.complete()})}}t.FontLoader=a;class f{constructor(_,{isEvalSupported:l=!0,disableFontFace:c=!1,ignoreErrors:I=!1,inspectFont:D=null}){this.compiledGlyphs=Object.create(null);for(const P in _)this[P]=_[P];this.isEvalSupported=l!==!1,this.disableFontFace=c===!0,this.ignoreErrors=I===!0,this._inspectFont=D}createNativeFontFace(){var l;if(!this.data||this.disableFontFace)return null;let _;if(!this.cssFontInfo)_=new FontFace(this.loadedName,this.data,{});else{const c={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(c.style=`oblique ${this.cssFontInfo.italicAngle}deg`),_=new FontFace(this.cssFontInfo.fontFamily,this.data,c)}return(l=this._inspectFont)==null||l.call(this,this),_}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const _=(0,i.bytesToString)(this.data),l=`url(data:${this.mimetype};base64,${btoa(_)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${l}}`;else{let D=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(D+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${D}src:${l}}`}return(I=this._inspectFont)==null||I.call(this,this,l),c}getPathGenerator(_,l){if(this.compiledGlyphs[l]!==void 0)return this.compiledGlyphs[l];let c;try{c=_.get(this.loadedName+"_path_"+l)}catch(I){if(!this.ignoreErrors)throw I;return(0,i.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[l]=function(D,P){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const I=[];for(const D of c){const P=D.args!==void 0?D.args.join(","):"";I.push("c.",D.cmd,"(",P,`);
`)}return this.compiledGlyphs[l]=new Function("c","size",I.join(""))}return this.compiledGlyphs[l]=function(I,D){for(const P of c)P.cmd==="scale"&&(P.args=[D,-D]),I[P.cmd].apply(I,P.args)}}}t.FontFaceObject=f},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");t.isNodeJS=n},(e,t,n)=>{var se,yt,Ee,Et;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=n(1),s=n(6),a=n(12),f=n(13),m=n(10);const _=16,l=100,c=4096,I=15,D=10,P=1e3,E=16;function T(K,F){if(K._removeMirroring)throw new Error("Context is already forwarding operations.");K.__originalSave=K.save,K.__originalRestore=K.restore,K.__originalRotate=K.rotate,K.__originalScale=K.scale,K.__originalTranslate=K.translate,K.__originalTransform=K.transform,K.__originalSetTransform=K.setTransform,K.__originalResetTransform=K.resetTransform,K.__originalClip=K.clip,K.__originalMoveTo=K.moveTo,K.__originalLineTo=K.lineTo,K.__originalBezierCurveTo=K.bezierCurveTo,K.__originalRect=K.rect,K.__originalClosePath=K.closePath,K.__originalBeginPath=K.beginPath,K._removeMirroring=()=>{K.save=K.__originalSave,K.restore=K.__originalRestore,K.rotate=K.__originalRotate,K.scale=K.__originalScale,K.translate=K.__originalTranslate,K.transform=K.__originalTransform,K.setTransform=K.__originalSetTransform,K.resetTransform=K.__originalResetTransform,K.clip=K.__originalClip,K.moveTo=K.__originalMoveTo,K.lineTo=K.__originalLineTo,K.bezierCurveTo=K.__originalBezierCurveTo,K.rect=K.__originalRect,K.closePath=K.__originalClosePath,K.beginPath=K.__originalBeginPath,delete K._removeMirroring},K.save=function(){F.save(),this.__originalSave()},K.restore=function(){F.restore(),this.__originalRestore()},K.translate=function(M,U){F.translate(M,U),this.__originalTranslate(M,U)},K.scale=function(M,U){F.scale(M,U),this.__originalScale(M,U)},K.transform=function(M,U,z,Z,A,w){F.transform(M,U,z,Z,A,w),this.__originalTransform(M,U,z,Z,A,w)},K.setTransform=function(M,U,z,Z,A,w){F.setTransform(M,U,z,Z,A,w),this.__originalSetTransform(M,U,z,Z,A,w)},K.resetTransform=function(){F.resetTransform(),this.__originalResetTransform()},K.rotate=function(M){F.rotate(M),this.__originalRotate(M)},K.clip=function(M){F.clip(M),this.__originalClip(M)},K.moveTo=function(b,M){F.moveTo(b,M),this.__originalMoveTo(b,M)},K.lineTo=function(b,M){F.lineTo(b,M),this.__originalLineTo(b,M)},K.bezierCurveTo=function(b,M,U,z,Z,A){F.bezierCurveTo(b,M,U,z,Z,A),this.__originalBezierCurveTo(b,M,U,z,Z,A)},K.rect=function(b,M,U,z){F.rect(b,M,U,z),this.__originalRect(b,M,U,z)},K.closePath=function(){F.closePath(),this.__originalClosePath()},K.beginPath=function(){F.beginPath(),this.__originalBeginPath()}}class d{constructor(F){this.canvasFactory=F,this.cache=Object.create(null)}getCanvas(F,b,M){let U;return this.cache[F]!==void 0?(U=this.cache[F],this.canvasFactory.reset(U,b,M)):(U=this.canvasFactory.create(b,M),this.cache[F]=U),U}delete(F){delete this.cache[F]}clear(){for(const F in this.cache){const b=this.cache[F];this.canvasFactory.destroy(b),delete this.cache[F]}}}function u(K,F,b,M,U,z,Z,A,w,$){const[h,x,L,j,H,X]=(0,s.getCurrentTransform)(K);if(x===0&&L===0){const ce=Z*h+H,he=Math.round(ce),J=A*j+X,Q=Math.round(J),ue=(Z+w)*h+H,pe=Math.abs(Math.round(ue)-he)||1,ye=(A+$)*j+X,Se=Math.abs(Math.round(ye)-Q)||1;return K.setTransform(Math.sign(h),0,0,Math.sign(j),he,Q),K.drawImage(F,b,M,U,z,0,0,pe,Se),K.setTransform(h,x,L,j,H,X),[pe,Se]}if(h===0&&j===0){const ce=A*L+H,he=Math.round(ce),J=Z*x+X,Q=Math.round(J),ue=(A+$)*L+H,pe=Math.abs(Math.round(ue)-he)||1,ye=(Z+w)*x+X,Se=Math.abs(Math.round(ye)-Q)||1;return K.setTransform(0,Math.sign(x),Math.sign(L),0,he,Q),K.drawImage(F,b,M,U,z,0,0,Se,pe),K.setTransform(h,x,L,j,H,X),[Se,pe]}K.drawImage(F,b,M,U,z,Z,A,w,$);const ae=Math.hypot(h,x),ne=Math.hypot(L,j);return[ae*w,ne*$]}function O(K){const{width:F,height:b}=K;if(F>P||b>P)return null;const M=1e3,U=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),z=F+1;let Z=new Uint8Array(z*(b+1)),A,w,$;const h=F+7&-8;let x=new Uint8Array(h*b),L=0;for(const ne of K.data){let ce=128;for(;ce>0;)x[L++]=ne&ce?0:255,ce>>=1}let j=0;for(L=0,x[L]!==0&&(Z[0]=1,++j),w=1;w<F;w++)x[L]!==x[L+1]&&(Z[w]=x[L]?2:1,++j),L++;for(x[L]!==0&&(Z[w]=2,++j),A=1;A<b;A++){L=A*h,$=A*z,x[L-h]!==x[L]&&(Z[$]=x[L]?1:8,++j);let ne=(x[L]?4:0)+(x[L-h]?8:0);for(w=1;w<F;w++)ne=(ne>>2)+(x[L+1]?4:0)+(x[L-h+1]?8:0),U[ne]&&(Z[$+w]=U[ne],++j),L++;if(x[L-h]!==x[L]&&(Z[$+w]=x[L]?2:4,++j),j>M)return null}for(L=h*(b-1),$=A*z,x[L]!==0&&(Z[$]=8,++j),w=1;w<F;w++)x[L]!==x[L+1]&&(Z[$+w]=x[L]?4:8,++j),L++;if(x[L]!==0&&(Z[$+w]=4,++j),j>M)return null;const H=new Int32Array([0,z,-1,0,-z,0,0,0,1]),X=new Path2D;for(A=0;j&&A<=b;A++){let ne=A*z;const ce=ne+F;for(;ne<ce&&!Z[ne];)ne++;if(ne===ce)continue;X.moveTo(ne%z,A);const he=ne;let J=Z[ne];do{const Q=H[J];do ne+=Q;while(!Z[ne]);const ue=Z[ne];ue!==5&&ue!==10?(J=ue,Z[ne]=0):(J=ue&51*J>>4,Z[ne]&=J>>2|J<<2),X.lineTo(ne%z,ne/z|0),Z[ne]||--j}while(he!==ne);--A}return x=null,Z=null,function(ne){ne.save(),ne.scale(1/F,-1/b),ne.translate(0,-b),ne.fill(X),ne.beginPath(),ne.restore()}}class k{constructor(F,b){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,F,b])}clone(){const F=Object.create(this);return F.clipBox=this.clipBox.slice(),F}setCurrentPoint(F,b){this.x=F,this.y=b}updatePathMinMax(F,b,M){[b,M]=i.Util.applyTransform([b,M],F),this.minX=Math.min(this.minX,b),this.minY=Math.min(this.minY,M),this.maxX=Math.max(this.maxX,b),this.maxY=Math.max(this.maxY,M)}updateRectMinMax(F,b){const M=i.Util.applyTransform(b,F),U=i.Util.applyTransform(b.slice(2),F);this.minX=Math.min(this.minX,M[0],U[0]),this.minY=Math.min(this.minY,M[1],U[1]),this.maxX=Math.max(this.maxX,M[0],U[0]),this.maxY=Math.max(this.maxY,M[1],U[1])}updateScalingPathMinMax(F,b){i.Util.scaleMinMax(F,b),this.minX=Math.min(this.minX,b[0]),this.maxX=Math.max(this.maxX,b[1]),this.minY=Math.min(this.minY,b[2]),this.maxY=Math.max(this.maxY,b[3])}updateCurvePathMinMax(F,b,M,U,z,Z,A,w,$,h){const x=i.Util.bezierBoundingBox(b,M,U,z,Z,A,w,$);if(h){h[0]=Math.min(h[0],x[0],x[2]),h[1]=Math.max(h[1],x[0],x[2]),h[2]=Math.min(h[2],x[1],x[3]),h[3]=Math.max(h[3],x[1],x[3]);return}this.updateRectMinMax(F,x)}getPathBoundingBox(F=a.PathType.FILL,b=null){const M=[this.minX,this.minY,this.maxX,this.maxY];if(F===a.PathType.STROKE){b||(0,i.unreachable)("Stroke bounding box must include transform.");const U=i.Util.singularValueDecompose2dScale(b),z=U[0]*this.lineWidth/2,Z=U[1]*this.lineWidth/2;M[0]-=z,M[1]-=Z,M[2]+=z,M[3]+=Z}return M}updateClipFromPath(){const F=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(F||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(F){this.clipBox=F,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(F=a.PathType.FILL,b=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(F,b))}}function g(K,F){if(typeof ImageData<"u"&&F instanceof ImageData){K.putImageData(F,0,0);return}const b=F.height,M=F.width,U=b%E,z=(b-U)/E,Z=U===0?z:z+1,A=K.createImageData(M,E);let w=0,$;const h=F.data,x=A.data;let L,j,H,X;if(F.kind===i.ImageKind.GRAYSCALE_1BPP){const ae=h.byteLength,ne=new Uint32Array(x.buffer,0,x.byteLength>>2),ce=ne.length,he=M+7>>3,J=4294967295,Q=i.FeatureTest.isLittleEndian?4278190080:255;for(L=0;L<Z;L++){for(H=L<z?E:U,$=0,j=0;j<H;j++){const ue=ae-w;let pe=0;const ye=ue>he?M:ue*8-7,Se=ye&-8;let xe=0,te=0;for(;pe<Se;pe+=8)te=h[w++],ne[$++]=te&128?J:Q,ne[$++]=te&64?J:Q,ne[$++]=te&32?J:Q,ne[$++]=te&16?J:Q,ne[$++]=te&8?J:Q,ne[$++]=te&4?J:Q,ne[$++]=te&2?J:Q,ne[$++]=te&1?J:Q;for(;pe<ye;pe++)xe===0&&(te=h[w++],xe=128),ne[$++]=te&xe?J:Q,xe>>=1}for(;$<ce;)ne[$++]=0;K.putImageData(A,0,L*E)}}else if(F.kind===i.ImageKind.RGBA_32BPP){for(j=0,X=M*E*4,L=0;L<z;L++)x.set(h.subarray(w,w+X)),w+=X,K.putImageData(A,0,j),j+=E;L<Z&&(X=M*U*4,x.set(h.subarray(w,w+X)),K.putImageData(A,0,j))}else if(F.kind===i.ImageKind.RGB_24BPP)for(H=E,X=M*H,L=0;L<Z;L++){for(L>=z&&(H=U,X=M*H),$=0,j=X;j--;)x[$++]=h[w++],x[$++]=h[w++],x[$++]=h[w++],x[$++]=255;K.putImageData(A,0,L*E)}else throw new Error(`bad image kind: ${F.kind}`)}function o(K,F){if(F.bitmap){K.drawImage(F.bitmap,0,0);return}const b=F.height,M=F.width,U=b%E,z=(b-U)/E,Z=U===0?z:z+1,A=K.createImageData(M,E);let w=0;const $=F.data,h=A.data;for(let x=0;x<Z;x++){const L=x<z?E:U;({srcPos:w}=(0,f.convertBlackAndWhiteToRGBA)({src:$,srcPos:w,dest:h,width:M,height:L,nonBlackColor:0})),K.putImageData(A,0,x*E)}}function v(K,F){const b=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const M of b)K[M]!==void 0&&(F[M]=K[M]);K.setLineDash!==void 0&&(F.setLineDash(K.getLineDash()),F.lineDashOffset=K.lineDashOffset)}function y(K){K.strokeStyle=K.fillStyle="#000000",K.fillRule="nonzero",K.globalAlpha=1,K.lineWidth=1,K.lineCap="butt",K.lineJoin="miter",K.miterLimit=10,K.globalCompositeOperation="source-over",K.font="10px sans-serif",K.setLineDash!==void 0&&(K.setLineDash([]),K.lineDashOffset=0),m.isNodeJS||(K.filter="none")}function p(K,F,b,M){const U=K.length;for(let z=3;z<U;z+=4){const Z=K[z];if(Z===0)K[z-3]=F,K[z-2]=b,K[z-1]=M;else if(Z<255){const A=255-Z;K[z-3]=K[z-3]*Z+F*A>>8,K[z-2]=K[z-2]*Z+b*A>>8,K[z-1]=K[z-1]*Z+M*A>>8}}}function C(K,F,b){const M=K.length,U=1/255;for(let z=3;z<M;z+=4){const Z=b?b[K[z]]:K[z];F[z]=F[z]*Z*U|0}}function B(K,F,b){const M=K.length;for(let U=3;U<M;U+=4){const z=K[U-3]*77+K[U-2]*152+K[U-1]*28;F[U]=b?F[U]*b[z>>8]>>8:F[U]*z>>16}}function S(K,F,b,M,U,z,Z,A,w,$,h){const x=!!z,L=x?z[0]:0,j=x?z[1]:0,H=x?z[2]:0;let X;U==="Luminosity"?X=B:X=C;const ne=Math.min(M,Math.ceil(1048576/b));for(let ce=0;ce<M;ce+=ne){const he=Math.min(ne,M-ce),J=K.getImageData(A-$,ce+(w-h),b,he),Q=F.getImageData(A,ce+w,b,he);x&&p(J.data,L,j,H),X(J.data,Q.data,Z),F.putImageData(Q,A,ce+w)}}function W(K,F,b,M){const U=M[0],z=M[1],Z=M[2]-U,A=M[3]-z;Z===0||A===0||(S(F.context,b,Z,A,F.subtype,F.backdrop,F.transferMap,U,z,F.offsetX,F.offsetY),K.save(),K.globalAlpha=1,K.globalCompositeOperation="source-over",K.setTransform(1,0,0,1,0,0),K.drawImage(b.canvas,0,0),K.restore())}function V(K,F){const b=i.Util.singularValueDecompose2dScale(K);b[0]=Math.fround(b[0]),b[1]=Math.fround(b[1]);const M=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return F!==void 0?F:b[0]<=M||b[1]<=M}const Y=["butt","round","square"],ee=["miter","round","bevel"],re={},le={},ve=class{constructor(F,b,M,U,z,{optionalContentConfig:Z,markedContentStack:A=null},w,$){ie(this,se);ie(this,Ee);this.ctx=F,this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=b,this.objs=M,this.canvasFactory=U,this.filterFactory=z,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=A||[],this.optionalContentConfig=Z,this.cachedCanvases=new d(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=w,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=$,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(F,b=null){return typeof F=="string"?F.startsWith("g_")?this.commonObjs.get(F):this.objs.get(F):b}beginDrawing({transform:F,viewport:b,transparency:M=!1,background:U=null}){const z=this.ctx.canvas.width,Z=this.ctx.canvas.height,A=this.ctx.fillStyle;if(this.ctx.fillStyle=U||"#ffffff",this.ctx.fillRect(0,0,z,Z),this.ctx.fillStyle=A,M){const w=this.cachedCanvases.getCanvas("transparent",z,Z);this.compositeCtx=this.ctx,this.transparentCanvas=w.canvas,this.ctx=w.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),y(this.ctx),F&&(this.ctx.transform(...F),this.outputScaleX=F[0],this.outputScaleY=F[0]),this.ctx.transform(...b.transform),this.viewportScale=b.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(F,b,M,U){const z=F.argsArray,Z=F.fnArray;let A=b||0;const w=z.length;if(w===A)return A;const $=w-A>D&&typeof M=="function",h=$?Date.now()+I:0;let x=0;const L=this.commonObjs,j=this.objs;let H;for(;;){if(U!==void 0&&A===U.nextBreakPoint)return U.breakIt(A,M),A;if(H=Z[A],H!==i.OPS.dependency)this[H].apply(this,z[A]);else for(const X of z[A]){const ae=X.startsWith("g_")?L:j;if(!ae.has(X))return ae.get(X,M),A}if(A++,A===w)return A;if($&&++x>D){if(Date.now()>h)return M(),A;x=0}}}endDrawing(){de(this,se,yt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const F of this._cachedBitmapsMap.values()){for(const b of F.values())typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement&&(b.width=b.height=0);F.clear()}this._cachedBitmapsMap.clear(),de(this,Ee,Et).call(this)}_scaleImage(F,b){const M=F.width,U=F.height;let z=Math.max(Math.hypot(b[0],b[1]),1),Z=Math.max(Math.hypot(b[2],b[3]),1),A=M,w=U,$="prescale1",h,x;for(;z>2&&A>1||Z>2&&w>1;){let L=A,j=w;z>2&&A>1&&(L=A>=16384?Math.floor(A/2)-1||1:Math.ceil(A/2),z/=A/L),Z>2&&w>1&&(j=w>=16384?Math.floor(w/2)-1||1:Math.ceil(w)/2,Z/=w/j),h=this.cachedCanvases.getCanvas($,L,j),x=h.context,x.clearRect(0,0,L,j),x.drawImage(F,0,0,A,w,0,0,L,j),F=h.canvas,A=L,w=j,$=$==="prescale1"?"prescale2":"prescale1"}return{img:F,paintWidth:A,paintHeight:w}}_createMaskCanvas(F){const b=this.ctx,{width:M,height:U}=F,z=this.current.fillColor,Z=this.current.patternFill,A=(0,s.getCurrentTransform)(b);let w,$,h,x;if((F.bitmap||F.data)&&F.count>1){const pe=F.bitmap||F.data.buffer;$=JSON.stringify(Z?A:[A.slice(0,4),z]),w=this._cachedBitmapsMap.get(pe),w||(w=new Map,this._cachedBitmapsMap.set(pe,w));const ye=w.get($);if(ye&&!Z){const Se=Math.round(Math.min(A[0],A[2])+A[4]),xe=Math.round(Math.min(A[1],A[3])+A[5]);return{canvas:ye,offsetX:Se,offsetY:xe}}h=ye}h||(x=this.cachedCanvases.getCanvas("maskCanvas",M,U),o(x.context,F));let L=i.Util.transform(A,[1/M,0,0,-1/U,0,0]);L=i.Util.transform(L,[1,0,0,1,0,-U]);const j=i.Util.applyTransform([0,0],L),H=i.Util.applyTransform([M,U],L),X=i.Util.normalizeRect([j[0],j[1],H[0],H[1]]),ae=Math.round(X[2]-X[0])||1,ne=Math.round(X[3]-X[1])||1,ce=this.cachedCanvases.getCanvas("fillCanvas",ae,ne),he=ce.context,J=Math.min(j[0],H[0]),Q=Math.min(j[1],H[1]);he.translate(-J,-Q),he.transform(...L),h||(h=this._scaleImage(x.canvas,(0,s.getCurrentTransformInverse)(he)),h=h.img,w&&Z&&w.set($,h)),he.imageSmoothingEnabled=V((0,s.getCurrentTransform)(he),F.interpolate),u(he,h,0,0,h.width,h.height,0,0,M,U),he.globalCompositeOperation="source-in";const ue=i.Util.transform((0,s.getCurrentTransformInverse)(he),[1,0,0,1,-J,-Q]);return he.fillStyle=Z?z.getPattern(b,this,ue,a.PathType.FILL):z,he.fillRect(0,0,M,U),w&&!Z&&(this.cachedCanvases.delete("fillCanvas"),w.set($,ce.canvas)),{canvas:ce.canvas,offsetX:Math.round(J),offsetY:Math.round(Q)}}setLineWidth(F){F!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=F,this.ctx.lineWidth=F}setLineCap(F){this.ctx.lineCap=Y[F]}setLineJoin(F){this.ctx.lineJoin=ee[F]}setMiterLimit(F){this.ctx.miterLimit=F}setDash(F,b){const M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(F),M.lineDashOffset=b)}setRenderingIntent(F){}setFlatness(F){}setGState(F){for(const[b,M]of F)switch(b){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M[0],M[1]);break;case"CA":this.current.strokeAlpha=M;break;case"ca":this.current.fillAlpha=M,this.ctx.globalAlpha=M;break;case"BM":this.ctx.globalCompositeOperation=M;break;case"SMask":this.current.activeSMask=M?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(M);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const F=this.inSMaskMode;this.current.activeSMask&&!F?this.beginSMaskMode():!this.current.activeSMask&&F&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const F=this.ctx.canvas.width,b=this.ctx.canvas.height,M="smaskGroupAt"+this.groupLevel,U=this.cachedCanvases.getCanvas(M,F,b);this.suspendedCtx=this.ctx,this.ctx=U.context;const z=this.ctx;z.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),v(this.suspendedCtx,z),T(z,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),v(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(F){if(!this.current.activeSMask)return;F?(F[0]=Math.floor(F[0]),F[1]=Math.floor(F[1]),F[2]=Math.ceil(F[2]),F[3]=Math.ceil(F[3])):F=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const b=this.current.activeSMask,M=this.suspendedCtx;W(M,b,this.ctx,F),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(v(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const F=this.current;this.stateStack.push(F),this.current=F.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),v(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(F,b,M,U,z,Z){this.ctx.transform(F,b,M,U,z,Z),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(F,b,M){const U=this.ctx,z=this.current;let Z=z.x,A=z.y,w,$;const h=(0,s.getCurrentTransform)(U),x=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,L=x?M.slice(0):null;for(let j=0,H=0,X=F.length;j<X;j++)switch(F[j]|0){case i.OPS.rectangle:Z=b[H++],A=b[H++];const ae=b[H++],ne=b[H++],ce=Z+ae,he=A+ne;U.moveTo(Z,A),ae===0||ne===0?U.lineTo(ce,he):(U.lineTo(ce,A),U.lineTo(ce,he),U.lineTo(Z,he)),x||z.updateRectMinMax(h,[Z,A,ce,he]),U.closePath();break;case i.OPS.moveTo:Z=b[H++],A=b[H++],U.moveTo(Z,A),x||z.updatePathMinMax(h,Z,A);break;case i.OPS.lineTo:Z=b[H++],A=b[H++],U.lineTo(Z,A),x||z.updatePathMinMax(h,Z,A);break;case i.OPS.curveTo:w=Z,$=A,Z=b[H+4],A=b[H+5],U.bezierCurveTo(b[H],b[H+1],b[H+2],b[H+3],Z,A),z.updateCurvePathMinMax(h,w,$,b[H],b[H+1],b[H+2],b[H+3],Z,A,L),H+=6;break;case i.OPS.curveTo2:w=Z,$=A,U.bezierCurveTo(Z,A,b[H],b[H+1],b[H+2],b[H+3]),z.updateCurvePathMinMax(h,w,$,Z,A,b[H],b[H+1],b[H+2],b[H+3],L),Z=b[H+2],A=b[H+3],H+=4;break;case i.OPS.curveTo3:w=Z,$=A,Z=b[H+2],A=b[H+3],U.bezierCurveTo(b[H],b[H+1],Z,A,Z,A),z.updateCurvePathMinMax(h,w,$,b[H],b[H+1],Z,A,Z,A,L),H+=4;break;case i.OPS.closePath:U.closePath();break}x&&z.updateScalingPathMinMax(h,L),z.setCurrentPoint(Z,A)}closePath(){this.ctx.closePath()}stroke(F=!0){const b=this.ctx,M=this.current.strokeColor;b.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof M=="object"&&(M==null?void 0:M.getPattern)?(b.save(),b.strokeStyle=M.getPattern(b,this,(0,s.getCurrentTransformInverse)(b),a.PathType.STROKE),this.rescaleAndStroke(!1),b.restore()):this.rescaleAndStroke(!0)),F&&this.consumePath(this.current.getClippedPathBoundingBox()),b.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(F=!0){const b=this.ctx,M=this.current.fillColor,U=this.current.patternFill;let z=!1;U&&(b.save(),b.fillStyle=M.getPattern(b,this,(0,s.getCurrentTransformInverse)(b),a.PathType.FILL),z=!0);const Z=this.current.getClippedPathBoundingBox();this.contentVisible&&Z!==null&&(this.pendingEOFill?(b.fill("evenodd"),this.pendingEOFill=!1):b.fill()),z&&b.restore(),F&&this.consumePath(Z)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=re}eoClip(){this.pendingClip=le}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const F=this.pendingTextPaths,b=this.ctx;if(F===void 0){b.beginPath();return}b.save(),b.beginPath();for(const M of F)b.setTransform(...M.transform),b.translate(M.x,M.y),M.addToPath(b,M.fontSize);b.restore(),b.clip(),b.beginPath(),delete this.pendingTextPaths}setCharSpacing(F){this.current.charSpacing=F}setWordSpacing(F){this.current.wordSpacing=F}setHScale(F){this.current.textHScale=F/100}setLeading(F){this.current.leading=-F}setFont(F,b){const M=this.commonObjs.get(F),U=this.current;if(!M)throw new Error(`Can't find font for ${F}`);if(U.fontMatrix=M.fontMatrix||i.FONT_IDENTITY_MATRIX,(U.fontMatrix[0]===0||U.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+F),b<0?(b=-b,U.fontDirection=-1):U.fontDirection=1,this.current.font=M,this.current.fontSize=b,M.isType3Font)return;const z=M.loadedName||"sans-serif";let Z="normal";M.black?Z="900":M.bold&&(Z="bold");const A=M.italic?"italic":"normal",w=`"${z}", ${M.fallbackName}`;let $=b;b<_?$=_:b>l&&($=l),this.current.fontSizeScale=b/$,this.ctx.font=`${A} ${Z} ${$}px ${w}`}setTextRenderingMode(F){this.current.textRenderingMode=F}setTextRise(F){this.current.textRise=F}moveText(F,b){this.current.x=this.current.lineX+=F,this.current.y=this.current.lineY+=b}setLeadingMoveText(F,b){this.setLeading(-b),this.moveText(F,b)}setTextMatrix(F,b,M,U,z,Z){this.current.textMatrix=[F,b,M,U,z,Z],this.current.textMatrixScale=Math.hypot(F,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(F,b,M,U){const z=this.ctx,Z=this.current,A=Z.font,w=Z.textRenderingMode,$=Z.fontSize/Z.fontSizeScale,h=w&i.TextRenderingMode.FILL_STROKE_MASK,x=!!(w&i.TextRenderingMode.ADD_TO_PATH_FLAG),L=Z.patternFill&&!A.missingFile;let j;(A.disableFontFace||x||L)&&(j=A.getPathGenerator(this.commonObjs,F)),A.disableFontFace||L?(z.save(),z.translate(b,M),z.beginPath(),j(z,$),U&&z.setTransform(...U),(h===i.TextRenderingMode.FILL||h===i.TextRenderingMode.FILL_STROKE)&&z.fill(),(h===i.TextRenderingMode.STROKE||h===i.TextRenderingMode.FILL_STROKE)&&z.stroke(),z.restore()):((h===i.TextRenderingMode.FILL||h===i.TextRenderingMode.FILL_STROKE)&&z.fillText(F,b,M),(h===i.TextRenderingMode.STROKE||h===i.TextRenderingMode.FILL_STROKE)&&z.strokeText(F,b,M)),x&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(z),x:b,y:M,fontSize:$,addToPath:j})}get isFontSubpixelAAEnabled(){const{context:F}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);F.scale(1.5,1),F.fillText("I",0,10);const b=F.getImageData(0,0,10,10).data;let M=!1;for(let U=3;U<b.length;U+=4)if(b[U]>0&&b[U]<255){M=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",M)}showText(F){const b=this.current,M=b.font;if(M.isType3Font)return this.showType3Text(F);const U=b.fontSize;if(U===0)return;const z=this.ctx,Z=b.fontSizeScale,A=b.charSpacing,w=b.wordSpacing,$=b.fontDirection,h=b.textHScale*$,x=F.length,L=M.vertical,j=L?1:-1,H=M.defaultVMetrics,X=U*b.fontMatrix[0],ae=b.textRenderingMode===i.TextRenderingMode.FILL&&!M.disableFontFace&&!b.patternFill;z.save(),z.transform(...b.textMatrix),z.translate(b.x,b.y+b.textRise),$>0?z.scale(h,-1):z.scale(h,1);let ne;if(b.patternFill){z.save();const ue=b.fillColor.getPattern(z,this,(0,s.getCurrentTransformInverse)(z),a.PathType.FILL);ne=(0,s.getCurrentTransform)(z),z.restore(),z.fillStyle=ue}let ce=b.lineWidth;const he=b.textMatrixScale;if(he===0||ce===0){const ue=b.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(ue===i.TextRenderingMode.STROKE||ue===i.TextRenderingMode.FILL_STROKE)&&(ce=this.getSinglePixelWidth())}else ce/=he;if(Z!==1&&(z.scale(Z,Z),ce/=Z),z.lineWidth=ce,M.isInvalidPDFjsFont){const ue=[];let pe=0;for(const ye of F)ue.push(ye.unicode),pe+=ye.width;z.fillText(ue.join(""),0,0),b.x+=pe*X*h,z.restore(),this.compose();return}let J=0,Q;for(Q=0;Q<x;++Q){const ue=F[Q];if(typeof ue=="number"){J+=j*ue*U/1e3;continue}let pe=!1;const ye=(ue.isSpace?w:0)+A,Se=ue.fontChar,xe=ue.accent;let te,Ae,Te=ue.width;if(L){const ge=ue.vmetric||H,q=-(ue.vmetric?ge[1]:Te*.5)*X,G=ge[2]*X;Te=ge?-ge[0]:Te,te=q/Z,Ae=(J+G)/Z}else te=J/Z,Ae=0;if(M.remeasure&&Te>0){const ge=z.measureText(Se).width*1e3/U*Z;if(Te<ge&&this.isFontSubpixelAAEnabled){const q=Te/ge;pe=!0,z.save(),z.scale(q,1),te/=q}else Te!==ge&&(te+=(Te-ge)/2e3*U/Z)}if(this.contentVisible&&(ue.isInFont||M.missingFile)){if(ae&&!xe)z.fillText(Se,te,Ae);else if(this.paintChar(Se,te,Ae,ne),xe){const ge=te+U*xe.offset.x/Z,q=Ae-U*xe.offset.y/Z;this.paintChar(xe.fontChar,ge,q,ne)}}let ke;L?ke=Te*X-ye*$:ke=Te*X+ye*$,J+=ke,pe&&z.restore()}L?b.y-=J:b.x+=J*h,z.restore(),this.compose()}showType3Text(F){const b=this.ctx,M=this.current,U=M.font,z=M.fontSize,Z=M.fontDirection,A=U.vertical?1:-1,w=M.charSpacing,$=M.wordSpacing,h=M.textHScale*Z,x=M.fontMatrix||i.FONT_IDENTITY_MATRIX,L=F.length,j=M.textRenderingMode===i.TextRenderingMode.INVISIBLE;let H,X,ae,ne;if(!(j||z===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,b.save(),b.transform(...M.textMatrix),b.translate(M.x,M.y),b.scale(h,Z),H=0;H<L;++H){if(X=F[H],typeof X=="number"){ne=A*X*z/1e3,this.ctx.translate(ne,0),M.x+=ne*h;continue}const ce=(X.isSpace?$:0)+w,he=U.charProcOperatorList[X.operatorListId];if(!he){(0,i.warn)(`Type3 character "${X.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=X,this.save(),b.scale(z,z),b.transform(...x),this.executeOperatorList(he),this.restore()),ae=i.Util.applyTransform([X.width,0],x)[0]*z+ce,b.translate(ae,0),M.x+=ae*h}b.restore(),this.processingType3=null}}setCharWidth(F,b){}setCharWidthAndBounds(F,b,M,U,z,Z){this.ctx.rect(M,U,z-M,Z-U),this.ctx.clip(),this.endPath()}getColorN_Pattern(F){let b;if(F[0]==="TilingPattern"){const M=F[1],U=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),z={createCanvasGraphics:Z=>new ve(Z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};b=new a.TilingPattern(F,M,this.ctx,z,U)}else b=this._getPattern(F[1],F[2]);return b}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(F,b,M){const U=i.Util.makeHexColor(F,b,M);this.ctx.strokeStyle=U,this.current.strokeColor=U}setFillRGBColor(F,b,M){const U=i.Util.makeHexColor(F,b,M);this.ctx.fillStyle=U,this.current.fillColor=U,this.current.patternFill=!1}_getPattern(F,b=null){let M;return this.cachedPatterns.has(F)?M=this.cachedPatterns.get(F):(M=(0,a.getShadingPattern)(this.getObject(F)),this.cachedPatterns.set(F,M)),b&&(M.matrix=b),M}shadingFill(F){if(!this.contentVisible)return;const b=this.ctx;this.save();const M=this._getPattern(F);b.fillStyle=M.getPattern(b,this,(0,s.getCurrentTransformInverse)(b),a.PathType.SHADING);const U=(0,s.getCurrentTransformInverse)(b);if(U){const z=b.canvas,Z=z.width,A=z.height,w=i.Util.applyTransform([0,0],U),$=i.Util.applyTransform([0,A],U),h=i.Util.applyTransform([Z,0],U),x=i.Util.applyTransform([Z,A],U),L=Math.min(w[0],$[0],h[0],x[0]),j=Math.min(w[1],$[1],h[1],x[1]),H=Math.max(w[0],$[0],h[0],x[0]),X=Math.max(w[1],$[1],h[1],x[1]);this.ctx.fillRect(L,j,H-L,X-j)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(F,b){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(F)&&F.length===6&&this.transform(...F),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),b)){const M=b[2]-b[0],U=b[3]-b[1];this.ctx.rect(b[0],b[1],M,U),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),b),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(F){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const b=this.ctx;F.isolated||(0,i.info)("TODO: Support non-isolated groups."),F.knockout&&(0,i.warn)("Knockout groups not supported.");const M=(0,s.getCurrentTransform)(b);if(F.matrix&&b.transform(...F.matrix),!F.bbox)throw new Error("Bounding box is required.");let U=i.Util.getAxialAlignedBoundingBox(F.bbox,(0,s.getCurrentTransform)(b));const z=[0,0,b.canvas.width,b.canvas.height];U=i.Util.intersect(U,z)||[0,0,0,0];const Z=Math.floor(U[0]),A=Math.floor(U[1]);let w=Math.max(Math.ceil(U[2])-Z,1),$=Math.max(Math.ceil(U[3])-A,1),h=1,x=1;w>c&&(h=w/c,w=c),$>c&&(x=$/c,$=c),this.current.startNewPathAndClipBox([0,0,w,$]);let L="groupAt"+this.groupLevel;F.smask&&(L+="_smask_"+this.smaskCounter++%2);const j=this.cachedCanvases.getCanvas(L,w,$),H=j.context;H.scale(1/h,1/x),H.translate(-Z,-A),H.transform(...M),F.smask?this.smaskStack.push({canvas:j.canvas,context:H,offsetX:Z,offsetY:A,scaleX:h,scaleY:x,subtype:F.smask.subtype,backdrop:F.smask.backdrop,transferMap:F.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(Z,A),b.scale(h,x),b.save()),v(b,H),this.ctx=H,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(b),this.groupLevel++}endGroup(F){if(!this.contentVisible)return;this.groupLevel--;const b=this.ctx,M=this.groupStack.pop();if(this.ctx=M,this.ctx.imageSmoothingEnabled=!1,F.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const U=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...U);const z=i.Util.getAxialAlignedBoundingBox([0,0,b.canvas.width,b.canvas.height],U);this.ctx.drawImage(b.canvas,0,0),this.ctx.restore(),this.compose(z)}}beginAnnotation(F,b,M,U,z){if(de(this,se,yt).call(this),y(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(b)&&b.length===4){const Z=b[2]-b[0],A=b[3]-b[1];if(z&&this.annotationCanvasMap){M=M.slice(),M[4]-=b[0],M[5]-=b[1],b=b.slice(),b[0]=b[1]=0,b[2]=Z,b[3]=A;const[w,$]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:h}=this,x=Math.ceil(Z*this.outputScaleX*h),L=Math.ceil(A*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(x,L);const{canvas:j,context:H}=this.annotationCanvas;this.annotationCanvasMap.set(F,j),this.annotationCanvas.savedCtx=this.ctx,this.ctx=H,this.ctx.save(),this.ctx.setTransform(w,0,0,-$,0,A*$),y(this.ctx)}else y(this.ctx),this.ctx.rect(b[0],b[1],Z,A),this.ctx.clip(),this.endPath()}this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...M),this.transform(...U)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),de(this,Ee,Et).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(F){if(!this.contentVisible)return;const b=F.count;F=this.getObject(F.data,F),F.count=b;const M=this.ctx,U=this.processingType3;if(U&&(U.compiled===void 0&&(U.compiled=O(F)),U.compiled)){U.compiled(M);return}const z=this._createMaskCanvas(F),Z=z.canvas;M.save(),M.setTransform(1,0,0,1,0,0),M.drawImage(Z,z.offsetX,z.offsetY),M.restore(),this.compose()}paintImageMaskXObjectRepeat(F,b,M=0,U=0,z,Z){if(!this.contentVisible)return;F=this.getObject(F.data,F);const A=this.ctx;A.save();const w=(0,s.getCurrentTransform)(A);A.transform(b,M,U,z,0,0);const $=this._createMaskCanvas(F);A.setTransform(1,0,0,1,$.offsetX-w[4],$.offsetY-w[5]);for(let h=0,x=Z.length;h<x;h+=2){const L=i.Util.transform(w,[b,M,U,z,Z[h],Z[h+1]]),[j,H]=i.Util.applyTransform([0,0],L);A.drawImage($.canvas,j,H)}A.restore(),this.compose()}paintImageMaskXObjectGroup(F){if(!this.contentVisible)return;const b=this.ctx,M=this.current.fillColor,U=this.current.patternFill;for(const z of F){const{data:Z,width:A,height:w,transform:$}=z,h=this.cachedCanvases.getCanvas("maskCanvas",A,w),x=h.context;x.save();const L=this.getObject(Z,z);o(x,L),x.globalCompositeOperation="source-in",x.fillStyle=U?M.getPattern(x,this,(0,s.getCurrentTransformInverse)(b),a.PathType.FILL):M,x.fillRect(0,0,A,w),x.restore(),b.save(),b.transform(...$),b.scale(1,-1),u(b,h.canvas,0,0,A,w,0,-1,1,1),b.restore()}this.compose()}paintImageXObject(F){if(!this.contentVisible)return;const b=this.getObject(F);if(!b){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(b)}paintImageXObjectRepeat(F,b,M,U){if(!this.contentVisible)return;const z=this.getObject(F);if(!z){(0,i.warn)("Dependent image isn't ready yet");return}const Z=z.width,A=z.height,w=[];for(let $=0,h=U.length;$<h;$+=2)w.push({transform:[b,0,0,M,U[$],U[$+1]],x:0,y:0,w:Z,h:A});this.paintInlineImageXObjectGroup(z,w)}applyTransferMapsToCanvas(F){return this.current.transferMaps!=="none"&&(F.filter=this.current.transferMaps,F.drawImage(F.canvas,0,0),F.filter="none"),F.canvas}applyTransferMapsToBitmap(F){if(this.current.transferMaps==="none")return F.bitmap;const{bitmap:b,width:M,height:U}=F,z=this.cachedCanvases.getCanvas("inlineImage",M,U),Z=z.context;return Z.filter=this.current.transferMaps,Z.drawImage(b,0,0),Z.filter="none",z.canvas}paintInlineImageXObject(F){if(!this.contentVisible)return;const b=F.width,M=F.height,U=this.ctx;this.save(),m.isNodeJS||(U.filter="none"),U.scale(1/b,-1/M);let z;if(F.bitmap)z=this.applyTransferMapsToBitmap(F);else if(typeof HTMLElement=="function"&&F instanceof HTMLElement||!F.data)z=F;else{const w=this.cachedCanvases.getCanvas("inlineImage",b,M).context;g(w,F),z=this.applyTransferMapsToCanvas(w)}const Z=this._scaleImage(z,(0,s.getCurrentTransformInverse)(U));U.imageSmoothingEnabled=V((0,s.getCurrentTransform)(U),F.interpolate),u(U,Z.img,0,0,Z.paintWidth,Z.paintHeight,0,-M,b,M),this.compose(),this.restore()}paintInlineImageXObjectGroup(F,b){if(!this.contentVisible)return;const M=this.ctx;let U;if(F.bitmap)U=F.bitmap;else{const z=F.width,Z=F.height,w=this.cachedCanvases.getCanvas("inlineImage",z,Z).context;g(w,F),U=this.applyTransferMapsToCanvas(w)}for(const z of b)M.save(),M.transform(...z.transform),M.scale(1,-1),u(M,U,z.x,z.y,z.w,z.h,0,-1,1,1),M.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(F){}markPointProps(F,b){}beginMarkedContent(F){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(F,b){F==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(b)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(F){const b=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(F);const M=this.ctx;this.pendingClip&&(b||(this.pendingClip===le?M.clip("evenodd"):M.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),M.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const F=(0,s.getCurrentTransform)(this.ctx);if(F[1]===0&&F[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(F[0]),Math.abs(F[3]));else{const b=Math.abs(F[0]*F[3]-F[2]*F[1]),M=Math.hypot(F[0],F[2]),U=Math.hypot(F[1],F[3]);this._cachedGetSinglePixelWidth=Math.max(M,U)/b}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:F}=this.current,b=(0,s.getCurrentTransform)(this.ctx);let M,U;if(b[1]===0&&b[2]===0){const z=Math.abs(b[0]),Z=Math.abs(b[3]);if(F===0)M=1/z,U=1/Z;else{const A=z*F,w=Z*F;M=A<1?1/A:1,U=w<1?1/w:1}}else{const z=Math.abs(b[0]*b[3]-b[2]*b[1]),Z=Math.hypot(b[0],b[1]),A=Math.hypot(b[2],b[3]);if(F===0)M=A/z,U=Z/z;else{const w=F*z;M=A>w?A/w:1,U=Z>w?Z/w:1}}this._cachedScaleForStroking=[M,U]}return this._cachedScaleForStroking}rescaleAndStroke(F){const{ctx:b}=this,{lineWidth:M}=this.current,[U,z]=this.getScaleForStroking();if(b.lineWidth=M||1,U===1&&z===1){b.stroke();return}let Z,A,w;F&&(Z=(0,s.getCurrentTransform)(b),A=b.getLineDash().slice(),w=b.lineDashOffset),b.scale(U,z);const $=Math.max(U,z);b.setLineDash(b.getLineDash().map(h=>h/$)),b.lineDashOffset/=$,b.stroke(),F&&(b.setTransform(...Z),b.setLineDash(A),b.lineDashOffset=w)}isContentVisible(){for(let F=this.markedContentStack.length-1;F>=0;F--)if(!this.markedContentStack[F].visible)return!1;return!0}};let oe=ve;se=new WeakSet,yt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ee=new WeakSet,Et=function(){if(this.pageColors){const F=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(F!=="none"){const b=this.ctx.filter;this.ctx.filter=F,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=b}}},t.CanvasGraphics=oe;for(const K in i.OPS)oe.prototype[K]!==void 0&&(oe.prototype[i.OPS[K]]=oe.prototype[K])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=P;var i=n(1),s=n(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=a;function f(u,O){if(!O)return;const k=O[2]-O[0],g=O[3]-O[1],o=new Path2D;o.rect(O[0],O[1],k,g),u.clip(o)}class m{constructor(){this.constructor===m&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class _ extends m{constructor(O){super(),this._type=O[1],this._bbox=O[2],this._colorStops=O[3],this._p0=O[4],this._p1=O[5],this._r0=O[6],this._r1=O[7],this.matrix=null}_createGradient(O){let k;this._type==="axial"?k=O.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(k=O.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const g of this._colorStops)k.addColorStop(g[0],g[1]);return k}getPattern(O,k,g,o){let v;if(o===a.STROKE||o===a.FILL){const y=k.current.getClippedPathBoundingBox(o,(0,s.getCurrentTransform)(O))||[0,0,0,0],p=Math.ceil(y[2]-y[0])||1,C=Math.ceil(y[3]-y[1])||1,B=k.cachedCanvases.getCanvas("pattern",p,C,!0),S=B.context;S.clearRect(0,0,S.canvas.width,S.canvas.height),S.beginPath(),S.rect(0,0,S.canvas.width,S.canvas.height),S.translate(-y[0],-y[1]),g=i.Util.transform(g,[1,0,0,1,y[0],y[1]]),S.transform(...k.baseTransform),this.matrix&&S.transform(...this.matrix),f(S,this._bbox),S.fillStyle=this._createGradient(S),S.fill(),v=O.createPattern(B.canvas,"no-repeat");const W=new DOMMatrix(g);v.setTransform(W)}else f(O,this._bbox),v=this._createGradient(O);return v}}function l(u,O,k,g,o,v,y,p){const C=O.coords,B=O.colors,S=u.data,W=u.width*4;let V;C[k+1]>C[g+1]&&(V=k,k=g,g=V,V=v,v=y,y=V),C[g+1]>C[o+1]&&(V=g,g=o,o=V,V=y,y=p,p=V),C[k+1]>C[g+1]&&(V=k,k=g,g=V,V=v,v=y,y=V);const Y=(C[k]+O.offsetX)*O.scaleX,ee=(C[k+1]+O.offsetY)*O.scaleY,re=(C[g]+O.offsetX)*O.scaleX,le=(C[g+1]+O.offsetY)*O.scaleY,oe=(C[o]+O.offsetX)*O.scaleX,se=(C[o+1]+O.offsetY)*O.scaleY;if(ee>=se)return;const me=B[v],Ee=B[v+1],we=B[v+2],ve=B[y],K=B[y+1],F=B[y+2],b=B[p],M=B[p+1],U=B[p+2],z=Math.round(ee),Z=Math.round(se);let A,w,$,h,x,L,j,H;for(let X=z;X<=Z;X++){if(X<le){let J;X<ee?J=0:J=(ee-X)/(ee-le),A=Y-(Y-re)*J,w=me-(me-ve)*J,$=Ee-(Ee-K)*J,h=we-(we-F)*J}else{let J;X>se?J=1:le===se?J=0:J=(le-X)/(le-se),A=re-(re-oe)*J,w=ve-(ve-b)*J,$=K-(K-M)*J,h=F-(F-U)*J}let ae;X<ee?ae=0:X>se?ae=1:ae=(ee-X)/(ee-se),x=Y-(Y-oe)*ae,L=me-(me-b)*ae,j=Ee-(Ee-M)*ae,H=we-(we-U)*ae;const ne=Math.round(Math.min(A,x)),ce=Math.round(Math.max(A,x));let he=W*X+ne*4;for(let J=ne;J<=ce;J++)ae=(A-J)/(A-x),ae<0?ae=0:ae>1&&(ae=1),S[he++]=w-(w-L)*ae|0,S[he++]=$-($-j)*ae|0,S[he++]=h-(h-H)*ae|0,S[he++]=255}}function c(u,O,k){const g=O.coords,o=O.colors;let v,y;switch(O.type){case"lattice":const p=O.verticesPerRow,C=Math.floor(g.length/p)-1,B=p-1;for(v=0;v<C;v++){let S=v*p;for(let W=0;W<B;W++,S++)l(u,k,g[S],g[S+1],g[S+p],o[S],o[S+1],o[S+p]),l(u,k,g[S+p+1],g[S+1],g[S+p],o[S+p+1],o[S+1],o[S+p])}break;case"triangles":for(v=0,y=g.length;v<y;v+=3)l(u,k,g[v],g[v+1],g[v+2],o[v],o[v+1],o[v+2]);break;default:throw new Error("illegal figure")}}class I extends m{constructor(O){super(),this._coords=O[2],this._colors=O[3],this._figures=O[4],this._bounds=O[5],this._bbox=O[7],this._background=O[8],this.matrix=null}_createMeshCanvas(O,k,g){const p=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),B=Math.ceil(this._bounds[2])-p,S=Math.ceil(this._bounds[3])-C,W=Math.min(Math.ceil(Math.abs(B*O[0]*1.1)),3e3),V=Math.min(Math.ceil(Math.abs(S*O[1]*1.1)),3e3),Y=B/W,ee=S/V,re={coords:this._coords,colors:this._colors,offsetX:-p,offsetY:-C,scaleX:1/Y,scaleY:1/ee},le=W+2*2,oe=V+2*2,se=g.getCanvas("mesh",le,oe,!1),me=se.context,Ee=me.createImageData(W,V);if(k){const ve=Ee.data;for(let K=0,F=ve.length;K<F;K+=4)ve[K]=k[0],ve[K+1]=k[1],ve[K+2]=k[2],ve[K+3]=255}for(const ve of this._figures)c(Ee,ve,re);return me.putImageData(Ee,2,2),{canvas:se.canvas,offsetX:p-2*Y,offsetY:C-2*ee,scaleX:Y,scaleY:ee}}getPattern(O,k,g,o){f(O,this._bbox);let v;if(o===a.SHADING)v=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(O));else if(v=i.Util.singularValueDecompose2dScale(k.baseTransform),this.matrix){const p=i.Util.singularValueDecompose2dScale(this.matrix);v=[v[0]*p[0],v[1]*p[1]]}const y=this._createMeshCanvas(v,o===a.SHADING?null:this._background,k.cachedCanvases);return o!==a.SHADING&&(O.setTransform(...k.baseTransform),this.matrix&&O.transform(...this.matrix)),O.translate(y.offsetX,y.offsetY),O.scale(y.scaleX,y.scaleY),O.createPattern(y.canvas,"no-repeat")}}class D extends m{getPattern(){return"hotpink"}}function P(u){switch(u[0]){case"RadialAxial":return new _(u);case"Mesh":return new I(u);case"Dummy":return new D}throw new Error(`Unknown IR type: ${u[0]}`)}const E={COLORED:1,UNCOLORED:2},d=class{constructor(O,k,g,o,v){this.operatorList=O[2],this.matrix=O[3]||[1,0,0,1,0,0],this.bbox=O[4],this.xstep=O[5],this.ystep=O[6],this.paintType=O[7],this.tilingType=O[8],this.color=k,this.ctx=g,this.canvasGraphicsFactory=o,this.baseTransform=v}createPatternCanvas(O){const k=this.operatorList,g=this.bbox,o=this.xstep,v=this.ystep,y=this.paintType,p=this.tilingType,C=this.color,B=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+p);const S=g[0],W=g[1],V=g[2],Y=g[3],ee=i.Util.singularValueDecompose2dScale(this.matrix),re=i.Util.singularValueDecompose2dScale(this.baseTransform),le=[ee[0]*re[0],ee[1]*re[1]],oe=this.getSizeAndScale(o,this.ctx.canvas.width,le[0]),se=this.getSizeAndScale(v,this.ctx.canvas.height,le[1]),me=O.cachedCanvases.getCanvas("pattern",oe.size,se.size,!0),Ee=me.context,we=B.createCanvasGraphics(Ee);we.groupLevel=O.groupLevel,this.setFillAndStrokeStyleToContext(we,y,C);let ve=S,K=W,F=V,b=Y;return S<0&&(ve=0,F+=Math.abs(S)),W<0&&(K=0,b+=Math.abs(W)),Ee.translate(-(oe.scale*ve),-(se.scale*K)),we.transform(oe.scale,0,0,se.scale,0,0),Ee.save(),this.clipBbox(we,ve,K,F,b),we.baseTransform=(0,s.getCurrentTransform)(we.ctx),we.executeOperatorList(k),we.endDrawing(),{canvas:me.canvas,scaleX:oe.scale,scaleY:se.scale,offsetX:ve,offsetY:K}}getSizeAndScale(O,k,g){O=Math.abs(O);const o=Math.max(d.MAX_PATTERN_SIZE,k);let v=Math.ceil(O*g);return v>=o?v=o:g=v/O,{scale:g,size:v}}clipBbox(O,k,g,o,v){const y=o-k,p=v-g;O.ctx.rect(k,g,y,p),O.current.updateRectMinMax((0,s.getCurrentTransform)(O.ctx),[k,g,o,v]),O.clip(),O.endPath()}setFillAndStrokeStyleToContext(O,k,g){const o=O.ctx,v=O.current;switch(k){case E.COLORED:const y=this.ctx;o.fillStyle=y.fillStyle,o.strokeStyle=y.strokeStyle,v.fillColor=y.fillStyle,v.strokeColor=y.strokeStyle;break;case E.UNCOLORED:const p=i.Util.makeHexColor(g[0],g[1],g[2]);o.fillStyle=p,o.strokeStyle=p,v.fillColor=p,v.strokeColor=p;break;default:throw new i.FormatError(`Unsupported paint type: ${k}`)}}getPattern(O,k,g,o){let v=g;o!==a.SHADING&&(v=i.Util.transform(v,k.baseTransform),this.matrix&&(v=i.Util.transform(v,this.matrix)));const y=this.createPatternCanvas(k);let p=new DOMMatrix(v);p=p.translate(y.offsetX,y.offsetY),p=p.scale(1/y.scaleX,1/y.scaleY);const C=O.createPattern(y.canvas,"repeat");return C.setTransform(p),C}};let T=d;Ie(T,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=T},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=a,t.convertToRGBA=s,t.grayToRGBA=m;var i=n(1);function s(_){switch(_.kind){case i.ImageKind.GRAYSCALE_1BPP:return a(_);case i.ImageKind.RGB_24BPP:return f(_)}return null}function a({src:_,srcPos:l=0,dest:c,width:I,height:D,nonBlackColor:P=4294967295,inverseDecode:E=!1}){const T=i.FeatureTest.isLittleEndian?4278190080:255,[d,u]=E?[P,T]:[T,P],O=I>>3,k=I&7,g=_.length;c=new Uint32Array(c.buffer);let o=0;for(let v=0;v<D;v++){for(const p=l+O;l<p;l++){const C=l<g?_[l]:255;c[o++]=C&128?u:d,c[o++]=C&64?u:d,c[o++]=C&32?u:d,c[o++]=C&16?u:d,c[o++]=C&8?u:d,c[o++]=C&4?u:d,c[o++]=C&2?u:d,c[o++]=C&1?u:d}if(k===0)continue;const y=l<g?_[l++]:255;for(let p=0;p<k;p++)c[o++]=y&1<<7-p?u:d}return{srcPos:l,destPos:o}}function f({src:_,srcPos:l=0,dest:c,destPos:I=0,width:D,height:P}){let E=0;const T=_.length>>2,d=new Uint32Array(_.buffer,l,T);if(i.FeatureTest.isLittleEndian){for(;E<T-2;E+=3,I+=4){const u=d[E],O=d[E+1],k=d[E+2];c[I]=u|4278190080,c[I+1]=u>>>24|O<<8|4278190080,c[I+2]=O>>>16|k<<16|4278190080,c[I+3]=k>>>8|4278190080}for(let u=E*4,O=_.length;u<O;u+=3)c[I++]=_[u]|_[u+1]<<8|_[u+2]<<16|4278190080}else{for(;E<T-2;E+=3,I+=4){const u=d[E],O=d[E+1],k=d[E+2];c[I]=u|255,c[I+1]=u<<24|O>>>8|255,c[I+2]=O<<16|k>>>16|255,c[I+3]=k<<8|255}for(let u=E*4,O=_.length;u<O;u+=3)c[I++]=_[u]<<24|_[u+1]<<16|_[u+2]<<8|255}return{srcPos:l,destPos:I}}function m(_,l){if(i.FeatureTest.isLittleEndian)for(let c=0,I=_.length;c<I;c++)l[c]=_[c]*65793|4278190080;else for(let c=0,I=_.length;c<I;c++)l[c]=_[c]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{var _,qt,c,Wt,D,lt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=n(1);const s={UNKNOWN:0,DATA:1,ERROR:2},a={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new i.AbortException(E.message);case"MissingPDFException":return new i.MissingPDFException(E.message);case"PasswordException":return new i.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new i.UnknownErrorException(E.message,E.details);default:return new i.UnknownErrorException(E.message,E.toString())}}class m{constructor(T,d,u){ie(this,_);ie(this,c);ie(this,D);this.sourceName=T,this.targetName=d,this.comObj=u,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=O=>{const k=O.data;if(k.targetName!==this.sourceName)return;if(k.stream){de(this,c,Wt).call(this,k);return}if(k.callback){const o=k.callbackId,v=this.callbackCapabilities[o];if(!v)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],k.callback===s.DATA)v.resolve(k.data);else if(k.callback===s.ERROR)v.reject(f(k.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[k.action];if(!g)throw new Error(`Unknown action from worker: ${k.action}`);if(k.callbackId){const o=this.sourceName,v=k.sourceName;new Promise(function(y){y(g(k.data))}).then(function(y){u.postMessage({sourceName:o,targetName:v,callback:s.DATA,callbackId:k.callbackId,data:y})},function(y){u.postMessage({sourceName:o,targetName:v,callback:s.ERROR,callbackId:k.callbackId,reason:f(y)})});return}if(k.streamId){de(this,_,qt).call(this,k);return}g(k.data)},u.addEventListener("message",this._onComObjOnMessage)}on(T,d){const u=this.actionHandler;if(u[T])throw new Error(`There is already an actionName called "${T}"`);u[T]=d}send(T,d,u){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:d},u)}sendWithPromise(T,d,u){const O=this.callbackId++,k=new i.PromiseCapability;this.callbackCapabilities[O]=k;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:O,data:d},u)}catch(g){k.reject(g)}return k.promise}sendWithStream(T,d,u,O){const k=this.streamId++,g=this.sourceName,o=this.targetName,v=this.comObj;return new ReadableStream({start:y=>{const p=new i.PromiseCapability;return this.streamControllers[k]={controller:y,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},v.postMessage({sourceName:g,targetName:o,action:T,streamId:k,data:d,desiredSize:y.desiredSize},O),p.promise},pull:y=>{const p=new i.PromiseCapability;return this.streamControllers[k].pullCall=p,v.postMessage({sourceName:g,targetName:o,stream:a.PULL,streamId:k,desiredSize:y.desiredSize}),p.promise},cancel:y=>{(0,i.assert)(y instanceof Error,"cancel must have a valid reason");const p=new i.PromiseCapability;return this.streamControllers[k].cancelCall=p,this.streamControllers[k].isClosed=!0,v.postMessage({sourceName:g,targetName:o,stream:a.CANCEL,streamId:k,reason:f(y)}),p.promise}},u)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}_=new WeakSet,qt=function(T){const d=T.streamId,u=this.sourceName,O=T.sourceName,k=this.comObj,g=this,o=this.actionHandler[T.action],v={enqueue(y,p=1,C){if(this.isCancelled)return;const B=this.desiredSize;this.desiredSize-=p,B>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),k.postMessage({sourceName:u,targetName:O,stream:a.ENQUEUE,streamId:d,chunk:y},C)},close(){this.isCancelled||(this.isCancelled=!0,k.postMessage({sourceName:u,targetName:O,stream:a.CLOSE,streamId:d}),delete g.streamSinks[d])},error(y){(0,i.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,k.postMessage({sourceName:u,targetName:O,stream:a.ERROR,streamId:d,reason:f(y)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[d]=v,new Promise(function(y){y(o(T.data,v))}).then(function(){k.postMessage({sourceName:u,targetName:O,stream:a.START_COMPLETE,streamId:d,success:!0})},function(y){k.postMessage({sourceName:u,targetName:O,stream:a.START_COMPLETE,streamId:d,reason:f(y)})})},c=new WeakSet,Wt=function(T){const d=T.streamId,u=this.sourceName,O=T.sourceName,k=this.comObj,g=this.streamControllers[d],o=this.streamSinks[d];switch(T.stream){case a.START_COMPLETE:T.success?g.startCall.resolve():g.startCall.reject(f(T.reason));break;case a.PULL_COMPLETE:T.success?g.pullCall.resolve():g.pullCall.reject(f(T.reason));break;case a.PULL:if(!o){k.postMessage({sourceName:u,targetName:O,stream:a.PULL_COMPLETE,streamId:d,success:!0});break}o.desiredSize<=0&&T.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=T.desiredSize,new Promise(function(v){var y;v((y=o.onPull)==null?void 0:y.call(o))}).then(function(){k.postMessage({sourceName:u,targetName:O,stream:a.PULL_COMPLETE,streamId:d,success:!0})},function(v){k.postMessage({sourceName:u,targetName:O,stream:a.PULL_COMPLETE,streamId:d,reason:f(v)})});break;case a.ENQUEUE:if((0,i.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(T.chunk);break;case a.CLOSE:if((0,i.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),de(this,D,lt).call(this,g,d);break;case a.ERROR:(0,i.assert)(g,"error should have stream controller"),g.controller.error(f(T.reason)),de(this,D,lt).call(this,g,d);break;case a.CANCEL_COMPLETE:T.success?g.cancelCall.resolve():g.cancelCall.reject(f(T.reason)),de(this,D,lt).call(this,g,d);break;case a.CANCEL:if(!o)break;new Promise(function(v){var y;v((y=o.onCancel)==null?void 0:y.call(o,f(T.reason)))}).then(function(){k.postMessage({sourceName:u,targetName:O,stream:a.CANCEL_COMPLETE,streamId:d,success:!0})},function(v){k.postMessage({sourceName:u,targetName:O,stream:a.CANCEL_COMPLETE,streamId:d,reason:f(v)})}),o.sinkCapability.reject(f(T.reason)),o.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}},D=new WeakSet,lt=async function(T,d){var u,O,k;await Promise.allSettled([(u=T.startCall)==null?void 0:u.promise,(O=T.pullCall)==null?void 0:O.promise,(k=T.cancelCall)==null?void 0:k.promise]),delete this.streamControllers[d]},t.MessageHandler=m},(e,t,n)=>{var a,f;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=n(1);class s{constructor({parsedData:_,rawData:l}){ie(this,a,void 0);ie(this,f,void 0);_e(this,a,_),_e(this,f,l)}getRaw(){return N(this,f)}get(_){var l;return(l=N(this,a).get(_))!=null?l:null}getAll(){return(0,i.objectFromMap)(N(this,a))}has(_){return N(this,a).has(_)}}a=new WeakMap,f=new WeakMap,t.Metadata=s},(e,t,n)=>{var _,l,c,I,D,P,At;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=n(1),s=n(8);const a=Symbol("INTERNAL");class f{constructor(d,u){ie(this,_,!0);this.name=d,this.intent=u}get visible(){return N(this,_)}_setVisible(d,u){d!==a&&(0,i.unreachable)("Internal method `_setVisible` called."),_e(this,_,u)}}_=new WeakMap;class m{constructor(d){ie(this,P);ie(this,l,null);ie(this,c,new Map);ie(this,I,null);ie(this,D,null);if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,_e(this,D,d.order);for(const u of d.groups)N(this,c).set(u.id,new f(u.name,u.intent));if(d.baseState==="OFF")for(const u of N(this,c).values())u._setVisible(a,!1);for(const u of d.on)N(this,c).get(u)._setVisible(a,!0);for(const u of d.off)N(this,c).get(u)._setVisible(a,!1);_e(this,I,this.getHash())}}isVisible(d){if(N(this,c).size===0)return!0;if(!d)return(0,i.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return N(this,c).has(d.id)?N(this,c).get(d.id).visible:((0,i.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return de(this,P,At).call(this,d.expression);if(!d.policy||d.policy==="AnyOn"){for(const u of d.ids){if(!N(this,c).has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(N(this,c).get(u).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const u of d.ids){if(!N(this,c).has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(!N(this,c).get(u).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const u of d.ids){if(!N(this,c).has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(!N(this,c).get(u).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const u of d.ids){if(!N(this,c).has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(N(this,c).get(u).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,i.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,u=!0){if(!N(this,c).has(d)){(0,i.warn)(`Optional content group not found: ${d}`);return}N(this,c).get(d)._setVisible(a,!!u),_e(this,l,null)}get hasInitialVisibility(){return this.getHash()===N(this,I)}getOrder(){return N(this,c).size?N(this,D)?N(this,D).slice():[...N(this,c).keys()]:null}getGroups(){return N(this,c).size>0?(0,i.objectFromMap)(N(this,c)):null}getGroup(d){return N(this,c).get(d)||null}getHash(){if(N(this,l)!==null)return N(this,l);const d=new s.MurmurHash3_64;for(const[u,O]of N(this,c))d.update(`${u}:${O.visible}`);return _e(this,l,d.hexdigest())}}l=new WeakMap,c=new WeakMap,I=new WeakMap,D=new WeakMap,P=new WeakSet,At=function(d){const u=d.length;if(u<2)return!0;const O=d[0];for(let k=1;k<u;k++){const g=d[k];let o;if(Array.isArray(g))o=de(this,P,At).call(this,g);else if(N(this,c).has(g))o=N(this,c).get(g).visible;else return(0,i.warn)(`Optional content group not found: ${g}`),!0;switch(O){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return O==="And"},t.OptionalContentConfig=m},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=n(1),s=n(6);class a{constructor({length:l,initialData:c,progressiveDone:I=!1,contentDispositionFilename:D=null,disableRange:P=!1,disableStream:E=!1},T){if((0,i.assert)(T,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=D,(c==null?void 0:c.length)>0){const d=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=T,this._isStreamingSupported=!E,this._isRangeSupported=!P,this._contentLength=l,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,u)=>{this._onReceiveData({begin:d,chunk:u})}),this._pdfDataRangeTransport.addProgressListener((d,u)=>{this._onProgress({loaded:d,total:u})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:l,chunk:c}){const I=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(l===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const D=this._rangeReaders.some(function(P){return P._begin!==l?!1:(P._enqueue(I),!0)});(0,i.assert)(D,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var l,c;return(c=(l=this._fullRequestReader)==null?void 0:l._loaded)!=null?c:0}_onProgress(l){var c,I,D,P;l.total===void 0?(I=(c=this._rangeReaders[0])==null?void 0:c.onProgress)==null||I.call(c,{loaded:l.loaded}):(P=(D=this._fullRequestReader)==null?void 0:D.onProgress)==null||P.call(D,{loaded:l.loaded,total:l.total})}_onProgressiveDone(){var l;(l=this._fullRequestReader)==null||l.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(l){const c=this._rangeReaders.indexOf(l);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const l=this._queuedChunks;return this._queuedChunks=null,new f(this,l,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(l,c){if(c<=this._progressiveDataLength)return null;const I=new m(this,l,c);return this._pdfDataRangeTransport.requestDataRange(l,c),this._rangeReaders.push(I),I}cancelAllRequests(l){var c;(c=this._fullRequestReader)==null||c.cancel(l);for(const I of this._rangeReaders.slice(0))I.cancel(l);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=a;class f{constructor(l,c,I=!1,D=null){this._stream=l,this._done=I||!1,this._filename=(0,s.isPdfFile)(D)?D:null,this._queuedChunks=c||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),l._fullRequestReader=this,this.onProgress=null}_enqueue(l){this._done||(this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunks.push(l),this._loaded+=l.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=new i.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(l,c,I){this._stream=l,this._begin=c,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(l){if(!this._done){if(this._requests.length===0)this._queuedChunk=l;else{this._requests.shift().resolve({value:l,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const l=new i.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(s){const a=[],f={items:a,styles:Object.create(null)};function m(_){var I;if(!_)return;let l=null;const c=_.name;if(c==="#text")l=_.value;else if(n.shouldBuildText(c))(I=_==null?void 0:_.attributes)!=null&&I.textContent?l=_.attributes.textContent:_.value&&(l=_.value);else return;if(l!==null&&a.push({str:l}),!!_.children)for(const D of _.children)m(D)}return m(s),f}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=n(7);const s=function(l){return new Promise((c,I)=>{require$$3$1.readFile(l,(P,E)=>{if(P||!E){I(new Error(P));return}c(new Uint8Array(E))})})};class a extends i.BaseFilterFactory{}t.NodeFilterFactory=a;class f extends i.BaseCanvasFactory{_createCanvas(c,I){return require$$3$1.createCanvas(c,I)}}t.NodeCanvasFactory=f;class m extends i.BaseCMapReaderFactory{_fetchData(c,I){return s(c).then(D=>({cMapData:D,compressionType:I}))}}t.NodeCMapReaderFactory=m;class _ extends i.BaseStandardFontDataFactory{_fetchData(c){return s(c)}}t.NodeStandardFontDataFactory=_},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=n(1),s=n(22);const a=require$$3$1,f=require$$3$1,m=require$$3$1,_=require$$4,l=/^file:\/\/\/[a-zA-Z]:\//;function c(k){const g=_.parse(k);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(k)?_.parse(`file:///${k}`):(g.host||(g.protocol="file:"),g)}class I{constructor(g){this.source=g,this.url=c(g.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g,o;return(o=(g=this._fullRequestReader)==null?void 0:g._loaded)!=null?o:0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new T(this),this._fullRequestReader}getRangeReader(g,o){if(o<=this._progressiveDataLength)return null;const v=this.isFsUrl?new O(this,g,o):new d(this,g,o);return this._rangeRequestReaders.push(v),v}cancelAllRequests(g){var o;(o=this._fullRequestReader)==null||o.cancel(g);for(const v of this._rangeRequestReaders.slice(0))v.cancel(g)}}t.PDFNodeStream=I;class D{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=g.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=g.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const o=g.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=g.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function E(k,g){return{protocol:k.protocol,auth:k.auth,host:k.hostname,port:k.port,path:k.path,method:"GET",headers:g}}class T extends D{constructor(g){super(g);const o=v=>{if(v.statusCode===404){const B=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=B,this._headersCapability.reject(B);return}this._headersCapability.resolve(),this._setReadableStream(v);const y=B=>this._readableStream.headers[B.toLowerCase()],{allowRangeRequests:p,suggestedLength:C}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=C||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(y)};this._request=null,this._url.protocol==="http:"?this._request=f.request(E(this._url,g.httpHeaders),o):this._request=m.request(E(this._url,g.httpHeaders),o),this._request.on("error",v=>{this._storedError=v,this._headersCapability.reject(v)}),this._request.end()}}class d extends P{constructor(g,o,v){super(g),this._httpHeaders={};for(const p in g.httpHeaders){const C=g.httpHeaders[p];C!==void 0&&(this._httpHeaders[p]=C)}this._httpHeaders.Range=`bytes=${o}-${v-1}`;const y=p=>{if(p.statusCode===404){const C=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(p)};this._request=null,this._url.protocol==="http:"?this._request=f.request(E(this._url,this._httpHeaders),y):this._request=m.request(E(this._url,this._httpHeaders),y),this._request.on("error",p=>{this._storedError=p}),this._request.end()}}class u extends D{constructor(g){super(g);let o=decodeURIComponent(this._url.path);l.test(this._url.href)&&(o=o.replace(/^\//,"")),a.lstat(o,(v,y)=>{if(v){v.code==="ENOENT"&&(v=new i.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=v,this._headersCapability.reject(v);return}this._contentLength=y.size,this._setReadableStream(a.createReadStream(o)),this._headersCapability.resolve()})}}class O extends P{constructor(g,o,v){super(g);let y=decodeURIComponent(this._url.path);l.test(this._url.href)&&(y=y.replace(/^\//,"")),this._setReadableStream(a.createReadStream(y,{start:o,end:v-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=_,t.extractFilenameFromHeader=m,t.validateRangeRequestCapabilities=f,t.validateResponseStatus=l;var i=n(1),s=n(23),a=n(6);function f({getResponseHeader:c,isHttp:I,rangeChunkSize:D,disableRange:P}){const E={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(c("Content-Length"),10);return!Number.isInteger(T)||(E.suggestedLength=T,T<=2*D)||P||!I||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(E.allowRangeRequests=!0),E}function m(c){const I=c("Content-Disposition");if(I){let D=(0,s.getFilenameFromContentDispositionHeader)(I);if(D.includes("%"))try{D=decodeURIComponent(D)}catch{}if((0,a.isPdfFile)(D))return D}return null}function _(c,I){return c===404||c===0&&I.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+I+'".'):new i.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${I}".`,c)}function l(c){return c===200||c===206}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=s;var i=n(1);function s(a){let f=!0,m=_("filename\\*","i").exec(a);if(m){m=m[1];let T=D(m);return T=unescape(T),T=P(T),T=E(T),c(T)}if(m=I(a),m){const T=E(m);return c(T)}if(m=_("filename","i").exec(a),m){m=m[1];let T=D(m);return T=E(T),c(T)}function _(T,d){return new RegExp("(?:^|;)\\s*"+T+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function l(T,d){if(T){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const u=new TextDecoder(T,{fatal:!0}),O=(0,i.stringToBytes)(d);d=u.decode(O),f=!1}catch{}}return d}function c(T){return f&&/[\x80-\xff]/.test(T)&&(T=l("utf-8",T),f&&(T=l("iso-8859-1",T))),T}function I(T){const d=[];let u;const O=_("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=O.exec(T))!==null;){let[,g,o,v]=u;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[o,v]}const k=[];for(let g=0;g<d.length&&g in d;++g){let[o,v]=d[g];v=D(v),o&&(v=unescape(v),g===0&&(v=P(v))),k.push(v)}return k.join("")}function D(T){if(T.startsWith('"')){const d=T.slice(1).split('\\"');for(let u=0;u<d.length;++u){const O=d[u].indexOf('"');O!==-1&&(d[u]=d[u].slice(0,O),d.length=u+1),d[u]=d[u].replaceAll(/\\(.)/g,"$1")}T=d.join('"')}return T}function P(T){const d=T.indexOf("'");if(d===-1)return T;const u=T.slice(0,d),k=T.slice(d+1).replace(/^[^']*'/,"");return l(u,k)}function E(T){return!T.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(T)?T:T.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,u,O,k){if(O==="q"||O==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,o){return String.fromCharCode(parseInt(o,16))}),l(u,k);try{k=atob(k)}catch{}return l(u,k)})}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=n(1),s=n(22);const a=200,f=206;function m(D){const P=D.response;return typeof P!="string"?P:(0,i.stringToBytes)(P).buffer}class _{constructor(P,E={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,E,T){const d={begin:P,end:E};for(const u in T)d[u]=T[u];return this.request(d)}requestFull(P){return this.request(P)}request(P){const E=new XMLHttpRequest,T=this.currXhrId++,d=this.pendingRequests[T]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const u in this.httpHeaders){const O=this.httpHeaders[u];O!==void 0&&E.setRequestHeader(u,O)}return this.isHttp&&"begin"in P&&"end"in P?(E.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),d.expectedStatus=f):d.expectedStatus=a,E.responseType="arraybuffer",P.onError&&(E.onerror=function(u){P.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,T),E.onprogress=this.onProgress.bind(this,T),d.onHeadersReceived=P.onHeadersReceived,d.onDone=P.onDone,d.onError=P.onError,d.onProgress=P.onProgress,E.send(null),T}onProgress(P,E){var d;const T=this.pendingRequests[P];!T||(d=T.onProgress)==null||d.call(T,E)}onStateChange(P,E){var g,o,v;const T=this.pendingRequests[P];if(!T)return;const d=T.xhr;if(d.readyState>=2&&T.onHeadersReceived&&(T.onHeadersReceived(),delete T.onHeadersReceived),d.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],d.status===0&&this.isHttp){(g=T.onError)==null||g.call(T,d.status);return}const u=d.status||a;if(!(u===a&&T.expectedStatus===f)&&u!==T.expectedStatus){(o=T.onError)==null||o.call(T,d.status);return}const k=m(d);if(u===f){const y=d.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);T.onDone({begin:parseInt(p[1],10),chunk:k})}else k?T.onDone({begin:0,chunk:k}):(v=T.onError)==null||v.call(T,d.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const E=this.pendingRequests[P].xhr;delete this.pendingRequests[P],E.abort()}}class l{constructor(P){this._source=P,this._manager=new _(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const E=this._rangeRequestReaders.indexOf(P);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(P,E){const T=new I(this._manager,P,E);return T.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(T),T}cancelAllRequests(P){var E;(E=this._fullRequestReader)==null||E.cancel(P);for(const T of this._rangeRequestReaders.slice(0))T.cancel(P)}}t.PDFNetworkStream=l;class c{constructor(P,E){this._manager=P;const T={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=P.requestFull(T),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,E=this._manager.getRequestXhr(P),T=O=>E.getResponseHeader(O),{allowRangeRequests:d,suggestedLength:u}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(T),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,s.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var E;(E=this.onProgress)==null||E.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=new i.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(P,E,T){this._manager=P;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(E,T,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)==null||P.call(this,this)}_onDone(P){const E=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,s.createResponseStatusError)(P,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){var E;this.isStreamingSupported||(E=this.onProgress)==null||E.call(this,{loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const P=new i.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=n(1),s=n(22);function a(I,D,P){return{method:"GET",headers:I,signal:P.signal,mode:"cors",credentials:D?"include":"same-origin",redirect:"follow"}}function f(I){const D=new Headers;for(const P in I){const E=I[P];E!==void 0&&D.append(P,E)}return D}function m(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,i.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class _{constructor(D){this.source=D,this.isHttp=/^https?:/i.test(D.url),this.httpHeaders=this.isHttp&&D.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var D,P;return(P=(D=this._fullRequestReader)==null?void 0:D._loaded)!=null?P:0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(D,P){if(P<=this._progressiveDataLength)return null;const E=new c(this,D,P);return this._rangeRequestReaders.push(E),E}cancelAllRequests(D){var P;(P=this._fullRequestReader)==null||P.cancel(D);for(const E of this._rangeRequestReaders.slice(0))E.cancel(D)}}t.PDFFetchStream=_;class l{constructor(D){this._stream=D,this._reader=null,this._loaded=0,this._filename=null;const P=D.source;this._withCredentials=P.withCredentials||!1,this._contentLength=P.length,this._headersCapability=new i.PromiseCapability,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._headers=f(this._stream.httpHeaders);const E=P.url;fetch(E,a(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,s.validateResponseStatus)(T.status))throw(0,s.createResponseStatusError)(T.status,E);this._reader=T.body.getReader(),this._headersCapability.resolve();const d=k=>T.headers.get(k),{allowRangeRequests:u,suggestedLength:O}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=O||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._headersCapability.promise;const{value:D,done:P}=await this._reader.read();return P?{value:D,done:P}:(this._loaded+=D.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:m(D),done:!1})}cancel(D){var P;(P=this._reader)==null||P.cancel(D),this._abortController.abort()}}class c{constructor(D,P,E){this._stream=D,this._reader=null,this._loaded=0;const T=D.source;this._withCredentials=T.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!T.disableStream,this._abortController=new AbortController,this._headers=f(this._stream.httpHeaders),this._headers.append("Range",`bytes=${P}-${E-1}`);const d=T.url;fetch(d,a(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,s.validateResponseStatus)(u.status))throw(0,s.createResponseStatusError)(u.status,d);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._readCapability.promise;const{value:D,done:P}=await this._reader.read();return P?{value:D,done:P}:(this._loaded+=D.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:m(D),done:!1})}cancel(D){var P;(P=this._reader)==null||P.cancel(D),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=T,t.updateTextLayer=d;var i=n(1),s=n(6);const a=1e5,f=30,m=.8,_=new Map;function l(u,O){let k;if(O&&i.FeatureTest.isOffscreenCanvasSupported)k=new OffscreenCanvas(u,u).getContext("2d",{alpha:!1});else{const g=document.createElement("canvas");g.width=g.height=u,k=g.getContext("2d",{alpha:!1})}return k}function c(u,O){const k=_.get(u);if(k)return k;const g=l(f,O);g.font=`${f}px ${u}`;const o=g.measureText("");let v=o.fontBoundingBoxAscent,y=Math.abs(o.fontBoundingBoxDescent);if(v){const C=v/(v+y);return _.set(u,C),g.canvas.width=g.canvas.height=0,C}g.strokeStyle="red",g.clearRect(0,0,f,f),g.strokeText("g",0,0);let p=g.getImageData(0,0,f,f).data;y=0;for(let C=p.length-1-3;C>=0;C-=4)if(p[C]>0){y=Math.ceil(C/4/f);break}g.clearRect(0,0,f,f),g.strokeText("A",0,f),p=g.getImageData(0,0,f,f).data,v=0;for(let C=0,B=p.length;C<B;C+=4)if(p[C]>0){v=f-Math.floor(C/4/f);break}if(g.canvas.width=g.canvas.height=0,v){const C=v/(v+y);return _.set(u,C),C}return _.set(u,m),m}function I(u,O,k){const g=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:O.str!=="",hasEOL:O.hasEOL,fontSize:0};u._textDivs.push(g);const v=i.Util.transform(u._transform,O.transform);let y=Math.atan2(v[1],v[0]);const p=k[O.fontName];p.vertical&&(y+=Math.PI/2);const C=Math.hypot(v[2],v[3]),B=C*c(p.fontFamily,u._isOffscreenCanvasSupported);let S,W;y===0?(S=v[4],W=v[5]-B):(S=v[4]+B*Math.sin(y),W=v[5]-B*Math.cos(y));const V="calc(var(--scale-factor)*",Y=g.style;u._container===u._rootContainer?(Y.left=`${(100*S/u._pageWidth).toFixed(2)}%`,Y.top=`${(100*W/u._pageHeight).toFixed(2)}%`):(Y.left=`${V}${S.toFixed(2)}px)`,Y.top=`${V}${W.toFixed(2)}px)`),Y.fontSize=`${V}${C.toFixed(2)}px)`,Y.fontFamily=p.fontFamily,o.fontSize=C,g.setAttribute("role","presentation"),g.textContent=O.str,g.dir=O.dir,u._fontInspectorEnabled&&(g.dataset.fontName=O.fontName),y!==0&&(o.angle=y*(180/Math.PI));let ee=!1;if(O.str.length>1)ee=!0;else if(O.str!==" "&&O.transform[0]!==O.transform[3]){const re=Math.abs(O.transform[0]),le=Math.abs(O.transform[3]);re!==le&&Math.max(re,le)/Math.min(re,le)>1.5&&(ee=!0)}ee&&(o.canvasWidth=p.vertical?O.height:O.width),u._textDivProperties.set(g,o),u._isReadableStream&&u._layoutText(g)}function D(u){const{div:O,scale:k,properties:g,ctx:o,prevFontSize:v,prevFontFamily:y}=u,{style:p}=O;let C="";if(g.canvasWidth!==0&&g.hasText){const{fontFamily:B}=p,{canvasWidth:S,fontSize:W}=g;(v!==W||y!==B)&&(o.font=`${W*k}px ${B}`,u.prevFontSize=W,u.prevFontFamily=B);const{width:V}=o.measureText(O.textContent);V>0&&(C=`scaleX(${S*k/V})`)}g.angle!==0&&(C=`rotate(${g.angle}deg) ${C}`),C.length>0&&(p.transform=C)}function P(u){if(u._canceled)return;const O=u._textDivs,k=u._capability;if(O.length>a){k.resolve();return}if(!u._isReadableStream)for(const o of O)u._layoutText(o);k.resolve()}class E{constructor({textContentSource:O,container:k,viewport:g,textDivs:o,textDivProperties:v,textContentItemsStr:y,isOffscreenCanvasSupported:p}){var V;this._textContentSource=O,this._isReadableStream=O instanceof ReadableStream,this._container=this._rootContainer=k,this._textDivs=o||[],this._textContentItemsStr=y||[],this._isOffscreenCanvasSupported=p,this._fontInspectorEnabled=!!((V=globalThis.FontInspector)!=null&&V.enabled),this._reader=null,this._textDivProperties=v||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:g.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l(0,p)};const{pageWidth:C,pageHeight:B,pageX:S,pageY:W}=g.rawDims;this._transform=[1,0,0,-1,-S,W+B],this._pageWidth=C,this._pageHeight=B,(0,s.setLayerDimensions)(k,g),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(O,k){for(const g of O){if(g.str===void 0){if(g.type==="beginMarkedContentProps"||g.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),g.id!==null&&this._container.setAttribute("id",`${g.id}`),o.append(this._container)}else g.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(g.str),I(this,g,k)}}_layoutText(O){const k=this._layoutTextParams.properties=this._textDivProperties.get(O);if(this._layoutTextParams.div=O,D(this._layoutTextParams),k.hasText&&this._container.append(O),k.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.append(g)}}_render(){const O=new i.PromiseCapability;let k=Object.create(null);if(this._isReadableStream){const g=()=>{this._reader.read().then(({value:o,done:v})=>{if(v){O.resolve();return}Object.assign(k,o.styles),this._processItems(o.items,k),g()},O.reject)};this._reader=this._textContentSource.getReader(),g()}else if(this._textContentSource){const{items:g,styles:o}=this._textContentSource;this._processItems(g,o),O.resolve()}else throw new Error('No "textContentSource" parameter specified.');O.promise.then(()=>{k=null,P(this)},this._capability.reject)}}t.TextLayerRenderTask=E;function T(u){!u.textContentSource&&(u.textContent||u.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),u.textContentSource=u.textContent||u.textContentStream);const{container:O,viewport:k}=u,g=getComputedStyle(O),o=g.getPropertyValue("visibility"),v=parseFloat(g.getPropertyValue("--scale-factor"));o==="visible"&&(!v||Math.abs(v-k.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const y=new E(u);return y._render(),y}function d({container:u,viewport:O,textDivs:k,textDivProperties:g,isOffscreenCanvasSupported:o,mustRotate:v=!0,mustRescale:y=!0}){if(v&&(0,s.setLayerDimensions)(u,{rotation:O.rotation}),y){const p=l(0,o),B={prevFontSize:null,prevFontFamily:null,div:null,scale:O.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:p};for(const S of k)B.properties=g.get(S),B.div=S,D(B)}}},(e,t,n)=>{var l,c,I,D,P,E,T,d,u,St,k,Gt,o,wt,y,Tt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=n(1),s=n(5),a=n(28),f=n(29),m=n(6);const C=class{constructor(S){ie(this,u);ie(this,k);ie(this,o);ie(this,y);ie(this,l,void 0);ie(this,c,!1);ie(this,I,this.pointerup.bind(this));ie(this,D,this.pointerdown.bind(this));ie(this,P,new Map);ie(this,E,!1);ie(this,T,!1);ie(this,d,void 0);C._initialized||(C._initialized=!0,a.FreeTextEditor.initialize(S.l10n),f.InkEditor.initialize(S.l10n)),S.uiManager.registerEditorTypes([a.FreeTextEditor,f.InkEditor]),_e(this,d,S.uiManager),this.pageIndex=S.pageIndex,this.div=S.div,_e(this,l,S.accessibilityManager),N(this,d).addLayer(this)}get isEmpty(){return N(this,P).size===0}updateToolbar(S){N(this,d).updateToolbar(S)}updateMode(S=N(this,d).getMode()){de(this,y,Tt).call(this),S===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),N(this,d).unselectAll(),S!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",S===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",S===i.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(S){if(!S&&N(this,d).getMode()!==i.AnnotationEditorType.INK)return;if(!S){for(const V of N(this,P).values())if(V.isEmpty()){V.setInBackground();return}}de(this,o,wt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(S){N(this,d).setEditingState(S)}addCommands(S){N(this,d).addCommands(S)}enable(){this.div.style.pointerEvents="auto";for(const S of N(this,P).values())S.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const S of N(this,P).values())S.disableEditing();de(this,y,Tt).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(S){N(this,d).getActive()!==S&&N(this,d).setActiveEditor(S)}enableClick(){this.div.addEventListener("pointerdown",N(this,D)),this.div.addEventListener("pointerup",N(this,I))}disableClick(){this.div.removeEventListener("pointerdown",N(this,D)),this.div.removeEventListener("pointerup",N(this,I))}attach(S){N(this,P).set(S.id,S)}detach(S){var W;N(this,P).delete(S.id),(W=N(this,l))==null||W.removePointerInTextLayer(S.contentDiv)}remove(S){N(this,d).removeEditor(S),this.detach(S),S.div.style.display="none",setTimeout(()=>{S.div.style.display="",S.div.remove(),S.isAttachedToDOM=!1,document.activeElement===document.body&&N(this,d).focusMainContainer()},0),N(this,T)||this.addInkEditorIfNeeded(!1)}add(S){if(de(this,u,St).call(this,S),N(this,d).addEditor(S),this.attach(S),!S.isAttachedToDOM){const W=S.render();this.div.append(W),S.isAttachedToDOM=!0}this.moveEditorInDOM(S),S.onceAdded(),N(this,d).addToAnnotationStorage(S)}moveEditorInDOM(S){var W;(W=N(this,l))==null||W.moveElementInDOM(this.div,S.div,S.contentDiv,!0)}addOrRebuild(S){S.needsToBeRebuilt()?S.rebuild():this.add(S)}addANewEditor(S){const W=()=>{this.addOrRebuild(S)},V=()=>{S.remove()};this.addCommands({cmd:W,undo:V,mustExec:!0})}addUndoableEditor(S){const W=()=>{this.addOrRebuild(S)},V=()=>{S.remove()};this.addCommands({cmd:W,undo:V,mustExec:!1})}getNextId(){return N(this,d).getId()}deserialize(S){switch(S.annotationType){case i.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(S,this,N(this,d));case i.AnnotationEditorType.INK:return f.InkEditor.deserialize(S,this,N(this,d))}return null}setSelected(S){N(this,d).setSelected(S)}toggleSelected(S){N(this,d).toggleSelected(S)}isSelected(S){return N(this,d).isSelected(S)}unselect(S){N(this,d).unselect(S)}pointerup(S){const{isMac:W}=i.FeatureTest.platform;if(!(S.button!==0||S.ctrlKey&&W)&&S.target===this.div&&!!N(this,E)){if(_e(this,E,!1),!N(this,c)){_e(this,c,!0);return}de(this,o,wt).call(this,S)}}pointerdown(S){const{isMac:W}=i.FeatureTest.platform;if(S.button!==0||S.ctrlKey&&W||S.target!==this.div)return;_e(this,E,!0);const V=N(this,d).getActive();_e(this,c,!V||V.isEmpty())}drop(S){const W=S.dataTransfer.getData("text/plain"),V=N(this,d).getEditor(W);if(!V)return;S.preventDefault(),S.dataTransfer.dropEffect="move",de(this,u,St).call(this,V);const Y=this.div.getBoundingClientRect(),ee=S.clientX-Y.x,re=S.clientY-Y.y;V.translate(ee-V.startX,re-V.startY),this.moveEditorInDOM(V),V.div.focus()}dragover(S){S.preventDefault()}destroy(){var S,W;((S=N(this,d).getActive())==null?void 0:S.parent)===this&&N(this,d).setActiveEditor(null);for(const V of N(this,P).values())(W=N(this,l))==null||W.removePointerInTextLayer(V.contentDiv),V.setParent(null),V.isAttachedToDOM=!1,V.div.remove();this.div=null,N(this,P).clear(),N(this,d).removeLayer(this)}render({viewport:S}){this.viewport=S,(0,m.setLayerDimensions)(this.div,S),(0,s.bindEvents)(this,this.div,["dragover","drop"]);for(const W of N(this,d).getEditors(this.pageIndex))this.add(W);this.updateMode()}update({viewport:S}){N(this,d).commitOrRemove(),this.viewport=S,(0,m.setLayerDimensions)(this.div,{rotation:S.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:S,pageHeight:W}=this.viewport.rawDims;return[S,W]}};let _=C;l=new WeakMap,c=new WeakMap,I=new WeakMap,D=new WeakMap,P=new WeakMap,E=new WeakMap,T=new WeakMap,d=new WeakMap,u=new WeakSet,St=function(S){var W;S.parent!==this&&(this.attach(S),(W=S.parent)==null||W.detach(S),S.setParent(this),S.div&&S.isAttachedToDOM&&(S.div.remove(),this.div.append(S.div)))},k=new WeakSet,Gt=function(S){switch(N(this,d).getMode()){case i.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(S);case i.AnnotationEditorType.INK:return new f.InkEditor(S)}return null},o=new WeakSet,wt=function(S){const W=this.getNextId(),V=de(this,k,Gt).call(this,{parent:this,id:W,x:S.offsetX,y:S.offsetY,uiManager:N(this,d)});return V&&this.add(V),V},y=new WeakSet,Tt=function(){_e(this,T,!0);for(const S of N(this,P).values())S.isEmpty()&&S.remove();_e(this,T,!1)},Ie(_,"_initialized",!1),t.AnnotationEditorLayer=_},(e,t,n)=>{var m,_,l,c,I,D,P,E,T,d,Zt,O,Vt,g,Xt,v,xt;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=n(1),s=n(5),a=n(4);const p=class extends a.AnnotationEditor{constructor(S){super({...S,name:"freeTextEditor"});ie(this,d);ie(this,O);ie(this,g);ie(this,v);ie(this,m,this.editorDivBlur.bind(this));ie(this,_,this.editorDivFocus.bind(this));ie(this,l,this.editorDivInput.bind(this));ie(this,c,this.editorDivKeydown.bind(this));ie(this,I,void 0);ie(this,D,"");ie(this,P,`${this.id}-editor`);ie(this,E,!1);ie(this,T,void 0);_e(this,I,S.color||p._defaultColor||a.AnnotationEditor._defaultLineColor),_e(this,T,S.fontSize||p._defaultFontSize)}static initialize(S){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(V=>[V,S.get(V)]));const W=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(W.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,W){switch(S){case i.AnnotationEditorParamsType.FREETEXT_SIZE:p._defaultFontSize=W;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:p._defaultColor=W;break}}updateParams(S,W){switch(S){case i.AnnotationEditorParamsType.FREETEXT_SIZE:de(this,d,Zt).call(this,W);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:de(this,O,Vt).call(this,W);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,p._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,p._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,N(this,T)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,N(this,I)]]}getInitialTranslation(){const S=this.parentScale;return[-p._internalPadding*S,-(p._internalPadding+N(this,T))*S]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",N(this,c)),this.editorDiv.addEventListener("focus",N(this,_)),this.editorDiv.addEventListener("blur",N(this,m)),this.editorDiv.addEventListener("input",N(this,l)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",N(this,P)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",N(this,c)),this.editorDiv.removeEventListener("focus",N(this,_)),this.editorDiv.removeEventListener("blur",N(this,m)),this.editorDiv.removeEventListener("input",N(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(S){super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){!this.isInEditMode()||(super.commit(),N(this,E)||(_e(this,E,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_e(this,D,de(this,g,Xt).call(this).trimEnd()),de(this,v,xt).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(S){this.enableEditMode(),this.editorDiv.focus()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(S){p._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}editorDivInput(S){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,W;this.width&&(S=this.x,W=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",N(this,P)),this.enableEditing(),p._l10nPromise.get("editor_free_text2_aria_label").then(Y=>{var ee;return(ee=this.editorDiv)==null?void 0:ee.setAttribute("aria-label",Y)}),p._l10nPromise.get("free_text2_default_content").then(Y=>{var ee;return(ee=this.editorDiv)==null?void 0:ee.setAttribute("default-content",Y)}),this.editorDiv.contentEditable=!0;const{style:V}=this.editorDiv;if(V.fontSize=`calc(${N(this,T)}px * var(--scale-factor))`,V.color=N(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Y,ee]=this.parentDimensions;this.setAt(S*Y,W*ee,this.width*Y,this.height*ee);for(const re of N(this,D).split(`
`)){const le=document.createElement("div");le.append(re?document.createTextNode(re):document.createElement("br")),this.editorDiv.append(le)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,W,V){const Y=super.deserialize(S,W,V);return _e(Y,T,S.fontSize),_e(Y,I,i.Util.makeHexColor(...S.color)),_e(Y,D,S.value),Y}serialize(){if(this.isEmpty())return null;const S=p._internalPadding*this.parentScale,W=this.getRect(S,S),V=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:N(this,I));return{annotationType:i.AnnotationEditorType.FREETEXT,color:V,fontSize:N(this,T),value:N(this,D),pageIndex:this.pageIndex,rect:W,rotation:this.rotation}}};let f=p;m=new WeakMap,_=new WeakMap,l=new WeakMap,c=new WeakMap,I=new WeakMap,D=new WeakMap,P=new WeakMap,E=new WeakMap,T=new WeakMap,d=new WeakSet,Zt=function(S){const W=Y=>{this.editorDiv.style.fontSize=`calc(${Y}px * var(--scale-factor))`,this.translate(0,-(Y-N(this,T))*this.parentScale),_e(this,T,Y),de(this,v,xt).call(this)},V=N(this,T);this.addCommands({cmd:()=>{W(S)},undo:()=>{W(V)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,Vt=function(S){const W=N(this,I);this.addCommands({cmd:()=>{_e(this,I,this.editorDiv.style.color=S)},undo:()=>{_e(this,I,this.editorDiv.style.color=W)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Xt=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const W=[];for(const V of S)W.push(V.innerText.replace(/\r\n?|\n/,""));return W.join(`
`)},v=new WeakSet,xt=function(){const[S,W]=this.parentDimensions;let V;if(this.isAttachedToDOM)V=this.div.getBoundingClientRect();else{const{currentLayer:Y,div:ee}=this,re=ee.style.display;ee.style.display="hidden",Y.div.append(this.div),V=ee.getBoundingClientRect(),ee.remove(),ee.style.display=re}this.width=V.width/S,this.height=V.height/W},Ie(f,"_freeTextDefaultContent",""),Ie(f,"_l10nPromise"),Ie(f,"_internalPadding",0),Ie(f,"_defaultColor",null),Ie(f,"_defaultFontSize",10),Ie(f,"_keyboardManager",new s.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],p.prototype.commitOrRemove]])),Ie(f,"_type","freetext"),t.FreeTextEditor=f},(e,t,n)=>{var l,c,I,D,P,E,T,d,u,O,k,g,o,v,y,Kt,C,Yt,S,Jt,V,Qt,ee,Rt,le,en,se,tn,Ee,nn,ve,Ve,F,Ct,M,ct,z,ut,A,et,$,Pt,x,dt,j,Ot,X,rn,ne,sn,he,an,Q,Dt,pe,ht,Se,tt,te,kt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return a.fitCurve}});var i=n(1),s=n(4),a=n(30),f=n(5);const m=16,Te=class extends s.AnnotationEditor{constructor(q){super({...q,name:"inkEditor"});ie(this,y);ie(this,C);ie(this,S);ie(this,V);ie(this,ee);ie(this,le);ie(this,se);ie(this,Ee);ie(this,ve);ie(this,F);ie(this,M);ie(this,z);ie(this,A);ie(this,$);ie(this,x);ie(this,X);ie(this,ne);ie(this,he);ie(this,Q);ie(this,pe);ie(this,Se);ie(this,te);ie(this,l,0);ie(this,c,0);ie(this,I,0);ie(this,D,this.canvasPointermove.bind(this));ie(this,P,this.canvasPointerleave.bind(this));ie(this,E,this.canvasPointerup.bind(this));ie(this,T,this.canvasPointerdown.bind(this));ie(this,d,!1);ie(this,u,!1);ie(this,O,null);ie(this,k,null);ie(this,g,0);ie(this,o,0);ie(this,v,null);this.color=q.color||null,this.thickness=q.thickness||null,this.opacity=q.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(q){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(G=>[G,q.get(G)]))}static updateDefaultParams(q,G){switch(q){case i.AnnotationEditorParamsType.INK_THICKNESS:Te._defaultThickness=G;break;case i.AnnotationEditorParamsType.INK_COLOR:Te._defaultColor=G;break;case i.AnnotationEditorParamsType.INK_OPACITY:Te._defaultOpacity=G/100;break}}updateParams(q,G){switch(q){case i.AnnotationEditorParamsType.INK_THICKNESS:de(this,y,Kt).call(this,G);break;case i.AnnotationEditorParamsType.INK_COLOR:de(this,C,Yt).call(this,G);break;case i.AnnotationEditorParamsType.INK_OPACITY:de(this,S,Jt).call(this,G);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Te._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Te._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Te._defaultOpacity*100)]]}get propertiesToUpdate(){var q;return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Te._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Te._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((q=this.opacity)!=null?q:Te._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(de(this,M,ct).call(this),de(this,z,ut).call(this)),this.isAttachedToDOM||(this.parent.add(this),de(this,A,et).call(this)),de(this,Se,tt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,N(this,k).disconnect(),_e(this,k,null),super.remove())}setParent(q){!this.parent&&q?this._uiManager.removeShouldRescale(this):this.parent&&q===null&&this._uiManager.addShouldRescale(this),super.setParent(q)}onScaleChanging(){const[q,G]=this.parentDimensions,fe=this.width*q,be=this.height*G;this.setDimensions(fe,be)}enableEditMode(){N(this,d)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",N(this,T)),this.canvas.addEventListener("pointerup",N(this,E)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",N(this,T)),this.canvas.removeEventListener("pointerup",N(this,E)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){N(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_e(this,d,!0),this.div.classList.add("disabled"),de(this,Se,tt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(q){super.focusin(q),this.enableEditMode()}canvasPointerdown(q){q.button!==0||!this.isInEditMode()||N(this,d)||(this.setInForeground(),q.type!=="mouse"&&this.div.focus(),q.stopPropagation(),this.canvas.addEventListener("pointerleave",N(this,P)),this.canvas.addEventListener("pointermove",N(this,D)),de(this,le,en).call(this,q.offsetX,q.offsetY))}canvasPointermove(q){q.stopPropagation(),de(this,se,tn).call(this,q.offsetX,q.offsetY)}canvasPointerup(q){q.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(q.stopPropagation(),de(this,F,Ct).call(this,q),this.setInBackground())}canvasPointerleave(q){de(this,F,Ct).call(this,q),this.setInBackground()}render(){if(this.div)return this.div;let q,G;this.width&&(q=this.x,G=this.y),super.render(),Te._l10nPromise.get("editor_ink2_aria_label").then(De=>{var Oe;return(Oe=this.div)==null?void 0:Oe.setAttribute("aria-label",De)});const[fe,be,Re,Pe]=de(this,V,Qt).call(this);if(this.setAt(fe,be,0,0),this.setDims(Re,Pe),de(this,M,ct).call(this),this.width){const[De,Oe]=this.parentDimensions;this.setAt(q*De,G*Oe,this.width*De,this.height*Oe),_e(this,u,!0),de(this,A,et).call(this),this.setDims(this.width*De,this.height*Oe),de(this,ve,Ve).call(this),de(this,te,kt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return de(this,z,ut).call(this),this.div}setDimensions(q,G){const fe=Math.round(q),be=Math.round(G);if(N(this,g)===fe&&N(this,o)===be)return;_e(this,g,fe),_e(this,o,be),this.canvas.style.visibility="hidden",N(this,l)&&Math.abs(N(this,l)-q/G)>.01&&(G=Math.ceil(q/N(this,l)),this.setDims(q,G));const[Re,Pe]=this.parentDimensions;this.width=q/Re,this.height=G/Pe,N(this,d)&&de(this,$,Pt).call(this,q,G),de(this,A,et).call(this),de(this,ve,Ve).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(q,G,fe){var Le,Ne;const be=super.deserialize(q,G,fe);be.thickness=q.thickness,be.color=i.Util.makeHexColor(...q.color),be.opacity=q.opacity;const[Re,Pe]=be.pageDimensions,De=be.width*Re,Oe=be.height*Pe,Fe=be.parentScale,Ce=q.thickness/2;_e(be,l,De/Oe),_e(be,d,!0),_e(be,g,Math.round(De)),_e(be,o,Math.round(Oe));for(const{bezier:Me}of q.paths){const Ue=[];be.paths.push(Ue);let He=Fe*(Me[0]-Ce),ze=Fe*(Oe-Me[1]-Ce);for(let je=2,$e=Me.length;je<$e;je+=6){const Ge=Fe*(Me[je]-Ce),Xe=Fe*(Oe-Me[je+1]-Ce),it=Fe*(Me[je+2]-Ce),st=Fe*(Oe-Me[je+3]-Ce),Lt=Fe*(Me[je+4]-Ce),It=Fe*(Oe-Me[je+5]-Ce);Ue.push([[He,ze],[Ge,Xe],[it,st],[Lt,It]]),He=Lt,ze=It}const We=de(this,j,Ot).call(this,Ue);be.bezierPath2D.push(We)}const Be=de(Le=be,Q,Dt).call(Le);return _e(be,I,Math.max(m,Be[2]-Be[0])),_e(be,c,Math.max(m,Be[3]-Be[1])),de(Ne=be,$,Pt).call(Ne,De,Oe),be}serialize(){if(this.isEmpty())return null;const q=this.getRect(0,0),G=this.rotation%180===0?q[3]-q[1]:q[2]-q[0],fe=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:fe,thickness:this.thickness,opacity:this.opacity,paths:de(this,X,rn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,G),pageIndex:this.pageIndex,rect:q,rotation:this.rotation}}};let _=Te;l=new WeakMap,c=new WeakMap,I=new WeakMap,D=new WeakMap,P=new WeakMap,E=new WeakMap,T=new WeakMap,d=new WeakMap,u=new WeakMap,O=new WeakMap,k=new WeakMap,g=new WeakMap,o=new WeakMap,v=new WeakMap,y=new WeakSet,Kt=function(q){const G=this.thickness;this.addCommands({cmd:()=>{this.thickness=q,de(this,Se,tt).call(this)},undo:()=>{this.thickness=G,de(this,Se,tt).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},C=new WeakSet,Yt=function(q){const G=this.color;this.addCommands({cmd:()=>{this.color=q,de(this,ve,Ve).call(this)},undo:()=>{this.color=G,de(this,ve,Ve).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Jt=function(q){q/=100;const G=this.opacity;this.addCommands({cmd:()=>{this.opacity=q,de(this,ve,Ve).call(this)},undo:()=>{this.opacity=G,de(this,ve,Ve).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},V=new WeakSet,Qt=function(){const{parentRotation:q,parentDimensions:[G,fe]}=this;switch(q){case 90:return[0,fe,fe,G];case 180:return[G,fe,G,fe];case 270:return[G,0,fe,G];default:return[0,0,G,fe]}},ee=new WeakSet,Rt=function(){const{ctx:q,color:G,opacity:fe,thickness:be,parentScale:Re,scaleFactor:Pe}=this;q.lineWidth=be*Re/Pe,q.lineCap="round",q.lineJoin="round",q.miterLimit=10,q.strokeStyle=`${G}${(0,f.opacityToHex)(fe)}`},le=new WeakSet,en=function(q,G){var fe;this.isEditing=!0,N(this,u)||(_e(this,u,!0),de(this,A,et).call(this),this.thickness||(this.thickness=Te._defaultThickness),this.color||(this.color=Te._defaultColor||s.AnnotationEditor._defaultLineColor),(fe=this.opacity)!=null||(this.opacity=Te._defaultOpacity)),this.currentPath.push([q,G]),_e(this,O,null),de(this,ee,Rt).call(this),this.ctx.beginPath(),this.ctx.moveTo(q,G),_e(this,v,()=>{!N(this,v)||(N(this,O)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):de(this,ve,Ve).call(this),this.ctx.lineTo(...N(this,O)),_e(this,O,null),this.ctx.stroke()),window.requestAnimationFrame(N(this,v)))}),window.requestAnimationFrame(N(this,v))},se=new WeakSet,tn=function(q,G){const[fe,be]=this.currentPath.at(-1);q===fe&&G===be||(this.currentPath.push([q,G]),_e(this,O,[q,G]))},Ee=new WeakSet,nn=function(q,G){var Fe;this.ctx.closePath(),_e(this,v,null),q=Math.min(Math.max(q,0),this.canvas.width),G=Math.min(Math.max(G,0),this.canvas.height);const[fe,be]=this.currentPath.at(-1);(q!==fe||G!==be)&&this.currentPath.push([q,G]);let Re;if(this.currentPath.length!==1)Re=(0,a.fitCurve)(this.currentPath,30,null);else{const Ce=[q,G];Re=[[Ce,Ce.slice(),Ce.slice(),Ce]]}const Pe=de(Fe=Te,j,Ot).call(Fe,Re);this.currentPath.length=0;const De=()=>{this.paths.push(Re),this.bezierPath2D.push(Pe),this.rebuild()},Oe=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(de(this,M,ct).call(this),de(this,z,ut).call(this)),de(this,Se,tt).call(this))};this.addCommands({cmd:De,undo:Oe,mustExec:!0})},ve=new WeakSet,Ve=function(){if(this.isEmpty()){de(this,x,dt).call(this);return}de(this,ee,Rt).call(this);const{canvas:q,ctx:G}=this;G.setTransform(1,0,0,1,0,0),G.clearRect(0,0,q.width,q.height),de(this,x,dt).call(this);for(const fe of this.bezierPath2D)G.stroke(fe)},F=new WeakSet,Ct=function(q){de(this,Ee,nn).call(this,q.offsetX,q.offsetY),this.canvas.removeEventListener("pointerleave",N(this,P)),this.canvas.removeEventListener("pointermove",N(this,D)),this.addToAnnotationStorage()},M=new WeakSet,ct=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Te._l10nPromise.get("editor_ink_canvas_aria_label").then(q=>{var G;return(G=this.canvas)==null?void 0:G.setAttribute("aria-label",q)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},z=new WeakSet,ut=function(){_e(this,k,new ResizeObserver(q=>{const G=q[0].contentRect;G.width&&G.height&&this.setDimensions(G.width,G.height)})),N(this,k).observe(this.div)},A=new WeakSet,et=function(){if(!N(this,u))return;const[q,G]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*q),this.canvas.height=Math.ceil(this.height*G),de(this,x,dt).call(this)},$=new WeakSet,Pt=function(q,G){const fe=de(this,pe,ht).call(this),be=(q-fe)/N(this,I),Re=(G-fe)/N(this,c);this.scaleFactor=Math.min(be,Re)},x=new WeakSet,dt=function(){const q=de(this,pe,ht).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+q,this.translationY*this.scaleFactor+q)},j=new WeakSet,Ot=function(q){const G=new Path2D;for(let fe=0,be=q.length;fe<be;fe++){const[Re,Pe,De,Oe]=q[fe];fe===0&&G.moveTo(...Re),G.bezierCurveTo(Pe[0],Pe[1],De[0],De[1],Oe[0],Oe[1])}return G},X=new WeakSet,rn=function(q,G,fe,be){const Pe=[],De=this.thickness/2;let Oe,Fe;for(const Ce of this.paths){Oe=[],Fe=[];for(let Be=0,Le=Ce.length;Be<Le;Be++){const[Ne,Me,Ue,He]=Ce[Be],ze=q*(Ne[0]+G)+De,We=be-q*(Ne[1]+fe)-De,je=q*(Me[0]+G)+De,$e=be-q*(Me[1]+fe)-De,Ge=q*(Ue[0]+G)+De,Xe=be-q*(Ue[1]+fe)-De,it=q*(He[0]+G)+De,st=be-q*(He[1]+fe)-De;Be===0&&(Oe.push(ze,We),Fe.push(ze,We)),Oe.push(je,$e,Ge,Xe,it,st),de(this,ne,sn).call(this,ze,We,je,$e,Ge,Xe,it,st,4,Fe)}Pe.push({bezier:Oe,points:Fe})}return Pe},ne=new WeakSet,sn=function(q,G,fe,be,Re,Pe,De,Oe,Fe,Ce){if(de(this,he,an).call(this,q,G,fe,be,Re,Pe,De,Oe)){Ce.push(De,Oe);return}for(let Be=1;Be<Fe-1;Be++){const Le=Be/Fe,Ne=1-Le;let Me=Le*q+Ne*fe,Ue=Le*G+Ne*be,He=Le*fe+Ne*Re,ze=Le*be+Ne*Pe;const We=Le*Re+Ne*De,je=Le*Pe+Ne*Oe;Me=Le*Me+Ne*He,Ue=Le*Ue+Ne*ze,He=Le*He+Ne*We,ze=Le*ze+Ne*je,Me=Le*Me+Ne*He,Ue=Le*Ue+Ne*ze,Ce.push(Me,Ue)}Ce.push(De,Oe)},he=new WeakSet,an=function(q,G,fe,be,Re,Pe,De,Oe){const Ce=(3*fe-2*q-De)**2,Be=(3*be-2*G-Oe)**2,Le=(3*Re-q-2*De)**2,Ne=(3*Pe-G-2*Oe)**2;return Math.max(Ce,Le)+Math.max(Be,Ne)<=10},Q=new WeakSet,Dt=function(){let q=1/0,G=-1/0,fe=1/0,be=-1/0;for(const Re of this.paths)for(const[Pe,De,Oe,Fe]of Re){const Ce=i.Util.bezierBoundingBox(...Pe,...De,...Oe,...Fe);q=Math.min(q,Ce[0]),fe=Math.min(fe,Ce[1]),G=Math.max(G,Ce[2]),be=Math.max(be,Ce[3])}return[q,fe,G,be]},pe=new WeakSet,ht=function(){return N(this,d)?Math.ceil(this.thickness*this.parentScale):0},Se=new WeakSet,tt=function(q=!1){if(this.isEmpty())return;if(!N(this,d)){de(this,ve,Ve).call(this);return}const G=de(this,Q,Dt).call(this),fe=de(this,pe,ht).call(this);_e(this,I,Math.max(m,G[2]-G[0])),_e(this,c,Math.max(m,G[3]-G[1]));const be=Math.ceil(fe+N(this,I)*this.scaleFactor),Re=Math.ceil(fe+N(this,c)*this.scaleFactor),[Pe,De]=this.parentDimensions;this.width=be/Pe,this.height=Re/De,_e(this,l,be/Re),de(this,te,kt).call(this);const Oe=this.translationX,Fe=this.translationY;this.translationX=-G[0],this.translationY=-G[1],de(this,A,et).call(this),de(this,ve,Ve).call(this),_e(this,g,be),_e(this,o,Re),this.setDims(be,Re);const Ce=q?fe/this.scaleFactor/2:0;this.translate(Oe-this.translationX-Ce,Fe-this.translationY-Ce)},te=new WeakSet,kt=function(){const{style:q}=this.div;N(this,l)>=1?(q.minHeight=`${m}px`,q.minWidth=`${Math.round(N(this,l)*m)}px`):(q.minWidth=`${m}px`,q.minHeight=`${Math.round(m/N(this,l))}px`)},ie(_,j),Ie(_,"_defaultColor",null),Ie(_,"_defaultOpacity",1),Ie(_,"_defaultThickness",1),Ie(_,"_l10nPromise"),Ie(_,"_type","ink"),t.InkEditor=_},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const i=n(31);t.fitCurve=i},e=>{function t(E,T,d){if(!Array.isArray(E))throw new TypeError("First argument should be an array");if(E.forEach(g=>{if(!Array.isArray(g)||g.some(o=>typeof o!="number")||g.length!==E[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),E=E.filter((g,o)=>o===0||!g.every((v,y)=>v===E[o-1][y])),E.length<2)return[];const u=E.length,O=I(E[1],E[0]),k=I(E[u-2],E[u-1]);return n(E,O,k,T,d)}function n(E,T,d,u,O){var g,o,v,y,p,C,B,S,W,V,Y,ee,re;if(E.length===2)return ee=D.vectorLen(D.subtract(E[0],E[1]))/3,g=[E[0],D.addArrays(E[0],D.mulItems(T,ee)),D.addArrays(E[1],D.mulItems(d,ee)),E[1]],[g];if(o=m(E),[g,y,C]=i(E,o,o,T,d,O),y===0||y<u)return[g];if(y<u*u)for(v=o,p=y,B=C,re=0;re<20;re++){if(v=a(g,E,v),[g,y,C]=i(E,o,v,T,d,O),y<u)return[g];if(C===B){let le=y/p;if(le>.9999&&le<1.0001)break}p=y,B=C}return Y=[],S=D.subtract(E[C-1],E[C+1]),S.every(le=>le===0)&&(S=D.subtract(E[C-1],E[C]),[S[0],S[1]]=[-S[1],S[0]]),W=D.normalize(S),V=D.mulItems(W,-1),Y=Y.concat(n(E.slice(0,C+1),T,W,u,O)),Y=Y.concat(n(E.slice(C),V,d,u,O)),Y}function i(E,T,d,u,O,k){var g,o,v;return g=s(E,d,u,O),[o,v]=_(E,g,T),k&&k({bez:g,points:E,params:T,maxErr:o,maxPoint:v}),[g,o,v]}function s(E,T,d,u){var O,k,g,o,v,y,p,C,B,S,W,V,Y,ee,re,le,oe,se=E[0],me=E[E.length-1];for(O=[se,null,null,me],k=D.zeros_Xx2x2(T.length),Y=0,ee=T.length;Y<ee;Y++)le=T[Y],oe=1-le,g=k[Y],g[0]=D.mulItems(d,3*le*(oe*oe)),g[1]=D.mulItems(u,3*oe*(le*le));for(o=[[0,0],[0,0]],v=[0,0],Y=0,ee=E.length;Y<ee;Y++)le=T[Y],g=k[Y],o[0][0]+=D.dot(g[0],g[0]),o[0][1]+=D.dot(g[0],g[1]),o[1][0]+=D.dot(g[0],g[1]),o[1][1]+=D.dot(g[1],g[1]),re=D.subtract(E[Y],P.q([se,se,me,me],le)),v[0]+=D.dot(g[0],re),v[1]+=D.dot(g[1],re);return y=o[0][0]*o[1][1]-o[1][0]*o[0][1],p=o[0][0]*v[1]-o[1][0]*v[0],C=v[0]*o[1][1]-v[1]*o[0][1],B=y===0?0:C/y,S=y===0?0:p/y,V=D.vectorLen(D.subtract(se,me)),W=1e-6*V,B<W||S<W?(O[1]=D.addArrays(se,D.mulItems(d,V/3)),O[2]=D.addArrays(me,D.mulItems(u,V/3))):(O[1]=D.addArrays(se,D.mulItems(d,B)),O[2]=D.addArrays(me,D.mulItems(u,S))),O}function a(E,T,d){return d.map((u,O)=>f(E,T[O],u))}function f(E,T,d){var u=D.subtract(P.q(E,d),T),O=P.qprime(E,d),k=D.mulMatrix(u,O),g=D.sum(D.squareItems(O))+2*D.mulMatrix(u,P.qprimeprime(E,d));return g===0?d:d-k/g}function m(E){var T=[],d,u,O;return E.forEach((k,g)=>{d=g?u+D.vectorLen(D.subtract(k,O)):0,T.push(d),u=d,O=k}),T=T.map(k=>k/u),T}function _(E,T,d){var u,O,k,g,o,v,y,p;O=0,k=Math.floor(E.length/2);const C=l(T,10);for(o=0,v=E.length;o<v;o++)y=E[o],p=c(T,d[o],C,10),g=D.subtract(P.q(T,p),y),u=g[0]*g[0]+g[1]*g[1],u>O&&(O=u,k=o);return[O,k]}var l=function(E,T){for(var d,u=[0],O=E[0],k=0,g=1;g<=T;g++)d=P.q(E,g/T),k+=D.vectorLen(D.subtract(d,O)),u.push(k),O=d;return u=u.map(o=>o/k),u};function c(E,T,d,u){if(T<0)return 0;if(T>1)return 1;for(var O,k,g,o,v,y=1;y<=u;y++)if(T<=d[y]){o=(y-1)/u,g=y/u,k=d[y-1],O=d[y],v=(T-k)/(O-k)*(g-o)+o;break}return v}function I(E,T){return D.normalize(D.subtract(E,T))}class D{static zeros_Xx2x2(T){for(var d=[];T--;)d.push([0,0]);return d}static mulItems(T,d){return T.map(u=>u*d)}static mulMatrix(T,d){return T.reduce((u,O,k)=>u+O*d[k],0)}static subtract(T,d){return T.map((u,O)=>u-d[O])}static addArrays(T,d){return T.map((u,O)=>u+d[O])}static addItems(T,d){return T.map(u=>u+d)}static sum(T){return T.reduce((d,u)=>d+u)}static dot(T,d){return D.mulMatrix(T,d)}static vectorLen(T){return Math.hypot(...T)}static divItems(T,d){return T.map(u=>u/d)}static squareItems(T){return T.map(d=>d*d)}static normalize(T){return this.divItems(T,this.vectorLen(T))}}class P{static q(T,d){var u=1-d,O=D.mulItems(T[0],u*u*u),k=D.mulItems(T[1],3*u*u*d),g=D.mulItems(T[2],3*u*d*d),o=D.mulItems(T[3],d*d*d);return D.addArrays(D.addArrays(O,k),D.addArrays(g,o))}static qprime(T,d){var u=1-d,O=D.mulItems(D.subtract(T[1],T[0]),3*u*u),k=D.mulItems(D.subtract(T[2],T[1]),6*u*d),g=D.mulItems(D.subtract(T[3],T[2]),3*d*d);return D.addArrays(D.addArrays(O,k),g)}static qprimeprime(T,d){return D.addArrays(D.mulItems(D.addArrays(D.subtract(T[2],D.mulItems(T[1],2)),T[0]),6*(1-d)),D.mulItems(D.addArrays(D.subtract(T[3],D.mulItems(T[2],2)),T[1]),6*d))}}e.exports=t,e.exports.fitCubic=n,e.exports.createTangent=I},(e,t,n)=>{var ve,Ye,F,on,U,Mt,Z,Ft;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var i=n(1),s=n(6),a=n(3),f=n(33),m=n(34);const _=1e3,l=9,c=new WeakSet;function I($){return{width:$[2]-$[0],height:$[3]-$[1]}}class D{static create(h){switch(h.data.annotationType){case i.AnnotationType.LINK:return new E(h);case i.AnnotationType.TEXT:return new T(h);case i.AnnotationType.WIDGET:switch(h.data.fieldType){case"Tx":return new u(h);case"Btn":return h.data.radioButton?new k(h):h.data.checkBox?new O(h):new g(h);case"Ch":return new o(h)}return new d(h);case i.AnnotationType.POPUP:return new v(h);case i.AnnotationType.FREETEXT:return new p(h);case i.AnnotationType.LINE:return new C(h);case i.AnnotationType.SQUARE:return new B(h);case i.AnnotationType.CIRCLE:return new S(h);case i.AnnotationType.POLYLINE:return new W(h);case i.AnnotationType.CARET:return new Y(h);case i.AnnotationType.INK:return new ee(h);case i.AnnotationType.POLYGON:return new V(h);case i.AnnotationType.HIGHLIGHT:return new re(h);case i.AnnotationType.UNDERLINE:return new le(h);case i.AnnotationType.SQUIGGLY:return new oe(h);case i.AnnotationType.STRIKEOUT:return new se(h);case i.AnnotationType.STAMP:return new me(h);case i.AnnotationType.FILEATTACHMENT:return new Ee(h);default:return new P(h)}}}class P{constructor(h,{isRenderable:x=!1,ignoreBorder:L=!1,createQuadrilaterals:j=!1}={}){this.isRenderable=x,this.data=h.data,this.layer=h.layer,this.page=h.page,this.viewport=h.viewport,this.linkService=h.linkService,this.downloadManager=h.downloadManager,this.imageResourcesPath=h.imageResourcesPath,this.renderForms=h.renderForms,this.svgFactory=h.svgFactory,this.annotationStorage=h.annotationStorage,this.enableScripting=h.enableScripting,this.hasJSActions=h.hasJSActions,this._fieldObjects=h.fieldObjects,x&&(this.container=this._createContainer(L)),j&&(this.quadrilaterals=this._createQuadrilaterals(L))}_createContainer(h=!1){const{data:x,page:L,viewport:j}=this,H=document.createElement("section");H.setAttribute("data-annotation-id",x.id),x.noRotate&&H.classList.add("norotate");const{pageWidth:X,pageHeight:ae,pageX:ne,pageY:ce}=j.rawDims,{width:he,height:J}=I(x.rect),Q=i.Util.normalizeRect([x.rect[0],L.view[3]-x.rect[1]+L.view[1],x.rect[2],L.view[3]-x.rect[3]+L.view[1]]);if(!h&&x.borderStyle.width>0){H.style.borderWidth=`${x.borderStyle.width}px`;const pe=x.borderStyle.horizontalCornerRadius,ye=x.borderStyle.verticalCornerRadius;if(pe>0||ye>0){const xe=`calc(${pe}px * var(--scale-factor)) / calc(${ye}px * var(--scale-factor))`;H.style.borderRadius=xe}else if(this instanceof k){const xe=`calc(${he}px * var(--scale-factor)) / calc(${J}px * var(--scale-factor))`;H.style.borderRadius=xe}switch(x.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:H.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:H.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:H.style.borderBottomStyle="solid";break}const Se=x.borderColor||null;Se?H.style.borderColor=i.Util.makeHexColor(Se[0]|0,Se[1]|0,Se[2]|0):H.style.borderWidth=0}H.style.left=`${100*(Q[0]-ne)/X}%`,H.style.top=`${100*(Q[1]-ce)/ae}%`;const{rotation:ue}=x;return x.hasOwnCanvas||ue===0?(H.style.width=`${100*he/X}%`,H.style.height=`${100*J/ae}%`):this.setRotation(ue,H),H}setRotation(h,x=this.container){const{pageWidth:L,pageHeight:j}=this.viewport.rawDims,{width:H,height:X}=I(this.data.rect);let ae,ne;h%180===0?(ae=100*H/L,ne=100*X/j):(ae=100*X/L,ne=100*H/j),x.style.width=`${ae}%`,x.style.height=`${ne}%`,x.setAttribute("data-main-rotation",(360-h)%360)}get _commonActions(){const h=(x,L,j)=>{const H=j.detail[x];j.target.style[L]=f.ColorConverters[`${H[0]}_HTML`](H.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:x=>{const L=x.detail.display%2===1;this.container.style.visibility=L?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:L,print:x.detail.display===0||x.detail.display===3})},print:x=>{this.annotationStorage.setValue(this.data.id,{print:x.detail.print})},hidden:x=>{this.container.style.visibility=x.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:x.detail.hidden})},focus:x=>{setTimeout(()=>x.target.focus({preventScroll:!1}),0)},userName:x=>{x.target.title=x.detail.userName},readonly:x=>{x.detail.readonly?x.target.setAttribute("readonly",""):x.target.removeAttribute("readonly")},required:x=>{this._setRequired(x.target,x.detail.required)},bgColor:x=>{h("bgColor","backgroundColor",x)},fillColor:x=>{h("fillColor","backgroundColor",x)},fgColor:x=>{h("fgColor","color",x)},textColor:x=>{h("textColor","color",x)},borderColor:x=>{h("borderColor","borderColor",x)},strokeColor:x=>{h("strokeColor","borderColor",x)},rotation:x=>{const L=x.detail.rotation;this.setRotation(L),this.annotationStorage.setValue(this.data.id,{rotation:L})}})}_dispatchEventFromSandbox(h,x){const L=this._commonActions;for(const j of Object.keys(x.detail)){const H=h[j]||L[j];H==null||H(x)}}_setDefaultPropertiesFromJS(h){if(!this.enableScripting)return;const x=this.annotationStorage.getRawValue(this.data.id);if(!x)return;const L=this._commonActions;for(const[j,H]of Object.entries(x)){const X=L[j];if(X){const ae={detail:{[j]:H},target:h};X(ae),delete x[j]}}}_createQuadrilaterals(h=!1){if(!this.data.quadPoints)return null;const x=[],L=this.data.rect;for(const j of this.data.quadPoints)this.data.rect=[j[2].x,j[2].y,j[1].x,j[1].y],x.push(this._createContainer(h));return this.data.rect=L,x}_createPopup(h,x){let L=this.container;this.quadrilaterals&&(h||(h=this.quadrilaterals),L=this.quadrilaterals[0]),h||(h=document.createElement("div"),h.classList.add("popupTriggerArea"),L.append(h));const H=new y({container:L,trigger:h,color:x.color,titleObj:x.titleObj,modificationDate:x.modificationDate,contentsObj:x.contentsObj,richText:x.richText,hideWrapper:!0}).render();H.style.left="100%",L.append(H)}_renderQuadrilaterals(h){for(const x of this.quadrilaterals)x.classList.add(h);return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(h,x=null){const L=[];if(this._fieldObjects){const j=this._fieldObjects[h];if(j)for(const{page:H,id:X,exportValues:ae}of j){if(H===-1||X===x)continue;const ne=typeof ae=="string"?ae:null,ce=document.querySelector(`[data-element-id="${X}"]`);if(ce&&!c.has(ce)){(0,i.warn)(`_getElementsByName - element not allowed: ${X}`);continue}L.push({id:X,exportValue:ne,domElement:ce})}return L}for(const j of document.getElementsByName(h)){const{exportValue:H}=j,X=j.getAttribute("data-element-id");X!==x&&(!c.has(j)||L.push({id:X,exportValue:H,domElement:j}))}return L}}class E extends P{constructor(x,L=null){super(x,{isRenderable:!0,ignoreBorder:!!(L!=null&&L.ignoreBorder),createQuadrilaterals:!0});ie(this,ve);ie(this,F);this.isTooltipOnly=x.data.isTooltipOnly}render(){const{data:x,linkService:L}=this,j=document.createElement("a");j.setAttribute("data-element-id",x.id);let H=!1;return x.url?(L.addLinkAttributes(j,x.url,x.newWindow),H=!0):x.action?(this._bindNamedAction(j,x.action),H=!0):x.attachment?(this._bindAttachment(j,x.attachment),H=!0):x.setOCGState?(de(this,F,on).call(this,j,x.setOCGState),H=!0):x.dest?(this._bindLink(j,x.dest),H=!0):(x.actions&&(x.actions.Action||x.actions["Mouse Up"]||x.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(j,x),H=!0),x.resetForm?(this._bindResetFormAction(j,x.resetForm),H=!0):this.isTooltipOnly&&!H&&(this._bindLink(j,""),H=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((X,ae)=>{const ne=ae===0?j:j.cloneNode();return X.append(ne),X}):(this.container.classList.add("linkAnnotation"),H&&this.container.append(j),this.container)}_bindLink(x,L){x.href=this.linkService.getDestinationHash(L),x.onclick=()=>(L&&this.linkService.goToDestination(L),!1),(L||L==="")&&de(this,ve,Ye).call(this)}_bindNamedAction(x,L){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>(this.linkService.executeNamedAction(L),!1),de(this,ve,Ye).call(this)}_bindAttachment(x,L){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>{var j;return(j=this.downloadManager)==null||j.openOrDownloadData(this.container,L.content,L.filename),!1},de(this,ve,Ye).call(this)}_bindJSAction(x,L){x.href=this.linkService.getAnchorUrl("");const j=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const H of Object.keys(L.actions)){const X=j.get(H);!X||(x[X]=()=>{var ae;return(ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L.id,name:H}}),!1})}x.onclick||(x.onclick=()=>!1),de(this,ve,Ye).call(this)}_bindResetFormAction(x,L){const j=x.onclick;if(j||(x.href=this.linkService.getAnchorUrl("")),de(this,ve,Ye).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),j||(x.onclick=()=>!1);return}x.onclick=()=>{var J;j==null||j();const{fields:H,refs:X,include:ae}=L,ne=[];if(H.length!==0||X.length!==0){const Q=new Set(X);for(const ue of H){const pe=this._fieldObjects[ue]||[];for(const{id:ye}of pe)Q.add(ye)}for(const ue of Object.values(this._fieldObjects))for(const pe of ue)Q.has(pe.id)===ae&&ne.push(pe)}else for(const Q of Object.values(this._fieldObjects))ne.push(...Q);const ce=this.annotationStorage,he=[];for(const Q of ne){const{id:ue}=Q;switch(he.push(ue),Q.type){case"text":{const ye=Q.defaultValue||"";ce.setValue(ue,{value:ye});break}case"checkbox":case"radiobutton":{const ye=Q.defaultValue===Q.exportValues;ce.setValue(ue,{value:ye});break}case"combobox":case"listbox":{const ye=Q.defaultValue||"";ce.setValue(ue,{value:ye});break}default:continue}const pe=document.querySelector(`[data-element-id="${ue}"]`);if(pe){if(!c.has(pe)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${ue}`);continue}}else continue;pe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:he,name:"ResetForm"}})),!1}}}ve=new WeakSet,Ye=function(){this.container.setAttribute("data-internal-link","")},F=new WeakSet,on=function(x,L){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>(this.linkService.executeSetOCGState(L),!1),de(this,ve,Ye).call(this)};class T extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x})}render(){this.container.classList.add("textAnnotation");const h=document.createElement("img");return h.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",h.alt="[{{type}} Annotation]",h.dataset.l10nId="text_annotation_type",h.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(h,this.data),this.container.append(h),this.container}}class d extends P{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(h){var x;this.data.hasOwnCanvas&&(((x=h.previousSibling)==null?void 0:x.nodeName)==="CANVAS"&&(h.previousSibling.hidden=!0),h.hidden=!1)}_getKeyModifier(h){const{isWin:x,isMac:L}=i.FeatureTest.platform;return x&&h.ctrlKey||L&&h.metaKey}_setEventListener(h,x,L,j){x.includes("mouse")?h.addEventListener(x,H=>{var X;(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:L,value:j(H),shift:H.shiftKey,modifier:this._getKeyModifier(H)}})}):h.addEventListener(x,H=>{var X;(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:L,value:j(H)}})})}_setEventListeners(h,x,L){var j;for(const[H,X]of x)(X==="Action"||((j=this.data.actions)==null?void 0:j[X]))&&this._setEventListener(h,H,X,L)}_setBackgroundColor(h){const x=this.data.backgroundColor||null;h.style.backgroundColor=x===null?"transparent":i.Util.makeHexColor(x[0],x[1],x[2])}_setTextStyle(h){const x=["left","center","right"],{fontColor:L}=this.data.defaultAppearanceData,j=this.data.defaultAppearanceData.fontSize||l,H=h.style;let X;const ae=2,ne=ce=>Math.round(10*ce)/10;if(this.data.multiLine){const ce=Math.abs(this.data.rect[3]-this.data.rect[1]-ae),he=Math.round(ce/(i.LINE_FACTOR*j))||1,J=ce/he;X=Math.min(j,ne(J/i.LINE_FACTOR))}else{const ce=Math.abs(this.data.rect[3]-this.data.rect[1]-ae);X=Math.min(j,ne(ce/i.LINE_FACTOR))}H.fontSize=`calc(${X}px * var(--scale-factor))`,H.color=i.Util.makeHexColor(L[0],L[1],L[2]),this.data.textAlignment!==null&&(H.textAlign=x[this.data.textAlignment])}_setRequired(h,x){x?h.setAttribute("required",!0):h.removeAttribute("required"),h.setAttribute("aria-required",x)}}class u extends d{constructor(h){const x=h.renderForms||!h.data.hasAppearance&&!!h.data.fieldValue;super(h,{isRenderable:x})}setPropertyOnSiblings(h,x,L,j){const H=this.annotationStorage;for(const X of this._getElementsByName(h.name,h.id))X.domElement&&(X.domElement[x]=L),H.setValue(X.id,{[j]:L})}render(){var j;const h=this.annotationStorage,x=this.data.id;this.container.classList.add("textWidgetAnnotation");let L=null;if(this.renderForms){const H=h.getValue(x,{value:this.data.fieldValue});let X=H.formattedValue||H.value||"";const ae=h.getValue(x,{charLimit:this.data.maxLen}).charLimit;ae&&X.length>ae&&(X=X.slice(0,ae));const ne={userValue:X,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(L=document.createElement("textarea"),L.textContent=X,this.data.doNotScroll&&(L.style.overflowY="hidden")):(L=document.createElement("input"),L.type="text",L.setAttribute("value",X),this.data.doNotScroll&&(L.style.overflowX="hidden")),this.data.hasOwnCanvas&&(L.hidden=!0),c.add(L),L.setAttribute("data-element-id",x),L.disabled=this.data.readOnly,L.name=this.data.fieldName,L.tabIndex=_,this._setRequired(L,this.data.required),ae&&(L.maxLength=ae),L.addEventListener("input",he=>{h.setValue(x,{value:he.target.value}),this.setPropertyOnSiblings(L,"value",he.target.value,"value")}),L.addEventListener("resetform",he=>{var Q;const J=(Q=this.data.defaultFieldValue)!=null?Q:"";L.value=ne.userValue=J,ne.formattedValue=null});let ce=he=>{const{formattedValue:J}=ne;J!=null&&(he.target.value=J),he.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){L.addEventListener("focus",J=>{const{target:Q}=J;ne.userValue&&(Q.value=ne.userValue),ne.lastCommittedValue=Q.value,ne.commitKey=1}),L.addEventListener("updatefromsandbox",J=>{this.showElementAndHideCanvas(J.target);const Q={value(ue){var pe;ne.userValue=(pe=ue.detail.value)!=null?pe:"",h.setValue(x,{value:ne.userValue.toString()}),ue.target.value=ne.userValue},formattedValue(ue){const{formattedValue:pe}=ue.detail;ne.formattedValue=pe,pe!=null&&ue.target!==document.activeElement&&(ue.target.value=pe),h.setValue(x,{formattedValue:pe})},selRange(ue){ue.target.setSelectionRange(...ue.detail.selRange)},charLimit:ue=>{var xe;const{charLimit:pe}=ue.detail,{target:ye}=ue;if(pe===0){ye.removeAttribute("maxLength");return}ye.setAttribute("maxLength",pe);let Se=ne.userValue;!Se||Se.length<=pe||(Se=Se.slice(0,pe),ye.value=ne.userValue=Se,h.setValue(x,{value:Se}),(xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:Se,willCommit:!0,commitKey:1,selStart:ye.selectionStart,selEnd:ye.selectionEnd}}))}};this._dispatchEventFromSandbox(Q,J)}),L.addEventListener("keydown",J=>{var pe;ne.commitKey=1;let Q=-1;if(J.key==="Escape"?Q=0:J.key==="Enter"&&!this.data.multiLine?Q=2:J.key==="Tab"&&(ne.commitKey=3),Q===-1)return;const{value:ue}=J.target;ne.lastCommittedValue!==ue&&(ne.lastCommittedValue=ue,ne.userValue=ue,(pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:ue,willCommit:!0,commitKey:Q,selStart:J.target.selectionStart,selEnd:J.target.selectionEnd}}))});const he=ce;ce=null,L.addEventListener("blur",J=>{var ue;if(!J.relatedTarget)return;const{value:Q}=J.target;ne.userValue=Q,ne.lastCommittedValue!==Q&&((ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:Q,willCommit:!0,commitKey:ne.commitKey,selStart:J.target.selectionStart,selEnd:J.target.selectionEnd}})),he(J)}),(j=this.data.actions)!=null&&j.Keystroke&&L.addEventListener("beforeinput",J=>{var Ae;ne.lastCommittedValue=null;const{data:Q,target:ue}=J,{value:pe,selectionStart:ye,selectionEnd:Se}=ue;let xe=ye,te=Se;switch(J.inputType){case"deleteWordBackward":{const Te=pe.substring(0,ye).match(/\w*[^\w]*$/);Te&&(xe-=Te[0].length);break}case"deleteWordForward":{const Te=pe.substring(ye).match(/^[^\w]*\w*/);Te&&(te+=Te[0].length);break}case"deleteContentBackward":ye===Se&&(xe-=1);break;case"deleteContentForward":ye===Se&&(te+=1);break}J.preventDefault(),(Ae=this.linkService.eventBus)==null||Ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:pe,change:Q||"",willCommit:!1,selStart:xe,selEnd:te}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.value)}if(ce&&L.addEventListener("blur",ce),this.data.comb){const J=(this.data.rect[2]-this.data.rect[0])/ae;L.classList.add("comb"),L.style.letterSpacing=`calc(${J}px * var(--scale-factor) - 1ch)`}}else L=document.createElement("div"),L.textContent=this.data.fieldValue,L.style.verticalAlign="middle",L.style.display="table-cell";return this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class O extends d{constructor(h){super(h,{isRenderable:h.renderForms})}render(){const h=this.annotationStorage,x=this.data,L=x.id;let j=h.getValue(L,{value:x.exportValue===x.fieldValue}).value;typeof j=="string"&&(j=j!=="Off",h.setValue(L,{value:j})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const H=document.createElement("input");return c.add(H),H.setAttribute("data-element-id",L),H.disabled=x.readOnly,this._setRequired(H,this.data.required),H.type="checkbox",H.name=x.fieldName,j&&H.setAttribute("checked",!0),H.setAttribute("exportValue",x.exportValue),H.tabIndex=_,H.addEventListener("change",X=>{const{name:ae,checked:ne}=X.target;for(const ce of this._getElementsByName(ae,L)){const he=ne&&ce.exportValue===x.exportValue;ce.domElement&&(ce.domElement.checked=he),h.setValue(ce.id,{value:he})}h.setValue(L,{value:ne})}),H.addEventListener("resetform",X=>{const ae=x.defaultFieldValue||"Off";X.target.checked=ae===x.exportValue}),this.enableScripting&&this.hasJSActions&&(H.addEventListener("updatefromsandbox",X=>{const ae={value(ne){ne.target.checked=ne.detail.value!=="Off",h.setValue(L,{value:ne.target.checked})}};this._dispatchEventFromSandbox(ae,X)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class k extends d{constructor(h){super(h,{isRenderable:h.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const h=this.annotationStorage,x=this.data,L=x.id;let j=h.getValue(L,{value:x.fieldValue===x.buttonValue}).value;typeof j=="string"&&(j=j!==x.buttonValue,h.setValue(L,{value:j}));const H=document.createElement("input");if(c.add(H),H.setAttribute("data-element-id",L),H.disabled=x.readOnly,this._setRequired(H,this.data.required),H.type="radio",H.name=x.fieldName,j&&H.setAttribute("checked",!0),H.tabIndex=_,H.addEventListener("change",X=>{const{name:ae,checked:ne}=X.target;for(const ce of this._getElementsByName(ae,L))h.setValue(ce.id,{value:!1});h.setValue(L,{value:ne})}),H.addEventListener("resetform",X=>{const ae=x.defaultFieldValue;X.target.checked=ae!=null&&ae===x.buttonValue}),this.enableScripting&&this.hasJSActions){const X=x.buttonValue;H.addEventListener("updatefromsandbox",ae=>{const ne={value:ce=>{const he=X===ce.detail.value;for(const J of this._getElementsByName(ce.target.name)){const Q=he&&J.id===L;J.domElement&&(J.domElement.checked=Q),h.setValue(J.id,{value:Q})}}};this._dispatchEventFromSandbox(ne,ae)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ae=>ae.target.checked)}return this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class g extends E{constructor(h){super(h,{ignoreBorder:h.data.hasAppearance})}render(){const h=super.render();h.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(h.title=this.data.alternativeText);const x=h.lastChild;return this.enableScripting&&this.hasJSActions&&x&&(this._setDefaultPropertiesFromJS(x),x.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({},L)})),h}}class o extends d{constructor(h){super(h,{isRenderable:h.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const h=this.annotationStorage,x=this.data.id,L=h.getValue(x,{value:this.data.fieldValue}),j=document.createElement("select");c.add(j),j.setAttribute("data-element-id",x),j.disabled=this.data.readOnly,this._setRequired(j,this.data.required),j.name=this.data.fieldName,j.tabIndex=_;let H=this.data.combo&&this.data.options.length>0;this.data.combo||(j.size=this.data.options.length,this.data.multiSelect&&(j.multiple=!0)),j.addEventListener("resetform",he=>{const J=this.data.defaultFieldValue;for(const Q of j.options)Q.selected=Q.value===J});for(const he of this.data.options){const J=document.createElement("option");J.textContent=he.displayValue,J.value=he.exportValue,L.value.includes(he.exportValue)&&(J.setAttribute("selected",!0),H=!1),j.append(J)}let X=null;if(H){const he=document.createElement("option");he.value=" ",he.setAttribute("hidden",!0),he.setAttribute("selected",!0),j.prepend(he),X=()=>{he.remove(),j.removeEventListener("input",X),X=null},j.addEventListener("input",X)}const ae=he=>{const J=he?"value":"textContent",{options:Q,multiple:ue}=j;return ue?Array.prototype.filter.call(Q,pe=>pe.selected).map(pe=>pe[J]):Q.selectedIndex===-1?null:Q[Q.selectedIndex][J]};let ne=ae(!1);const ce=he=>{const J=he.target.options;return Array.prototype.map.call(J,Q=>({displayValue:Q.textContent,exportValue:Q.value}))};return this.enableScripting&&this.hasJSActions?(j.addEventListener("updatefromsandbox",he=>{const J={value(Q){X==null||X();const ue=Q.detail.value,pe=new Set(Array.isArray(ue)?ue:[ue]);for(const ye of j.options)ye.selected=pe.has(ye.value);h.setValue(x,{value:ae(!0)}),ne=ae(!1)},multipleSelection(Q){j.multiple=!0},remove(Q){const ue=j.options,pe=Q.detail.remove;ue[pe].selected=!1,j.remove(pe),ue.length>0&&Array.prototype.findIndex.call(ue,Se=>Se.selected)===-1&&(ue[0].selected=!0),h.setValue(x,{value:ae(!0),items:ce(Q)}),ne=ae(!1)},clear(Q){for(;j.length!==0;)j.remove(0);h.setValue(x,{value:null,items:[]}),ne=ae(!1)},insert(Q){const{index:ue,displayValue:pe,exportValue:ye}=Q.detail.insert,Se=j.children[ue],xe=document.createElement("option");xe.textContent=pe,xe.value=ye,Se?Se.before(xe):j.append(xe),h.setValue(x,{value:ae(!0),items:ce(Q)}),ne=ae(!1)},items(Q){const{items:ue}=Q.detail;for(;j.length!==0;)j.remove(0);for(const pe of ue){const{displayValue:ye,exportValue:Se}=pe,xe=document.createElement("option");xe.textContent=ye,xe.value=Se,j.append(xe)}j.options.length>0&&(j.options[0].selected=!0),h.setValue(x,{value:ae(!0),items:ce(Q)}),ne=ae(!1)},indices(Q){const ue=new Set(Q.detail.indices);for(const pe of Q.target.options)pe.selected=ue.has(pe.index);h.setValue(x,{value:ae(!0)}),ne=ae(!1)},editable(Q){Q.target.disabled=!Q.detail.editable}};this._dispatchEventFromSandbox(J,he)}),j.addEventListener("input",he=>{var Q;const J=ae(!0);h.setValue(x,{value:J}),he.preventDefault(),(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:ne,changeEx:J,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(j,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],he=>he.target.value)):j.addEventListener("input",function(he){h.setValue(x,{value:ae(!0)})}),this.data.combo&&this._setTextStyle(j),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}const M=class extends P{constructor(h){var j,H,X;const{data:x}=h,L=!M.IGNORE_TYPES.has(x.parentType)&&!!(((j=x.titleObj)==null?void 0:j.str)||((H=x.contentsObj)==null?void 0:H.str)||((X=x.richText)==null?void 0:X.str));super(h,{isRenderable:L})}render(){this.container.classList.add("popupAnnotation");const h=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(h.length===0)return this.container;const x=new y({container:this.container,trigger:Array.from(h),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),L=this.page,j=i.Util.normalizeRect([this.data.parentRect[0],L.view[3]-this.data.parentRect[1]+L.view[1],this.data.parentRect[2],L.view[3]-this.data.parentRect[3]+L.view[1]]),H=j[0]+this.data.parentRect[2]-this.data.parentRect[0],X=j[1],{pageWidth:ae,pageHeight:ne,pageX:ce,pageY:he}=this.viewport.rawDims;return this.container.style.left=`${100*(H-ce)/ae}%`,this.container.style.top=`${100*(X-he)/ne}%`,this.container.append(x.render()),this.container}};let v=M;Ie(v,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class y{constructor(h){this.container=h.container,this.trigger=h.trigger,this.color=h.color,this.titleObj=h.titleObj,this.modificationDate=h.modificationDate,this.contentsObj=h.contentsObj,this.richText=h.richText,this.hideWrapper=h.hideWrapper||!1,this.pinned=!1}render(){var ae,ne;const x=document.createElement("div");x.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?x:this.container,this.hideElement.hidden=!0;const L=document.createElement("div");L.classList.add("popup");const j=this.color;if(j){const ce=.7*(255-j[0])+j[0],he=.7*(255-j[1])+j[1],J=.7*(255-j[2])+j[2];L.style.backgroundColor=i.Util.makeHexColor(ce|0,he|0,J|0)}const H=document.createElement("h1");H.dir=this.titleObj.dir,H.textContent=this.titleObj.str,L.append(H);const X=s.PDFDateString.toDateObject(this.modificationDate);if(X){const ce=document.createElement("span");ce.classList.add("popupDate"),ce.textContent="{{date}}, {{time}}",ce.dataset.l10nId="annotation_date_string",ce.dataset.l10nArgs=JSON.stringify({date:X.toLocaleDateString(),time:X.toLocaleTimeString()}),L.append(ce)}if(((ae=this.richText)==null?void 0:ae.str)&&(!((ne=this.contentsObj)!=null&&ne.str)||this.contentsObj.str===this.richText.str))m.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:L}),L.lastChild.classList.add("richText","popupContent");else{const ce=this._formatContents(this.contentsObj);L.append(ce)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ce of this.trigger)ce.addEventListener("click",this._toggle.bind(this)),ce.addEventListener("mouseover",this._show.bind(this,!1)),ce.addEventListener("mouseout",this._hide.bind(this,!1));return L.addEventListener("click",this._hide.bind(this,!0)),x.append(L),x}_formatContents({str:h,dir:x}){const L=document.createElement("p");L.classList.add("popupContent"),L.dir=x;const j=h.split(/(?:\r\n?|\n)/);for(let H=0,X=j.length;H<X;++H){const ae=j[H];L.append(document.createTextNode(ae)),H<X-1&&L.append(document.createElement("br"))}return L}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(h=!1){h&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(h=!0){h&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class p extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0}),this.textContent=h.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const h=document.createElement("div");h.classList.add("annotationTextContent"),h.setAttribute("role","comment");for(const x of this.textContent){const L=document.createElement("span");L.textContent=x,h.append(L)}this.container.append(h)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class C extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const h=this.data,{width:x,height:L}=I(h.rect),j=this.svgFactory.create(x,L,!0),H=this.svgFactory.createElement("svg:line");return H.setAttribute("x1",h.rect[2]-h.lineCoordinates[0]),H.setAttribute("y1",h.rect[3]-h.lineCoordinates[1]),H.setAttribute("x2",h.rect[2]-h.lineCoordinates[2]),H.setAttribute("y2",h.rect[3]-h.lineCoordinates[3]),H.setAttribute("stroke-width",h.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),j.append(H),this.container.append(j),this._createPopup(H,h),this.container}}class B extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const h=this.data,{width:x,height:L}=I(h.rect),j=this.svgFactory.create(x,L,!0),H=h.borderStyle.width,X=this.svgFactory.createElement("svg:rect");return X.setAttribute("x",H/2),X.setAttribute("y",H/2),X.setAttribute("width",x-H),X.setAttribute("height",L-H),X.setAttribute("stroke-width",H||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),j.append(X),this.container.append(j),this._createPopup(X,h),this.container}}class S extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const h=this.data,{width:x,height:L}=I(h.rect),j=this.svgFactory.create(x,L,!0),H=h.borderStyle.width,X=this.svgFactory.createElement("svg:ellipse");return X.setAttribute("cx",x/2),X.setAttribute("cy",L/2),X.setAttribute("rx",x/2-H/2),X.setAttribute("ry",L/2-H/2),X.setAttribute("stroke-width",H||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),j.append(X),this.container.append(j),this._createPopup(X,h),this.container}}class W extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const h=this.data,{width:x,height:L}=I(h.rect),j=this.svgFactory.create(x,L,!0);let H=[];for(const ae of h.vertices){const ne=ae.x-h.rect[0],ce=h.rect[3]-ae.y;H.push(ne+","+ce)}H=H.join(" ");const X=this.svgFactory.createElement(this.svgElementName);return X.setAttribute("points",H),X.setAttribute("stroke-width",h.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),j.append(X),this.container.append(j),this._createPopup(X,h),this.container}}class V extends W{constructor(h){super(h),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ee extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const h=this.data,{width:x,height:L}=I(h.rect),j=this.svgFactory.create(x,L,!0);for(const H of h.inkLists){let X=[];for(const ne of H){const ce=ne.x-h.rect[0],he=h.rect[3]-ne.y;X.push(`${ce},${he}`)}X=X.join(" ");const ae=this.svgFactory.createElement(this.svgElementName);ae.setAttribute("points",X),ae.setAttribute("stroke-width",h.borderStyle.width||1),ae.setAttribute("stroke","transparent"),ae.setAttribute("fill","transparent"),this._createPopup(ae,h),j.append(ae)}return this.container.append(j),this.container}}class re extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class le extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class oe extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class se extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class me extends P{constructor(h){var L,j,H;const x=!!(h.data.hasPopup||((L=h.data.titleObj)==null?void 0:L.str)||((j=h.data.contentsObj)==null?void 0:j.str)||((H=h.data.richText)==null?void 0:H.str));super(h,{isRenderable:x,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ee extends P{constructor(h){var j;super(h,{isRenderable:!0});const{filename:x,content:L}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(x,!0),this.content=L,(j=this.linkService.eventBus)==null||j.dispatch("fileattachmentannotation",{source:this,filename:x,content:L})}render(){var x,L;this.container.classList.add("fileAttachmentAnnotation");let h;return this.data.hasAppearance?h=document.createElement("div"):(h=document.createElement("img"),h.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),h.classList.add("popupTriggerArea"),h.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((x=this.data.titleObj)==null?void 0:x.str)||((L=this.data.contentsObj)==null?void 0:L.str)||this.data.richText)&&this._createPopup(h,this.data),this.container.append(h),this.container}_download(){var h;(h=this.downloadManager)==null||h.openOrDownloadData(this.container,this.content,this.filename)}}const w=class{static render(h){var ne,ce;const{annotations:x,div:L,viewport:j,accessibilityManager:H}=h;(0,s.setLayerDimensions)(L,j);const X={data:null,layer:L,page:h.page,viewport:j,linkService:h.linkService,downloadManager:h.downloadManager,imageResourcesPath:h.imageResourcesPath||"",renderForms:h.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:h.annotationStorage||new a.AnnotationStorage,enableScripting:h.enableScripting===!0,hasJSActions:h.hasJSActions,fieldObjects:h.fieldObjects};let ae=0;for(const he of x){if(he.noHTML)continue;if(he.annotationType!==i.AnnotationType.POPUP){const{width:ue,height:pe}=I(he.rect);if(ue<=0||pe<=0)continue}X.data=he;const J=D.create(X);if(!J.isRenderable)continue;const Q=J.render();if(he.hidden&&(Q.style.visibility="hidden"),Array.isArray(Q))for(const ue of Q)ue.style.zIndex=ae++,de(ne=w,U,Mt).call(ne,ue,he.id,L,H);else Q.style.zIndex=ae++,J instanceof v?L.prepend(Q):de(ce=w,U,Mt).call(ce,Q,he.id,L,H)}de(this,Z,Ft).call(this,L,h.annotationCanvasMap)}static update(h){const{annotationCanvasMap:x,div:L,viewport:j}=h;(0,s.setLayerDimensions)(L,{rotation:j.rotation}),de(this,Z,Ft).call(this,L,x),L.hidden=!1}};let we=w;U=new WeakSet,Mt=function(h,x,L,j){const H=h.firstChild||h;H.id=`${s.AnnotationPrefix}${x}`,L.append(h),j==null||j.moveElementInDOM(L,h,H,!1)},Z=new WeakSet,Ft=function(h,x){if(!!x){for(const[L,j]of x){const H=h.querySelector(`[data-annotation-id="${L}"]`);if(!H)continue;const{firstChild:X}=H;X?X.nodeName==="CANVAS"?X.replaceWith(j):X.before(j):H.append(j)}x.clear()}},ie(we,U),ie(we,Z),t.AnnotationLayer=we},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([a,f,m,_]){return["G",1-Math.min(1,.3*a+.59*m+.11*f+_)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_HTML([a]){const f=n(a);return`#${f}${f}${f}`}static RGB_G([a,f,m]){return["G",.3*a+.59*f+.11*m]}static RGB_HTML([a,f,m]){const _=n(a),l=n(f),c=n(m);return`#${_}${l}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB([a,f,m,_]){return["RGB",1-Math.min(1,a+_),1-Math.min(1,m+_),1-Math.min(1,f+_)]}static CMYK_HTML(a){const f=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(f)}static RGB_CMYK([a,f,m]){const _=1-a,l=1-f,c=1-m,I=Math.min(_,l,c);return["CMYK",_,l,c,I]}}t.ColorConverters=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=n(19);class s{static setupStorage(f,m,_,l,c){const I=l.getValue(m,{value:null});switch(_.name){case"textarea":if(I.value!==null&&(f.textContent=I.value),c==="print")break;f.addEventListener("input",D=>{l.setValue(m,{value:D.target.value})});break;case"input":if(_.attributes.type==="radio"||_.attributes.type==="checkbox"){if(I.value===_.attributes.xfaOn?f.setAttribute("checked",!0):I.value===_.attributes.xfaOff&&f.removeAttribute("checked"),c==="print")break;f.addEventListener("change",D=>{l.setValue(m,{value:D.target.checked?D.target.getAttribute("xfaOn"):D.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&f.setAttribute("value",I.value),c==="print")break;f.addEventListener("input",D=>{l.setValue(m,{value:D.target.value})})}break;case"select":if(I.value!==null)for(const D of _.children)D.attributes.value===I.value&&(D.attributes.selected=!0);f.addEventListener("input",D=>{const P=D.target.options,E=P.selectedIndex===-1?"":P[P.selectedIndex].value;l.setValue(m,{value:E})});break}}static setAttributes({html:f,element:m,storage:_=null,intent:l,linkService:c}){const{attributes:I}=m,D=f instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${l}`);for(const[P,E]of Object.entries(I))if(E!=null)switch(P){case"class":E.length&&f.setAttribute(P,E.join(" "));break;case"dataId":break;case"id":f.setAttribute("data-element-id",E);break;case"style":Object.assign(f.style,E);break;case"textContent":f.textContent=E;break;default:(!D||P!=="href"&&P!=="newWindow")&&f.setAttribute(P,E)}D&&c.addLinkAttributes(f,I.href,I.newWindow),_&&I.dataId&&this.setupStorage(f,I.dataId,m,_)}static render(f){var T;const m=f.annotationStorage,_=f.linkService,l=f.xfaHtml,c=f.intent||"display",I=document.createElement(l.name);l.attributes&&this.setAttributes({html:I,element:l,intent:c,linkService:_});const D=[[l,-1,I]],P=f.div;if(P.append(I),f.viewport){const d=`matrix(${f.viewport.transform.join(",")})`;P.style.transform=d}c!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const E=[];for(;D.length>0;){const[d,u,O]=D.at(-1);if(u+1===d.children.length){D.pop();continue}const k=d.children[++D.at(-1)[1]];if(k===null)continue;const{name:g}=k;if(g==="#text"){const v=document.createTextNode(k.value);E.push(v),O.append(v);continue}let o;if((T=k==null?void 0:k.attributes)!=null&&T.xmlns?o=document.createElementNS(k.attributes.xmlns,g):o=document.createElement(g),O.append(o),k.attributes&&this.setAttributes({html:o,element:k,storage:m,intent:c,linkService:_}),k.children&&k.children.length>0)D.push([k,-1,o]);else if(k.value){const v=document.createTextNode(k.value);i.XfaText.shouldBuildText(g)&&E.push(v),o.append(v)}}for(const d of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:E}}static update(f){const m=`matrix(${f.viewport.transform.join(",")})`;f.div.style.transform=m,f.div.hidden=!1}}t.XfaLayer=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=n(6),s=n(1),a=n(10);let f=class{constructor(){(0,s.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=f;{let T=function(o){let v=[];const y=[];for(const p of o){if(p.fn==="save"){v.push({fnId:92,fn:"group",items:[]}),y.push(v),v=v.at(-1).items;continue}p.fn==="restore"?v=y.pop():v.push(p)}return v},d=function(o){if(Number.isInteger(o))return o.toString();const v=o.toFixed(10);let y=v.length-1;if(v[y]!=="0")return v;do y--;while(v[y]==="0");return v.substring(0,v[y]==="."?y:y+1)},u=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${d(o[0])} ${d(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){const v=Math.acos(o[0])*180/Math.PI;return`rotate(${d(v)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${d(o[4])} ${d(o[5])})`;return`matrix(${d(o[0])} ${d(o[1])} ${d(o[2])} ${d(o[3])} ${d(o[4])} ${d(o[5])})`};const m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",c=["butt","round","square"],I=["miter","round","bevel"],D=function(o,v="",y=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!y)return URL.createObjectURL(new Blob([o],{type:v}));const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${v};base64,`;for(let B=0,S=o.length;B<S;B+=3){const W=o[B]&255,V=o[B+1]&255,Y=o[B+2]&255,ee=W>>2,re=(W&3)<<4|V>>4,le=B+1<S?(V&15)<<2|Y>>6:64,oe=B+2<S?Y&63:64;C+=p[ee]+p[re]+p[le]+p[oe]}return C},P=function(){const o=new Uint8Array([137,80,78,71,13,10,26,10]),v=12,y=new Int32Array(256);for(let Y=0;Y<256;Y++){let ee=Y;for(let re=0;re<8;re++)ee&1?ee=3988292384^ee>>1&2147483647:ee=ee>>1&2147483647;y[Y]=ee}function p(Y,ee,re){let le=-1;for(let oe=ee;oe<re;oe++){const se=(le^Y[oe])&255,me=y[se];le=le>>>8^me}return le^-1}function C(Y,ee,re,le){let oe=le;const se=ee.length;re[oe]=se>>24&255,re[oe+1]=se>>16&255,re[oe+2]=se>>8&255,re[oe+3]=se&255,oe+=4,re[oe]=Y.charCodeAt(0)&255,re[oe+1]=Y.charCodeAt(1)&255,re[oe+2]=Y.charCodeAt(2)&255,re[oe+3]=Y.charCodeAt(3)&255,oe+=4,re.set(ee,oe),oe+=ee.length;const me=p(re,le+4,oe);re[oe]=me>>24&255,re[oe+1]=me>>16&255,re[oe+2]=me>>8&255,re[oe+3]=me&255}function B(Y,ee,re){let le=1,oe=0;for(let se=ee;se<re;++se)le=(le+(Y[se]&255))%65521,oe=(oe+le)%65521;return oe<<16|le}function S(Y){if(!a.isNodeJS)return W(Y);try{let ee;parseInt(browser$1.versions.node)>=8?ee=Y:ee=Buffer.from(Y);const re=require$$5.deflateSync(ee,{level:9});return re instanceof Uint8Array?re:new Uint8Array(re)}catch(ee){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ee)}return W(Y)}function W(Y){let ee=Y.length;const re=65535,le=Math.ceil(ee/re),oe=new Uint8Array(2+ee+le*5+4);let se=0;oe[se++]=120,oe[se++]=156;let me=0;for(;ee>re;)oe[se++]=0,oe[se++]=255,oe[se++]=255,oe[se++]=0,oe[se++]=0,oe.set(Y.subarray(me,me+re),se),se+=re,me+=re,ee-=re;oe[se++]=1,oe[se++]=ee&255,oe[se++]=ee>>8&255,oe[se++]=~ee&65535&255,oe[se++]=(~ee&65535)>>8&255,oe.set(Y.subarray(me),se),se+=Y.length-me;const Ee=B(Y,0,Y.length);return oe[se++]=Ee>>24&255,oe[se++]=Ee>>16&255,oe[se++]=Ee>>8&255,oe[se++]=Ee&255,oe}function V(Y,ee,re,le){const oe=Y.width,se=Y.height;let me,Ee,we;const ve=Y.data;switch(ee){case s.ImageKind.GRAYSCALE_1BPP:Ee=0,me=1,we=oe+7>>3;break;case s.ImageKind.RGB_24BPP:Ee=2,me=8,we=oe*3;break;case s.ImageKind.RGBA_32BPP:Ee=6,me=8,we=oe*4;break;default:throw new Error("invalid format")}const K=new Uint8Array((1+we)*se);let F=0,b=0;for(let w=0;w<se;++w)K[F++]=0,K.set(ve.subarray(b,b+we),F),b+=we,F+=we;if(ee===s.ImageKind.GRAYSCALE_1BPP&&le){F=0;for(let w=0;w<se;w++){F++;for(let $=0;$<we;$++)K[F++]^=255}}const M=new Uint8Array([oe>>24&255,oe>>16&255,oe>>8&255,oe&255,se>>24&255,se>>16&255,se>>8&255,se&255,me,Ee,0,0,0]),U=S(K),z=o.length+v*3+M.length+U.length,Z=new Uint8Array(z);let A=0;return Z.set(o,A),A+=o.length,C("IHDR",M,Z,A),A+=v+M.length,C("IDATA",U,Z,A),A+=v+U.length,C("IEND",new Uint8Array(0),Z,A),D(Z,"image/png",re)}return function(ee,re,le){const oe=ee.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:ee.kind;return V(ee,oe,re,le)}}();class E{constructor(){this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(v,y){this.x=v,this.y=y}}let O=0,k=0,g=0;t.SVGGraphics=f=class{constructor(o,v,y=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new E,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=v,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!y,this._operatorIdMapping=[];for(const p in s.OPS)this._operatorIdMapping[s.OPS[p]]=p}getObject(o,v=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):v}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const v=o.fnArray,y=o.argsArray;for(let p=0,C=v.length;p<C;p++)if(v[p]===s.OPS.dependency)for(const B of y[p]){const S=B.startsWith("g_")?this.commonObjs:this.objs,W=new Promise(V=>{S.get(B,V)});this.current.dependencies.push(W)}return Promise.all(this.current.dependencies)}transform(o,v,y,p,C,B){const S=[o,v,y,p,C,B];this.transformMatrix=s.Util.transform(this.transformMatrix,S),this.tgrp=null}getSVG(o,v){this.viewport=v;const y=this._initialize(v);return this.loadDependencies(o).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),y))}convertOpList(o){const v=this._operatorIdMapping,y=o.argsArray,p=o.fnArray,C=[];for(let B=0,S=p.length;B<S;B++){const W=p[B];C.push({fnId:W,fn:v[W],args:y[B]})}return T(C)}executeOpTree(o){for(const v of o){const y=v.fn,p=v.fnId,C=v.args;switch(p|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(C);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case s.OPS.setFont:this.setFont(C);break;case s.OPS.showText:this.showText(C[0]);break;case s.OPS.showSpacedText:this.showText(C[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(C[0],C[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case s.OPS.setHScale:this.setHScale(C[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case s.OPS.setTextRise:this.setTextRise(C[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case s.OPS.setLineWidth:this.setLineWidth(C[0]);break;case s.OPS.setLineJoin:this.setLineJoin(C[0]);break;case s.OPS.setLineCap:this.setLineCap(C[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case s.OPS.setFillColorN:this.setFillColorN(C);break;case s.OPS.shadingFill:this.shadingFill(C[0]);break;case s.OPS.setDash:this.setDash(C[0],C[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case s.OPS.setFlatness:this.setFlatness(C[0]);break;case s.OPS.setGState:this.setGState(C[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case s.OPS.constructPath:this.constructPath(C[0],C[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(v.items);break;default:(0,s.warn)(`Unimplemented operator ${y}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,v,y,p,C,B){const S=this.current;S.textMatrix=S.lineMatrix=[o,v,y,p,C,B],S.textMatrixScale=Math.hypot(o,v),S.x=S.lineX=0,S.y=S.lineY=0,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${d(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",d(-S.y)),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtElement.append(S.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=s.IDENTITY_MATRIX,o.lineMatrix=s.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,v){const y=this.current;y.x=y.lineX+=o,y.y=y.lineY+=v,y.xcoords=[],y.ycoords=[],y.tspan=this.svgFactory.createElement("svg:tspan"),y.tspan.setAttributeNS(null,"font-family",y.fontFamily),y.tspan.setAttributeNS(null,"font-size",`${d(y.fontSize)}px`),y.tspan.setAttributeNS(null,"y",d(-y.y))}showText(o){const v=this.current,y=v.font,p=v.fontSize;if(p===0)return;const C=v.fontSizeScale,B=v.charSpacing,S=v.wordSpacing,W=v.fontDirection,V=v.textHScale*W,Y=y.vertical,ee=Y?1:-1,re=y.defaultVMetrics,le=p*v.fontMatrix[0];let oe=0;for(const Ee of o){if(Ee===null){oe+=W*S;continue}else if(typeof Ee=="number"){oe+=ee*Ee*p/1e3;continue}const we=(Ee.isSpace?S:0)+B,ve=Ee.fontChar;let K,F,b=Ee.width;if(Y){let U;const z=Ee.vmetric||re;U=Ee.vmetric?z[1]:b*.5,U=-U*le;const Z=z[2]*le;b=z?-z[0]:b,K=U/C,F=(oe+Z)/C}else K=oe/C,F=0;(Ee.isInFont||y.missingFile)&&(v.xcoords.push(v.x+K),Y&&v.ycoords.push(-v.y+F),v.tspan.textContent+=ve);let M;Y?M=b*le-we*W:M=b*le+we*W,oe+=M}v.tspan.setAttributeNS(null,"x",v.xcoords.map(d).join(" ")),Y?v.tspan.setAttributeNS(null,"y",v.ycoords.map(d).join(" ")):v.tspan.setAttributeNS(null,"y",d(-v.y)),Y?v.y-=oe:v.x+=oe*V,v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${d(v.fontSize)}px`),v.fontStyle!==m.fontStyle&&v.tspan.setAttributeNS(null,"font-style",v.fontStyle),v.fontWeight!==m.fontWeight&&v.tspan.setAttributeNS(null,"font-weight",v.fontWeight);const se=v.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(se===s.TextRenderingMode.FILL||se===s.TextRenderingMode.FILL_STROKE?(v.fillColor!==m.fillColor&&v.tspan.setAttributeNS(null,"fill",v.fillColor),v.fillAlpha<1&&v.tspan.setAttributeNS(null,"fill-opacity",v.fillAlpha)):v.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?v.tspan.setAttributeNS(null,"fill","transparent"):v.tspan.setAttributeNS(null,"fill","none"),se===s.TextRenderingMode.STROKE||se===s.TextRenderingMode.FILL_STROKE){const Ee=1/(v.textMatrixScale||1);this._setStrokeAttributes(v.tspan,Ee)}let me=v.textMatrix;v.textRise!==0&&(me=me.slice(),me[5]+=v.textRise),v.txtElement.setAttributeNS(null,"transform",`${u(me)} scale(${d(V)}, -1)`),v.txtElement.setAttributeNS(_,"xml:space","preserve"),v.txtElement.append(v.tspan),v.txtgrp.append(v.txtElement),this._ensureTransformGroup().append(v.txtElement)}setLeadingMoveText(o,v){this.setLeading(-v),this.moveText(o,v)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const v=D(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${v}); }
`}setFont(o){const v=this.current,y=this.commonObjs.get(o[0]);let p=o[1];v.font=y,this.embedFonts&&!y.missingFile&&!this.embeddedFonts[y.loadedName]&&(this.addFontStyle(y),this.embeddedFonts[y.loadedName]=y),v.fontMatrix=y.fontMatrix||s.FONT_IDENTITY_MATRIX;let C="normal";y.black?C="900":y.bold&&(C="bold");const B=y.italic?"italic":"normal";p<0?(p=-p,v.fontDirection=-1):v.fontDirection=1,v.fontSize=p,v.fontFamily=y.loadedName,v.fontWeight=C,v.fontStyle=B,v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"y",d(-v.y)),v.xcoords=[],v.ycoords=[]}endText(){var v;const o=this.current;o.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((v=o.txtElement)==null?void 0:v.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=c[o]}setLineJoin(o){this.current.lineJoin=I[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,v,y){this.current.strokeColor=s.Util.makeHexColor(o,v,y)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,v,y){this.current.fillColor=s.Util.makeHexColor(o,v,y),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const v=this.viewport.width,y=this.viewport.height,p=s.Util.inverseTransform(this.transformMatrix),C=s.Util.applyTransform([0,0],p),B=s.Util.applyTransform([0,y],p),S=s.Util.applyTransform([v,0],p),W=s.Util.applyTransform([v,y],p),V=Math.min(C[0],B[0],S[0],W[0]),Y=Math.min(C[1],B[1],S[1],W[1]),ee=Math.max(C[0],B[0],S[0],W[0]),re=Math.max(C[1],B[1],S[1],W[1]),le=this.svgFactory.createElement("svg:rect");le.setAttributeNS(null,"x",V),le.setAttributeNS(null,"y",Y),le.setAttributeNS(null,"width",ee-V),le.setAttributeNS(null,"height",re-Y),le.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&le.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(le)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const v=o[1],y=o[2],p=o[3]||s.IDENTITY_MATRIX,[C,B,S,W]=o[4],V=o[5],Y=o[6],ee=o[7],re=`shading${g++}`,[le,oe,se,me]=s.Util.normalizeRect([...s.Util.applyTransform([C,B],p),...s.Util.applyTransform([S,W],p)]),[Ee,we]=s.Util.singularValueDecompose2dScale(p),ve=V*Ee,K=Y*we,F=this.svgFactory.createElement("svg:pattern");F.setAttributeNS(null,"id",re),F.setAttributeNS(null,"patternUnits","userSpaceOnUse"),F.setAttributeNS(null,"width",ve),F.setAttributeNS(null,"height",K),F.setAttributeNS(null,"x",`${le}`),F.setAttributeNS(null,"y",`${oe}`);const b=this.svg,M=this.transformMatrix,U=this.current.fillColor,z=this.current.strokeColor,Z=this.svgFactory.create(se-le,me-oe);if(this.svg=Z,this.transformMatrix=p,ee===2){const A=s.Util.makeHexColor(...v);this.current.fillColor=A,this.current.strokeColor=A}return this.executeOpTree(this.convertOpList(y)),this.svg=b,this.transformMatrix=M,this.current.fillColor=U,this.current.strokeColor=z,F.append(Z.childNodes[0]),this.defs.append(F),`url(#${re})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const v=`shading${g++}`,y=o[3];let p;switch(o[1]){case"axial":const C=o[4],B=o[5];p=this.svgFactory.createElement("svg:linearGradient"),p.setAttributeNS(null,"id",v),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"x1",C[0]),p.setAttributeNS(null,"y1",C[1]),p.setAttributeNS(null,"x2",B[0]),p.setAttributeNS(null,"y2",B[1]);break;case"radial":const S=o[4],W=o[5],V=o[6],Y=o[7];p=this.svgFactory.createElement("svg:radialGradient"),p.setAttributeNS(null,"id",v),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"cx",W[0]),p.setAttributeNS(null,"cy",W[1]),p.setAttributeNS(null,"r",Y),p.setAttributeNS(null,"fx",S[0]),p.setAttributeNS(null,"fy",S[1]),p.setAttributeNS(null,"fr",V);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const C of y){const B=this.svgFactory.createElement("svg:stop");B.setAttributeNS(null,"offset",C[0]),B.setAttributeNS(null,"stop-color",C[1]),p.append(B)}return this.defs.append(p),`url(#${v})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,v){this.current.dashArray=o,this.current.dashPhase=v}constructPath(o,v){const y=this.current;let p=y.x,C=y.y,B=[],S=0;for(const W of o)switch(W|0){case s.OPS.rectangle:p=v[S++],C=v[S++];const V=v[S++],Y=v[S++],ee=p+V,re=C+Y;B.push("M",d(p),d(C),"L",d(ee),d(C),"L",d(ee),d(re),"L",d(p),d(re),"Z");break;case s.OPS.moveTo:p=v[S++],C=v[S++],B.push("M",d(p),d(C));break;case s.OPS.lineTo:p=v[S++],C=v[S++],B.push("L",d(p),d(C));break;case s.OPS.curveTo:p=v[S+4],C=v[S+5],B.push("C",d(v[S]),d(v[S+1]),d(v[S+2]),d(v[S+3]),d(p),d(C)),S+=6;break;case s.OPS.curveTo2:B.push("C",d(p),d(C),d(v[S]),d(v[S+1]),d(v[S+2]),d(v[S+3])),p=v[S+2],C=v[S+3],S+=4;break;case s.OPS.curveTo3:p=v[S+2],C=v[S+3],B.push("C",d(v[S]),d(v[S+1]),d(p),d(C),d(p),d(C)),S+=4;break;case s.OPS.closePath:B.push("Z");break}B=B.join(" "),y.path&&o.length>0&&o[0]!==s.OPS.rectangle&&o[0]!==s.OPS.moveTo?B=y.path.getAttributeNS(null,"d")+B:(y.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(y.path)),y.path.setAttributeNS(null,"d",B),y.path.setAttributeNS(null,"fill","none"),y.element=y.path,y.setCurrentPoint(p,C)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const v=`clippath${O++}`,y=this.svgFactory.createElement("svg:clipPath");y.setAttributeNS(null,"id",v),y.setAttributeNS(null,"transform",u(this.transformMatrix));const p=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?p.setAttributeNS(null,"clip-rule","evenodd"):p.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,y.append(p),this.defs.append(y),o.activeClipUrl){o.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;y.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${v})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const v=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",v)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[v,y]of o)switch(v){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y);break;case"CA":this.setStrokeAlpha(y);break;case"ca":this.setFillAlpha(y);break;default:(0,s.warn)(`Unimplemented graphic state operator ${v}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,v=1){const y=this.current;let p=y.dashArray;v!==1&&p.length>0&&(p=p.map(function(C){return v*C})),o.setAttributeNS(null,"stroke",y.strokeColor),o.setAttributeNS(null,"stroke-opacity",y.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",d(y.miterLimit)),o.setAttributeNS(null,"stroke-linecap",y.lineCap),o.setAttributeNS(null,"stroke-linejoin",y.lineJoin),o.setAttributeNS(null,"stroke-width",d(v*y.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",p.map(d).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",d(v*y.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const v=this.getObject(o);if(!v){(0,s.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(v)}paintInlineImageXObject(o,v){const y=o.width,p=o.height,C=P(o,this.forceDataSchema,!!v),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",d(y)),B.setAttributeNS(null,"height",d(p)),this.current.element=B,this.clip("nonzero");const S=this.svgFactory.createElement("svg:image");S.setAttributeNS(l,"xlink:href",C),S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y",d(-p)),S.setAttributeNS(null,"width",d(y)+"px"),S.setAttributeNS(null,"height",d(p)+"px"),S.setAttributeNS(null,"transform",`scale(${d(1/y)} ${d(-1/p)})`),v?v.append(S):this._ensureTransformGroup().append(S)}paintImageMaskXObject(o){const v=this.getObject(o.data,o);if(v.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const y=this.current,p=v.width,C=v.height,B=y.fillColor;y.maskId=`mask${k++}`;const S=this.svgFactory.createElement("svg:mask");S.setAttributeNS(null,"id",y.maskId);const W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",d(p)),W.setAttributeNS(null,"height",d(C)),W.setAttributeNS(null,"fill",B),W.setAttributeNS(null,"mask",`url(#${y.maskId})`),this.defs.append(S),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(v,S)}paintFormXObjectBegin(o,v){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),v){const y=v[2]-v[0],p=v[3]-v[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",v[0]),C.setAttributeNS(null,"y",v[1]),C.setAttributeNS(null,"width",d(y)),C.setAttributeNS(null,"height",d(p)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const v=this.svgFactory.create(o.width,o.height),y=this.svgFactory.createElement("svg:defs");v.append(y),this.defs=y;const p=this.svgFactory.createElement("svg:g");return p.setAttributeNS(null,"transform",u(o.transform)),v.append(p),this.svg=p,v}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",u(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return f.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return m.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),f=__w_pdfjs_require__(5),m=__w_pdfjs_require__(32),_=__w_pdfjs_require__(14),l=__w_pdfjs_require__(35),c=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$1);const pdf=getDefaultExportFromCjs(pdf$1.exports),pdfjs=_mergeNamespaces({__proto__:null,default:pdf},[pdf$1.exports]);var __spreadArray=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,s=t.length,a;i<s;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(e,t){var n={};return allEvents.forEach(function(i){var s=e[i];!s||(t?n[i]=function(a){return s(a,t(i))}:n[i]=s)}),n}function makeCancellablePromise(e){var t=!1,n=new Promise(function(i,s){e.then(function(a){return!t&&i(a)}).catch(function(a){return!t&&s(a)})});return{promise:n,cancel:function(){t=!0}}}function r(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function clsx(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}var isProduction$1=!0,prefix="Invariant failed";function invariant(e,t){if(!e){if(isProduction$1)throw new Error(prefix);var n=typeof t=="function"?t():t,i=n?"".concat(prefix,": ").concat(n):prefix;throw new Error(i)}}var isProduction=!0;function warning(e,t){if(!isProduction){if(e)return;var n="Warning: "+t;typeof console<"u"&&console.warn(n);try{throw Error(n)}catch{}}}const DocumentContext=react.exports.createContext(null);function Message({children:e,type:t}){return jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:e})}Message.propTypes={children:propTypes.exports.node,type:propTypes.exports.oneOf(["error","loading","no-data"]).isRequired};const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(n=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(t,"Destination is not specified."),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{invariant(Array.isArray(n),`"${n}" is not a valid destination array.`);const i=n[0];new Promise(s=>{invariant(this.pdfDocument,"PDF document not loaded."),i instanceof Object?this.pdfDocument.getPageIndex(i).then(a=>{s(a)}).catch(()=>{invariant(!1,`"${i}" is not a valid page reference.`)}):typeof i=="number"?s(i):invariant(!1,`"${i}" is not a valid destination reference.`)}).then(s=>{const a=s+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(a>=1&&a<=this.pagesCount,`"${a}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:s,pageNumber:a})})})}navigateTo(t){this.goToDestination(t)}goToPage(){}addLinkAttributes(t,n,i){t.href=n,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined$1(e){return typeof e<"u"}function isProvided(e){return isDefined$1(e)&&e!==null}function isString(e){return typeof e=="string"}function isArrayBuffer(e){return e instanceof ArrayBuffer}function isBlob(e){return invariant(isBrowser,"isBlob can only be used in a browser environment"),e instanceof Blob}function isDataURI(e){return isString(e)&&/^data:/.test(e)}function dataURItoByteString(e){invariant(isDataURI(e),"Invalid data URI.");const[t="",n=""]=e.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(e){e&&e.cancel&&e.cancel()}function makePageCallback(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function isCancelException(e){return e.name==="RenderingCancelledException"}function loadFromFile(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return n(new Error("Error while reading a file."));t(i.result)},i.onerror=s=>{if(!s.target)return n(new Error("Error while reading a file."));const{error:a}=s.target;if(!a)return n(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},i.readAsArrayBuffer(e)})}function reducer$1(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function useResolver(){return react.exports.useReducer(reducer$1,{value:void 0,error:void 0})}const eventProps=(()=>{const e={};return allEvents.forEach(t=>{e[t]=propTypes.exports.func}),e})(),isTypedArray=propTypes.exports.oneOfType([propTypes.exports.instanceOf(Int8Array),propTypes.exports.instanceOf(Uint8Array),propTypes.exports.instanceOf(Uint8ClampedArray),propTypes.exports.instanceOf(Int16Array),propTypes.exports.instanceOf(Uint16Array),propTypes.exports.instanceOf(Int32Array),propTypes.exports.instanceOf(Uint32Array),propTypes.exports.instanceOf(Float32Array),propTypes.exports.instanceOf(Float64Array)]),fileTypes=[propTypes.exports.string,propTypes.exports.instanceOf(ArrayBuffer),propTypes.exports.shape({data:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.instanceOf(ArrayBuffer),propTypes.exports.arrayOf(propTypes.exports.number.isRequired),isTypedArray]).isRequired}),propTypes.exports.shape({range:propTypes.exports.instanceOf(pdf$1.exports.PDFDataRangeTransport).isRequired}),propTypes.exports.shape({url:propTypes.exports.string.isRequired})];typeof Blob<"u"&&fileTypes.push(propTypes.exports.instanceOf(Blob));const isClassName=propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.arrayOf(propTypes.exports.string)]),isFile=propTypes.exports.oneOfType(fileTypes);propTypes.exports.instanceOf(LinkService);propTypes.exports.oneOf(["_self","_blank","_parent","_top"]);propTypes.exports.shape({commonObjs:propTypes.exports.shape({}).isRequired,getAnnotations:propTypes.exports.func.isRequired,getTextContent:propTypes.exports.func.isRequired,getViewport:propTypes.exports.func.isRequired,render:propTypes.exports.func.isRequired});function isPageIndex(e,t,n){const{[t]:i,pageNumber:s,pdf:a}=e;if(!isDefined$1(a))return null;if(isDefined$1(i)){if(typeof i!="number")return new Error(`\`${t}\` of type \`${typeof i}\` supplied to \`${n}\`, expected \`number\`.`);if(i<0)return new Error(`Expected \`${t}\` to be greater or equal to 0.`);const{numPages:f}=a;if(i+1>f)return new Error(`Expected \`${t}\` to be less or equal to ${f-1}.`)}else if(!isDefined$1(s))return new Error(`\`${t}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null}function isPageNumber(e,t,n){const{[t]:i,pageIndex:s,pdf:a}=e;if(!isDefined$1(a))return null;if(isDefined$1(i)){if(typeof i!="number")return new Error(`\`${t}\` of type \`${typeof i}\` supplied to \`${n}\`, expected \`number\`.`);if(i<1)return new Error(`Expected \`${t}\` to be greater or equal to 1.`);const{numPages:f}=a;if(i>f)return new Error(`Expected \`${t}\` to be less or equal to ${f}.`)}else if(!isDefined$1(s))return new Error(`\`${t}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null}const isPdf=propTypes.exports.oneOfType([propTypes.exports.shape({getDestination:propTypes.exports.func.isRequired,getOutline:propTypes.exports.func.isRequired,getPage:propTypes.exports.func.isRequired,numPages:propTypes.exports.number.isRequired}),propTypes.exports.bool]),isRef=propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.exact({current:propTypes.exports.any})]),isRenderMode=propTypes.exports.oneOf(["canvas","none","svg"]),isRotate=propTypes.exports.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(e,t,n,i){function s(a){return a instanceof n?a:new n(function(f){f(a)})}return new(n||(n=Promise))(function(a,f){function m(c){try{l(i.next(c))}catch(I){f(I)}}function _(c){try{l(i.throw(c))}catch(I){f(I)}}function l(c){c.done?a(c.value):s(c.value).then(m,_)}l((i=i.apply(e,t||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(e,t)=>{switch(t){case PasswordResponses$1.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");e(n);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");e(n);break}}},Document=react.exports.forwardRef(function e(t,n){var{children:i,className:s,error:a="Failed to load PDF file.",externalLinkRel:f,externalLinkTarget:m,file:_,inputRef:l,imageResourcesPath:c,loading:I="Loading PDF\u2026",noData:D="No PDF file specified.",onItemClick:P,onLoadError:E,onLoadProgress:T,onLoadSuccess:d,onPassword:u=defaultOnPassword,onSourceError:O,onSourceSuccess:k,options:g,renderMode:o,rotate:v}=t,y=__rest$1(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[p,C]=useResolver(),{value:B,error:S}=p,[W,V]=useResolver(),{value:Y,error:ee}=W,re=react.exports.useRef(new LinkService),le=react.exports.useRef([]),oe=react.exports.useRef({scrollPageIntoView:({dest:h,pageIndex:x,pageNumber:L})=>{if(P){P({dest:h,pageIndex:x,pageNumber:L});return}const j=le.current[x];if(j){j.scrollIntoView();return}warning(!1,`An internal link leading to page ${L} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});react.exports.useImperativeHandle(n,()=>({linkService:re,pages:le,viewer:oe}),[]);function se(){k&&k()}function me(){!S||(warning(!1,S.toString()),O&&O(S))}function Ee(){C({type:"RESET"})}react.exports.useEffect(Ee,[_,C]);const we=react.exports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!_)return null;if(typeof _=="string")return isDataURI(_)?{data:dataURItoByteString(_)}:(displayCORSWarning(),{url:_});if(_ instanceof PDFDataRangeTransport)return{range:_};if(isArrayBuffer(_))return{data:_};if(isBrowser&&isBlob(_))return{data:yield loadFromFile(_)};if(invariant(typeof _=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant("data"in _||"range"in _||"url"in _,"Invalid parameter object: need either .data, .range or .url"),"url"in _&&typeof _.url=="string"){if(isDataURI(_.url)){const{url:h}=_,x=__rest$1(_,["url"]),L=dataURItoByteString(h);return Object.assign({data:L},x)}displayCORSWarning()}return _}),[_]);react.exports.useEffect(()=>{const h=makeCancellablePromise(we());return h.promise.then(x=>{C({type:"RESOLVE",value:x})}).catch(x=>{C({type:"REJECT",error:x})}),()=>{cancelRunningTask(h)}},[we,C]),react.exports.useEffect(()=>{if(!(typeof B>"u")){if(B===!1){me();return}se()}},[B]);function ve(){!Y||(d&&d(Y),le.current=new Array(Y.numPages),re.current.setDocument(Y))}function K(){!ee||(warning(!1,ee.toString()),E&&E(ee))}function F(){V({type:"RESET"})}react.exports.useEffect(F,[V,B]);function b(){if(!B)return;const h=g?Object.assign(Object.assign({},B),g):B,x=pdf$1.exports.getDocument(h);T&&(x.onProgress=T),u&&(x.onPassword=u);const L=x;return L.promise.then(j=>{V({type:"RESOLVE",value:j})}).catch(j=>{V({type:"REJECT",error:j})}),()=>{L.destroy()}}react.exports.useEffect(b,[g,V,B]),react.exports.useEffect(()=>{if(!(typeof Y>"u")){if(Y===!1){K();return}ve()}},[Y]);function M(){re.current.setViewer(oe.current),re.current.setExternalLinkRel(f),re.current.setExternalLinkTarget(m)}react.exports.useEffect(M,[f,m]);function U(h,x){le.current[h]=x}function z(h){delete le.current[h]}const Z={imageResourcesPath:c,linkService:re.current,pdf:Y,registerPage:U,renderMode:o,rotate:v,unregisterPage:z},A=react.exports.useMemo(()=>makeEventProps(y,()=>Y),[y,Y]);function w(){return jsx(DocumentContext.Provider,{value:Z,children:i})}function $(){return _?Y==null?jsx(Message,{type:"loading",children:typeof I=="function"?I():I}):Y===!1?jsx(Message,{type:"error",children:typeof a=="function"?a():a}):w():jsx(Message,{type:"no-data",children:typeof D=="function"?D():D})}return jsx("div",{...Object.assign({className:clsx("react-pdf__Document",s),ref:l,style:{["--scale-factor"]:"1"}},A),children:$()})}),isFunctionOrNode$1=propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:propTypes.exports.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:propTypes.exports.string,externalLinkTarget:propTypes.exports.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:propTypes.exports.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:propTypes.exports.func,onLoadError:propTypes.exports.func,onLoadProgress:propTypes.exports.func,onLoadSuccess:propTypes.exports.func,onPassword:propTypes.exports.func,onSourceError:propTypes.exports.func,onSourceSuccess:propTypes.exports.func,options:propTypes.exports.shape({cMapUrl:propTypes.exports.string,cMapPacked:propTypes.exports.bool,httpHeaders:propTypes.exports.object,standardFontDataUrl:propTypes.exports.string,withCredentials:propTypes.exports.bool}),rotate:propTypes.exports.number});const Document$1=Document;function mergeRefs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);if(n.length<=1){var i=n[0];return i||null}return function(a){n.forEach(function(f){typeof f=="function"?f(a):f&&(f.current=a)})}}const PageContext=react.exports.createContext(null),ANNOTATION_MODE=pdf$1.exports.AnnotationMode;function PageCanvas(e){const t=react.exports.useContext(PageContext);invariant(t,"Unable to find Page context.");const n=Object.assign(Object.assign({},t),e),{canvasBackground:i,devicePixelRatio:s,onRenderError:a,onRenderSuccess:f,page:m,renderForms:_,rotate:l,scale:c}=n,{canvasRef:I}=e,D=react.exports.useRef(null);invariant(m,"Attempted to render page canvas, but no page was specified.");const P=s||getDevicePixelRatio();function E(){!m||f&&f(makePageCallback(m,c))}function T(g){isCancelException(g)||(warning(!1,g.toString()),a&&a(g))}const d=react.exports.useMemo(()=>m.getViewport({scale:c*P,rotation:l}),[P,m,l,c]),u=react.exports.useMemo(()=>m.getViewport({scale:c,rotation:l}),[m,l,c]);function O(){if(!m)return;m.cleanup();const{current:g}=D;if(!g)return;g.width=d.width,g.height=d.height,g.style.width=`${Math.floor(u.width)}px`,g.style.height=`${Math.floor(u.height)}px`,g.style.visibility="hidden";const o={annotationMode:_?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:g.getContext("2d",{alpha:!1}),viewport:d};i&&(o.background=i);const v=m.render(o),y=v;return v.promise.then(()=>{g.style.visibility="",E()}).catch(T),()=>cancelRunningTask(y)}react.exports.useEffect(O,[i,D,P,m,_,d,u]);const k=react.exports.useCallback(()=>{const{current:g}=D;g&&(g.width=0,g.height=0)},[D]);return react.exports.useEffect(()=>k,[k]),jsx("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(I,D),style:{display:"block",userSelect:"none"}})}PageCanvas.propTypes={canvasRef:isRef};function PageSVG(){const e=react.exports.useContext(PageContext);invariant(e,"Unable to find Page context.");const{onRenderSuccess:t,onRenderError:n,page:i,rotate:s,scale:a}=e,[f,m]=useResolver(),{value:_,error:l}=f;invariant(i,"Attempted to render page SVG, but no page was specified.");function c(){!i||t&&t(makePageCallback(i,a))}function I(){!l||isCancelException(l)||(warning(!1,l.toString()),n&&n(l))}const D=react.exports.useMemo(()=>i.getViewport({scale:a,rotation:s}),[i,s,a]);function P(){m({type:"RESET"})}react.exports.useEffect(P,[i,m,D]);function E(){if(!i)return;const O=makeCancellablePromise(i.getOperatorList());return O.promise.then(k=>{new pdf$1.exports.SVGGraphics(i.commonObjs,i.objs).getSVG(k,D).then(o=>{m({type:"RESOLVE",value:o})}).catch(o=>{m({type:"REJECT",error:o})})}).catch(k=>{m({type:"REJECT",error:k})}),()=>cancelRunningTask(O)}react.exports.useEffect(E,[i,m,D]),react.exports.useEffect(()=>{if(_!==void 0){if(_===!1){I();return}c()}},[_]);function T(O){if(!O||!_)return;O.firstElementChild||O.appendChild(_);const{width:k,height:g}=D;_.setAttribute("width",`${k}`),_.setAttribute("height",`${g}`)}const{width:d,height:u}=D;return jsx("div",{className:"react-pdf__Page__svg",ref:O=>T(O),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:d,height:u,userSelect:"none"}})}function isTextItem(e){return"str"in e}function TextLayer(){const e=react.exports.useContext(PageContext);invariant(e,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:f,pageIndex:m,pageNumber:_,rotate:l,scale:c}=e,[I,D]=useResolver(),{value:P,error:E}=I,T=react.exports.useRef(null),d=react.exports.useRef();invariant(f,"Attempted to load page text content, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function u(){!P||i&&i(P)}function O(){!E||(warning(!1,E.toString()),n&&n(E))}function k(){D({type:"RESET"})}react.exports.useEffect(k,[f,D]);function g(){if(!f)return;const S=makeCancellablePromise(f.getTextContent()),W=S;return S.promise.then(V=>{D({type:"RESOLVE",value:V})}).catch(V=>{D({type:"REJECT",error:V})}),()=>cancelRunningTask(W)}react.exports.useEffect(g,[f,D]),react.exports.useEffect(()=>{if(P!==void 0){if(P===!1){O();return}u()}},[P]);const o=react.exports.useCallback(()=>{a&&a()},[a]),v=react.exports.useCallback(S=>{warning(!1,S.toString()),s&&s(S)},[s]);function y(){const S=d.current;!S||S.classList.add("active")}function p(){const S=d.current;!S||S.classList.remove("active")}const C=react.exports.useMemo(()=>f.getViewport({scale:c,rotation:l}),[f,l,c]);function B(){if(!f||!P)return;const{current:S}=T;if(!S)return;S.innerHTML="";const W=f.streamTextContent(),V={container:S,textContentSource:W,viewport:C},Y=pdf$1.exports.renderTextLayer(V),ee=Y;return Y.promise.then(()=>{const re=document.createElement("div");if(re.className="endOfContent",S.append(re),d.current=re,t){let le=0;P.items.forEach((oe,se)=>{if(!isTextItem(oe))return;const me=S.children[le];if(!me)return;const Ee=t(Object.assign({pageIndex:m,pageNumber:_,itemIndex:se},oe));me.innerHTML=Ee,le+=oe.str&&oe.hasEOL?2:1})}o()}).catch(v),()=>cancelRunningTask(ee)}return react.exports.useLayoutEffect(B,[t,v,o,f,m,_,P,C]),jsx("div",{className:"react-pdf__Page__textContent textLayer",onMouseUp:p,onMouseDown:y,ref:T})}function AnnotationLayer(){const e=react.exports.useContext(DocumentContext);invariant(e,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const t=react.exports.useContext(PageContext);invariant(t,"Unable to find Page context.");const n=Object.assign(Object.assign({},e),t),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:f,onRenderAnnotationLayerError:m,onRenderAnnotationLayerSuccess:_,page:l,renderForms:c,rotate:I,scale:D=1}=n,[P,E]=useResolver(),{value:T,error:d}=P,u=react.exports.useRef(null);invariant(l,"Attempted to load page annotations, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function O(){!T||f&&f(T)}function k(){!d||(warning(!1,d.toString()),a&&a(d))}function g(){E({type:"RESET"})}react.exports.useEffect(g,[E,l]);function o(){if(!l)return;const B=makeCancellablePromise(l.getAnnotations()),S=B;return B.promise.then(W=>{E({type:"RESOLVE",value:W})}).catch(W=>{E({type:"REJECT",error:W})}),()=>{cancelRunningTask(S)}}react.exports.useEffect(o,[E,l,c]),react.exports.useEffect(()=>{if(T!==void 0){if(T===!1){k();return}O()}},[T]);function v(){_&&_()}function y(B){warning(!1,`${B}`),m&&m(B)}const p=react.exports.useMemo(()=>l.getViewport({scale:D,rotation:I}),[l,I,D]);function C(){if(!l||!T)return;const{current:B}=u;if(!B)return;const S=p.clone({dontFlip:!0}),W={annotations:T,div:B,downloadManager:null,imageResourcesPath:i,linkService:s,page:l,renderForms:c,viewport:S};B.innerHTML="";try{pdf$1.exports.AnnotationLayer.render(W),v()}catch(V){y(V)}return()=>{}}return react.exports.useEffect(C,[T,i,s,l,c,p]),jsx("div",{className:"react-pdf__Page__annotations annotationLayer",ref:u})}var __rest=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n};const defaultScale=1;function Page(e){const t=react.exports.useContext(DocumentContext);invariant(t,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const n=Object.assign(Object.assign({},t),e),{canvasBackground:i,canvasRef:s,children:a,className:f,customTextRenderer:m,devicePixelRatio:_,error:l="Failed to load the page.",height:c,inputRef:I,loading:D="Loading page\u2026",noData:P="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetTextError:d,onGetTextSuccess:u,onLoadError:O,onLoadSuccess:k,onRenderAnnotationLayerError:g,onRenderAnnotationLayerSuccess:o,onRenderError:v,onRenderSuccess:y,onRenderTextLayerError:p,onRenderTextLayerSuccess:C,pageIndex:B,pageNumber:S,pdf:W,registerPage:V,renderAnnotationLayer:Y=!0,renderForms:ee=!1,renderMode:re="canvas",renderTextLayer:le=!0,rotate:oe,scale:se=defaultScale,unregisterPage:me,width:Ee}=n,we=__rest(n,["canvasBackground","canvasRef","children","className","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ve,K]=useResolver(),{value:F,error:b}=ve,M=react.exports.useRef(null);invariant(W,"Attempted to load a page, but no document was specified.");const U=isProvided(S)?S-1:B!=null?B:null,z=S!=null?S:isProvided(B)?B+1:null,Z=oe!=null?oe:F?F.rotate:null,A=react.exports.useMemo(()=>{if(!F)return null;let ue=1;const pe=se!=null?se:defaultScale;if(Ee||c){const ye=F.getViewport({scale:1,rotation:Z});Ee?ue=Ee/ye.width:c&&(ue=c/ye.height)}return pe*ue},[c,F,Z,se,Ee]);function w(){return()=>{U!==null&&me&&me(U)}}react.exports.useEffect(w,[W,U,me]);function $(){if(k){if(!F||!A)return;k(makePageCallback(F,A))}if(V){if(U===null||!M.current)return;V(U,M.current)}}function h(){!b||(warning(!1,b.toString()),O&&O(b))}function x(){K({type:"RESET"})}react.exports.useEffect(x,[K,W,U]);function L(){if(!W||!z)return;const ue=makeCancellablePromise(W.getPage(z)),pe=ue;return ue.promise.then(ye=>{K({type:"RESOLVE",value:ye})}).catch(ye=>{K({type:"REJECT",error:ye})}),()=>cancelRunningTask(pe)}react.exports.useEffect(L,[K,W,U,z,V]),react.exports.useEffect(()=>{if(F!==void 0){if(F===!1){h();return}$()}},[F,A]);const j=F&&isProvided(U)&&isProvided(z)&&isProvided(Z)&&isProvided(A)?{canvasBackground:i,customTextRenderer:m,devicePixelRatio:_,onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetTextError:d,onGetTextSuccess:u,onRenderAnnotationLayerError:g,onRenderAnnotationLayerSuccess:o,onRenderError:v,onRenderSuccess:y,onRenderTextLayerError:p,onRenderTextLayerSuccess:C,page:F,pageIndex:U,pageNumber:z,renderForms:ee,rotate:Z,scale:A}:null,H=react.exports.useMemo(()=>makeEventProps(we,()=>F&&(A?makePageCallback(F,A):void 0)),[we,F,A]),X=`${U}@${A}/${Z}`,ae=`${U}/${Z}`;function ne(){switch(re){case"none":return null;case"svg":return jsx(PageSVG,{},`${ae}_svg`);case"canvas":default:return jsx(PageCanvas,{canvasRef:s},`${X}_canvas`)}}function ce(){return le?jsx(TextLayer,{},`${X}_text`):null}function he(){return Y?jsx(AnnotationLayer,{},`${X}_annotations`):null}function J(){return jsxs(PageContext.Provider,{value:j,children:[ne(),ce(),he(),a]})}function Q(){return z?W===null||F===void 0||F===null?jsx(Message,{type:"loading",children:typeof D=="function"?D():D}):W===!1||F===!1?jsx(Message,{type:"error",children:typeof l=="function"?l():l}):J():jsx(Message,{type:"no-data",children:typeof P=="function"?P():P})}return jsx("div",{...Object.assign({className:clsx("react-pdf__Page",f),"data-page-number":z,ref:mergeRefs(I,M),style:{["--scale-factor"]:`${A}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},H),children:Q()})}const isFunctionOrNode=propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:propTypes.exports.string,canvasRef:isRef,children:propTypes.exports.node,className:isClassName,customTextRenderer:propTypes.exports.func,devicePixelRatio:propTypes.exports.number,error:isFunctionOrNode,height:propTypes.exports.number,imageResourcesPath:propTypes.exports.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:propTypes.exports.func,onGetTextSuccess:propTypes.exports.func,onLoadError:propTypes.exports.func,onLoadSuccess:propTypes.exports.func,onRenderError:propTypes.exports.func,onRenderSuccess:propTypes.exports.func,onRenderTextLayerError:propTypes.exports.func,onRenderTextLayerSuccess:propTypes.exports.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:propTypes.exports.bool,renderForms:propTypes.exports.bool,renderMode:isRenderMode,renderTextLayer:propTypes.exports.bool,rotate:isRotate,scale:propTypes.exports.number,width:propTypes.exports.number});displayWorkerWarning();pdf$1.exports.GlobalWorkerOptions.workerSrc="pdf.worker.js";var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(e,t){var n=withMimeType(e);if(typeof n.path!="string"){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof i=="string"&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function withMimeType(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var i=t.split(".").pop().toLowerCase(),s=COMMON_MIME_TYPES.get(i);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(e){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(t){return isObject(e)&&isDataTransfer(e.dataTransfer)?[2,getDataTransferFiles(e.dataTransfer,e.type)]:isChangeEvt(e)?[2,getInputFiles(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,getFsHandleFiles(e)]:[2,[]]})})}function isDataTransfer(e){return isObject(e)}function isChangeEvt(e){return isObject(e)&&isObject(e.target)}function isObject(e){return typeof e=="object"&&e!==null}function getInputFiles(e){return fromList(e.target.files).map(function(t){return toFileWithPath(t)})}function getFsHandleFiles(e){return __awaiter$1(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){return i.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(i){return toFileWithPath(i)})]}})})}function getDataTransferFiles(e,t){return __awaiter$1(this,void 0,void 0,function(){var n,i;return __generator(this,function(s){switch(s.label){case 0:return e.items?(n=fromList(e.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(toFilePromises))]):[3,2];case 1:return i=s.sent(),[2,noIgnoredFiles(flatten(i))];case 2:return[2,noIgnoredFiles(fromList(e.files).map(function(a){return toFileWithPath(a)}))]}})})}function noIgnoredFiles(e){return e.filter(function(t){return FILES_TO_IGNORE.indexOf(t.name)===-1})}function fromList(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function toFilePromises(e){if(typeof e.webkitGetAsEntry!="function")return fromDataTransferItem(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?fromDirEntry(t):fromDataTransferItem(e)}function flatten(e){return e.reduce(function(t,n){return __spreadArray$1(__spreadArray$1([],__read(t),!1),__read(Array.isArray(n)?flatten(n):[n]),!1)},[])}function fromDataTransferItem(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=toFileWithPath(t);return Promise.resolve(n)}function fromEntry(e){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(t){return[2,e.isDirectory?fromDirEntry(e):fromFileEntry(e)]})})}function fromDirEntry(e){var t=e.createReader();return new Promise(function(n,i){var s=[];function a(){var f=this;t.readEntries(function(m){return __awaiter$1(f,void 0,void 0,function(){var _,l,c;return __generator(this,function(I){switch(I.label){case 0:if(m.length)return[3,5];I.label=1;case 1:return I.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return _=I.sent(),n(_),[3,4];case 3:return l=I.sent(),i(l),[3,4];case 4:return[3,6];case 5:c=Promise.all(m.map(fromEntry)),s.push(c),a(),I.label=6;case 6:return[2]}})})},function(m){i(m)})}a()})}function fromFileEntry(e){return __awaiter$1(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(n,i){e.file(function(s){var a=toFileWithPath(s,e.fullPath);n(a)},function(s){i(s)})})]})})}var _default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),i=e.name||"",s=(e.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return n.some(function(f){var m=f.trim().toLowerCase();return m.charAt(0)==="."?i.toLowerCase().endsWith(m):m.endsWith("/*")?a===m.replace(/\/.*$/,""):s===m})}return!0};function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty$1(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(e,t){if(!!e){if(typeof e=="string")return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(e,t)}}function _arrayLikeToArray$1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$1(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],s=!0,a=!1,f,m;try{for(n=n.call(e);!(s=(f=n.next()).done)&&(i.push(f.value),!(t&&i.length===t));s=!0);}catch(_){a=!0,m=_}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw m}}return i}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function e(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(n)}},getTooLargeRejectionErr=function e(t){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},getTooSmallRejectionErr=function e(t){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(e,t){var n=e.type==="application/x-moz-file"||_default(e,t);return[n,n?null:getInvalidTypeRejectionErr(t)]}function fileMatchSize(e,t,n){if(isDefined(e.size))if(isDefined(t)&&isDefined(n)){if(e.size>n)return[!1,getTooLargeRejectionErr(n)];if(e.size<t)return[!1,getTooSmallRejectionErr(t)]}else{if(isDefined(t)&&e.size<t)return[!1,getTooSmallRejectionErr(t)];if(isDefined(n)&&e.size>n)return[!1,getTooLargeRejectionErr(n)]}return[!0,null]}function isDefined(e){return e!=null}function allFilesAccepted(e){var t=e.files,n=e.accept,i=e.minSize,s=e.maxSize,a=e.multiple,f=e.maxFiles,m=e.validator;return!a&&t.length>1||a&&f>=1&&t.length>f?!1:t.every(function(_){var l=fileAccepted(_,n),c=_slicedToArray$1(l,1),I=c[0],D=fileMatchSize(_,i,s),P=_slicedToArray$1(D,1),E=P[0],T=m?m(_):null;return I&&E&&!T})}function isPropagationStopped(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function isEvtWithFiles(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function onDocumentDragOver(e){e.preventDefault()}function isIe(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function isEdge(e){return e.indexOf("Edge/")!==-1}function isIeOrEdge(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(e)||isEdge(e)}function composeEventHandlers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),f=1;f<s;f++)a[f-1]=arguments[f];return t.some(function(m){return!isPropagationStopped(i)&&m&&m.apply(void 0,[i].concat(a)),isPropagationStopped(i)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(e){if(isDefined(e)){var t=Object.entries(e).filter(function(n){var i=_slicedToArray$1(n,2),s=i[0],a=i[1],f=!0;return isMIMEType(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),f=!1),(!Array.isArray(a)||!a.every(isExt))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),f=!1),f}).reduce(function(n,i){var s=_slicedToArray$1(i,2),a=s[0],f=s[1];return _objectSpread$1(_objectSpread$1({},n),{},_defineProperty$1({},a,f))},{});return[{description:"Files",accept:t}]}return e}function acceptPropAsAcceptAttr(e){if(isDefined(e))return Object.entries(e).reduce(function(t,n){var i=_slicedToArray$1(n,2),s=i[0],a=i[1];return[].concat(_toConsumableArray$1(t),[s],_toConsumableArray$1(a))},[]).filter(function(t){return isMIMEType(t)||isExt(t)}).join(",")}function isAbort(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function isSecurityError(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function isMIMEType(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function isExt(e){return/^.*\.[\w]+$/.test(e)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(e,t){if(!!e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],s=!0,a=!1,f,m;try{for(n=n.call(e);!(s=(f=n.next()).done)&&(i.push(f.value),!(t&&i.length===t));s=!0);}catch(_){a=!0,m=_}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw m}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(i){_defineProperty(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose(e,t),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,i)||(n[i]=e[i]))}return n}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,a;for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var Dropzone=react.exports.forwardRef(function(e,t){var n=e.children,i=_objectWithoutProperties(e,_excluded),s=useDropzone(i),a=s.open,f=_objectWithoutProperties(s,_excluded2);return react.exports.useImperativeHandle(t,function(){return{open:a}},[a]),jsx(react.exports.Fragment,{children:n(_objectSpread(_objectSpread({},f),{},{open:a}))})});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:propTypes.exports.func,accept:propTypes.exports.objectOf(propTypes.exports.arrayOf(propTypes.exports.string)),multiple:propTypes.exports.bool,preventDropOnDocument:propTypes.exports.bool,noClick:propTypes.exports.bool,noKeyboard:propTypes.exports.bool,noDrag:propTypes.exports.bool,noDragEventsBubbling:propTypes.exports.bool,minSize:propTypes.exports.number,maxSize:propTypes.exports.number,maxFiles:propTypes.exports.number,disabled:propTypes.exports.bool,getFilesFromEvent:propTypes.exports.func,onFileDialogCancel:propTypes.exports.func,onFileDialogOpen:propTypes.exports.func,useFsAccessApi:propTypes.exports.bool,autoFocus:propTypes.exports.bool,onDragEnter:propTypes.exports.func,onDragLeave:propTypes.exports.func,onDragOver:propTypes.exports.func,onDrop:propTypes.exports.func,onDropAccepted:propTypes.exports.func,onDropRejected:propTypes.exports.func,onError:propTypes.exports.func,validator:propTypes.exports.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=_objectSpread(_objectSpread({},defaultProps),e),n=t.accept,i=t.disabled,s=t.getFilesFromEvent,a=t.maxSize,f=t.minSize,m=t.multiple,_=t.maxFiles,l=t.onDragEnter,c=t.onDragLeave,I=t.onDragOver,D=t.onDrop,P=t.onDropAccepted,E=t.onDropRejected,T=t.onFileDialogCancel,d=t.onFileDialogOpen,u=t.useFsAccessApi,O=t.autoFocus,k=t.preventDropOnDocument,g=t.noClick,o=t.noKeyboard,v=t.noDrag,y=t.noDragEventsBubbling,p=t.onError,C=t.validator,B=react.exports.useMemo(function(){return acceptPropAsAcceptAttr(n)},[n]),S=react.exports.useMemo(function(){return pickerOptionsFromAccept(n)},[n]),W=react.exports.useMemo(function(){return typeof d=="function"?d:noop},[d]),V=react.exports.useMemo(function(){return typeof T=="function"?T:noop},[T]),Y=react.exports.useRef(null),ee=react.exports.useRef(null),re=react.exports.useReducer(reducer,initialState),le=_slicedToArray(re,2),oe=le[0],se=le[1],me=oe.isFocused,Ee=oe.isFileDialogActive,we=react.exports.useRef(typeof window<"u"&&window.isSecureContext&&u&&canUseFileSystemAccessAPI()),ve=function(){!we.current&&Ee&&setTimeout(function(){if(ee.current){var Q=ee.current.files;Q.length||(se({type:"closeDialog"}),V())}},300)};react.exports.useEffect(function(){return window.addEventListener("focus",ve,!1),function(){window.removeEventListener("focus",ve,!1)}},[ee,Ee,V,we]);var K=react.exports.useRef([]),F=function(Q){Y.current&&Y.current.contains(Q.target)||(Q.preventDefault(),K.current=[])};react.exports.useEffect(function(){return k&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",F,!1)),function(){k&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",F))}},[Y,k]),react.exports.useEffect(function(){return!i&&O&&Y.current&&Y.current.focus(),function(){}},[Y,O,i]);var b=react.exports.useCallback(function(J){p?p(J):console.error(J)},[p]),M=react.exports.useCallback(function(J){J.preventDefault(),J.persist(),ae(J),K.current=[].concat(_toConsumableArray(K.current),[J.target]),isEvtWithFiles(J)&&Promise.resolve(s(J)).then(function(Q){if(!(isPropagationStopped(J)&&!y)){var ue=Q.length,pe=ue>0&&allFilesAccepted({files:Q,accept:B,minSize:f,maxSize:a,multiple:m,maxFiles:_,validator:C}),ye=ue>0&&!pe;se({isDragAccept:pe,isDragReject:ye,isDragActive:!0,type:"setDraggedFiles"}),l&&l(J)}}).catch(function(Q){return b(Q)})},[s,l,b,y,B,f,a,m,_,C]),U=react.exports.useCallback(function(J){J.preventDefault(),J.persist(),ae(J);var Q=isEvtWithFiles(J);if(Q&&J.dataTransfer)try{J.dataTransfer.dropEffect="copy"}catch{}return Q&&I&&I(J),!1},[I,y]),z=react.exports.useCallback(function(J){J.preventDefault(),J.persist(),ae(J);var Q=K.current.filter(function(pe){return Y.current&&Y.current.contains(pe)}),ue=Q.indexOf(J.target);ue!==-1&&Q.splice(ue,1),K.current=Q,!(Q.length>0)&&(se({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(J)&&c&&c(J))},[Y,c,y]),Z=react.exports.useCallback(function(J,Q){var ue=[],pe=[];J.forEach(function(ye){var Se=fileAccepted(ye,B),xe=_slicedToArray(Se,2),te=xe[0],Ae=xe[1],Te=fileMatchSize(ye,f,a),ke=_slicedToArray(Te,2),ge=ke[0],q=ke[1],G=C?C(ye):null;if(te&&ge&&!G)ue.push(ye);else{var fe=[Ae,q];G&&(fe=fe.concat(G)),pe.push({file:ye,errors:fe.filter(function(be){return be})})}}),(!m&&ue.length>1||m&&_>=1&&ue.length>_)&&(ue.forEach(function(ye){pe.push({file:ye,errors:[TOO_MANY_FILES_REJECTION]})}),ue.splice(0)),se({acceptedFiles:ue,fileRejections:pe,type:"setFiles"}),D&&D(ue,pe,Q),pe.length>0&&E&&E(pe,Q),ue.length>0&&P&&P(ue,Q)},[se,m,B,f,a,_,D,P,E,C]),A=react.exports.useCallback(function(J){J.preventDefault(),J.persist(),ae(J),K.current=[],isEvtWithFiles(J)&&Promise.resolve(s(J)).then(function(Q){isPropagationStopped(J)&&!y||Z(Q,J)}).catch(function(Q){return b(Q)}),se({type:"reset"})},[s,Z,b,y]),w=react.exports.useCallback(function(){if(we.current){se({type:"openDialog"}),W();var J={multiple:m,types:S};window.showOpenFilePicker(J).then(function(Q){return s(Q)}).then(function(Q){Z(Q,null),se({type:"closeDialog"})}).catch(function(Q){isAbort(Q)?(V(Q),se({type:"closeDialog"})):isSecurityError(Q)?(we.current=!1,ee.current?(ee.current.value=null,ee.current.click()):b(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):b(Q)});return}ee.current&&(se({type:"openDialog"}),W(),ee.current.value=null,ee.current.click())},[se,W,V,u,Z,b,S,m]),$=react.exports.useCallback(function(J){!Y.current||!Y.current.isEqualNode(J.target)||(J.key===" "||J.key==="Enter"||J.keyCode===32||J.keyCode===13)&&(J.preventDefault(),w())},[Y,w]),h=react.exports.useCallback(function(){se({type:"focus"})},[]),x=react.exports.useCallback(function(){se({type:"blur"})},[]),L=react.exports.useCallback(function(){g||(isIeOrEdge()?setTimeout(w,0):w())},[g,w]),j=function(Q){return i?null:Q},H=function(Q){return o?null:j(Q)},X=function(Q){return v?null:j(Q)},ae=function(Q){y&&Q.stopPropagation()},ne=react.exports.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=J.refKey,ue=Q===void 0?"ref":Q,pe=J.role,ye=J.onKeyDown,Se=J.onFocus,xe=J.onBlur,te=J.onClick,Ae=J.onDragEnter,Te=J.onDragOver,ke=J.onDragLeave,ge=J.onDrop,q=_objectWithoutProperties(J,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:H(composeEventHandlers(ye,$)),onFocus:H(composeEventHandlers(Se,h)),onBlur:H(composeEventHandlers(xe,x)),onClick:j(composeEventHandlers(te,L)),onDragEnter:X(composeEventHandlers(Ae,M)),onDragOver:X(composeEventHandlers(Te,U)),onDragLeave:X(composeEventHandlers(ke,z)),onDrop:X(composeEventHandlers(ge,A)),role:typeof pe=="string"&&pe!==""?pe:"presentation"},ue,Y),!i&&!o?{tabIndex:0}:{}),q)}},[Y,$,h,x,L,M,U,z,A,o,v,i]),ce=react.exports.useCallback(function(J){J.stopPropagation()},[]),he=react.exports.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=J.refKey,ue=Q===void 0?"ref":Q,pe=J.onChange,ye=J.onClick,Se=_objectWithoutProperties(J,_excluded4),xe=_defineProperty({accept:B,multiple:m,type:"file",style:{display:"none"},onChange:j(composeEventHandlers(pe,A)),onClick:j(composeEventHandlers(ye,ce)),tabIndex:-1},ue,ee);return _objectSpread(_objectSpread({},xe),Se)}},[ee,n,m,A,i]);return _objectSpread(_objectSpread({},oe),{},{isFocused:me&&!i,getRootProps:ne,getInputProps:he,rootRef:Y,inputRef:ee,open:j(w)})}function reducer(e,t){switch(t.type){case"focus":return _objectSpread(_objectSpread({},e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return _objectSpread({},initialState);default:return e}}function noop(){}const ExtensionsHeader=e=>jsx(Row,{className:"mb-2",children:jsxs(Col,{sm:"12",className:"ms-50",children:[jsx("p",{className:"font-medium-5 mt-1 extension-title","data-tour":"extension-title",children:e.title}),e.link?jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:e.subTitle}):jsx("p",{className:"text-primary",children:e.subTitle})]})});ExtensionsHeader.propTypes={link:propTypes.exports.string,title:propTypes.exports.string.isRequired,subTitle:propTypes.exports.string.isRequired};const fileUploader="";pdf$1.exports.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdf$1.exports.version}/pdf.worker.js`;const CV=()=>{const[e,t]=react.exports.useState(null),[n,i]=react.exports.useState(""),[s,a]=react.exports.useState(null),f=c=>{t(c),i(c.name),_t.success(`Successfully uploaded ${c.name}`)},{getRootProps:m,getInputProps:_}=useDropzone({multiple:!1,onDrop:c=>{const I=c[0];if(I&&I.name.endsWith(".pdf")){f(I);const D=new FileReader;D.onload=function(P){const E=P.target.result;pdf$1.exports.getDocument({data:new Uint8Array(E)}).promise.then(T=>{a(T.numPages)})},D.readAsArrayBuffer(I)}else _t.error(()=>jsxs("p",{className:"mb-0",children:["You can only upload ",jsx("span",{className:"fw-bolder",children:".pdf"})," files!."]}),{style:{minWidth:"380px"}})}}),l=()=>e?jsx(Document$1,{file:e,children:Array.from(new Array(s),(c,I)=>jsx(Page,{pageNumber:I+1},`page_${I+1}`))}):null;return jsxs(react.exports.Fragment,{children:[jsx(ExtensionsHeader,{title:"PDF"}),jsxs(Row,{className:"import-component",children:[jsx(Col,{sm:"12",children:jsx(Card,{children:jsx(CardBody,{children:jsx(Row,{children:jsx(Col,{sm:"12",children:jsxs("div",{...m({className:"dropzone"}),children:[jsx("input",{..._()}),jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column",children:[jsx(DownloadCloud$1,{size:64}),jsx("h5",{children:"Drop Files here or click to upload"}),jsxs("p",{className:"text-secondary",children:["Drop PDF files here or click"," ",jsx("a",{href:"/",onClick:c=>c.preventDefault(),children:"browse"})," ","through your machine"]})]})]})})})})})}),e&&jsx(Col,{sm:"12",children:jsxs(Card,{className:"justify-content-center align-items-center",children:[jsx(CardHeader,{children:jsx(CardTitle,{tag:"h4",children:n})}),jsx(CardBody,{children:l()})]})})]})]})};export{CV as default};
